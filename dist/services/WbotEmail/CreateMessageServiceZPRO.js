'use strict';
const _0x2abb90 = _0x27ae;
function _0x4939() {
    const _0x270c42 = [
        'tenantId',
        'ticketId',
        'mdQOX',
        'fault',
        'lCrnE',
        '__importDe',
        'ASDbj',
        'uCFEM',
        'photo',
        '\x20webmail\x20m',
        'IxVFl',
        'CcdPF',
        'default',
        'posxjtgen_',
        'fromMe',
        '790905wKWeaf',
        '7ZZBQHm',
        '../../mode',
        'throw',
        'chat:creat',
        'CDgcF',
        'ls/UserZPR',
        'status',
        'info',
        'logger',
        'next',
        'LeXjV',
        'contact',
        'VmBVu',
        'sts',
        '_zpro',
        '506849rMrTtQ',
        'vFNai',
        'include',
        'onWWj',
        'warn',
        'payload',
        'hTxig',
        'lZkpi',
        'done',
        'IbIfX',
        ':\x20e8',
        'channel',
        'c8_zpro/wa',
        ':::\x20WhaTitan\x20::',
        'then',
        'model',
        'findByPk',
        'essage\x20',
        'erty',
        'ack',
        'ZPRO',
        'scheduleDa',
        'user',
        'qhfFL',
        'log',
        'ibnuC',
        'BaAAs',
        'NG_MESSAGE',
        'nMGZX',
        'read',
        '__esModule',
        'error',
        'essage\x20exi',
        ':\x20Creating',
        'mediaUrl',
        '3s0z5_zpro',
        'quotedMsg',
        'ogsoA',
        'ls/Message',
        'where',
        '../../ludp',
        'value',
        '4ZpIPtE',
        'contactId',
        'ERR_CREATI',
        'findOne',
        'zpro',
        'messageId',
        'toString',
        'sended',
        'create',
        'IIZOL',
        'subject',
        'ozhcb',
        '36vCwJnY',
        'ls/Contact',
        'JRBrY',
        'image',
        '3955098sthoko',
        'length',
        'rzqzU',
        'ls/TicketZ',
        'timestamp',
        'name',
        'owQrL',
        'emailId',
        'BCUBw',
        'ticket',
        '77709cSuYhA',
        'pUqzG',
        '__awaiter',
        '/ye0esz516',
        ':::\x20WhaTitan\x20',
        'coLZy',
        'apply',
        'defineProp',
        'body',
        'PRO',
        '../../xwsp',
        'wRQQK',
        'jTsbI',
        '37304370uusNvk',
        '9858392atSHHb',
        'getTime',
        'mediaType',
        'uuid',
        'userId',
        'type',
        '9796950SUUyqx',
        'idFront',
        '_SYSTEM\x202',
        'gzZXB',
        'FeFPV',
        'update'
    ];
    _0x4939 = function () {
        return _0x270c42;
    };
    return _0x4939();
}
(function (_0x835ad7, _0x6c05d7) {
    const _0x525d17 = _0x27ae, _0x4ccf4c = _0x835ad7();
    while (!![]) {
        try {
            const _0x4d2d93 = parseInt(_0x525d17(0xe2)) / (0xe8a + 0x184e + -0x26d7) * (parseInt(_0x525d17(0x8f)) / (-0x5 * 0x10 + 0x2ae * 0x7 + -0x1 * 0x1270)) + -parseInt(_0x525d17(0xa9)) / (0x1c2e + -0x8e6 + -0x1345) * (-parseInt(_0x525d17(0x9b)) / (0x554 + 0x53 * 0x11 + 0x11 * -0xa3)) + parseInt(_0x525d17(0xd2)) / (0x2 * -0x3d7 + 0x1139 + 0x17 * -0x6a) + parseInt(_0x525d17(0x9f)) / (0x154c + -0x141 + 0x1 * -0x1405) + parseInt(_0x525d17(0xd3)) / (0x24db * -0x1 + -0x13bd + 0x389f) * (parseInt(_0x525d17(0xb7)) / (-0xe21 + -0x2656 + 0x347f)) + parseInt(_0x525d17(0xbd)) / (-0x1d50 + 0x1501 + -0x1 * -0x858) + -parseInt(_0x525d17(0xb6)) / (0x1bdd + 0x553 + -0x2126);
            if (_0x4d2d93 === _0x6c05d7)
                break;
            else
                _0x4ccf4c['push'](_0x4ccf4c['shift']());
        } catch (_0x22f45d) {
            _0x4ccf4c['push'](_0x4ccf4c['shift']());
        }
    }
}(_0x4939, -0x12811 * 0x11 + 0xb * -0x198f5 + 0x5 * 0x971bd));
var __awaiter = this && this[_0x2abb90(0xab)] || function (_0x55eb53, _0x79dba1, _0x2861b9, _0x3b78c2) {
        const _0x3210f8 = _0x2abb90, _0x102ca6 = {
                'BCUBw': function (_0x1d93c4, _0x59bdf6) {
                    return _0x1d93c4(_0x59bdf6);
                },
                'VmBVu': function (_0x5978aa, _0x1709e6) {
                    return _0x5978aa instanceof _0x1709e6;
                },
                'LeXjV': function (_0x40f830, _0x4f2f41) {
                    return _0x40f830(_0x4f2f41);
                },
                'coLZy': _0x3210f8(0xd5),
                'owQrL': function (_0x12f1b9, _0x130fa4) {
                    return _0x12f1b9(_0x130fa4);
                },
                'JRBrY': function (_0x90d68c, _0x327619) {
                    return _0x90d68c(_0x327619);
                },
                'nMGZX': function (_0x14d42a, _0x3a38e5) {
                    return _0x14d42a(_0x3a38e5);
                }
            };
        function _0x596563(_0xcfff30) {
            const _0x2308a6 = _0x3210f8, _0x268363 = {
                    'qhfFL': function (_0xfbbb17, _0xea2e4) {
                        const _0x5a7c0f = _0x27ae;
                        return _0x102ca6[_0x5a7c0f(0xa7)](_0xfbbb17, _0xea2e4);
                    }
                };
            return _0x102ca6[_0x2308a6(0xdf)](_0xcfff30, _0x2861b9) ? _0xcfff30 : new _0x2861b9(function (_0x342dec) {
                const _0x1d92ed = _0x2308a6;
                _0x268363[_0x1d92ed(0x7c)](_0x342dec, _0xcfff30);
            });
        }
        return new (_0x2861b9 || (_0x2861b9 = Promise))(function (_0xb8c484, _0x5df3b) {
            const _0x4b956f = _0x3210f8;
            function _0xb1f42(_0x90b716) {
                const _0x22c5f6 = _0x27ae;
                try {
                    _0x102ca6[_0x22c5f6(0xa7)](_0x10fd38, _0x3b78c2[_0x22c5f6(0xdc)](_0x90b716));
                } catch (_0x55b140) {
                    _0x102ca6[_0x22c5f6(0xdd)](_0x5df3b, _0x55b140);
                }
            }
            function _0x39c878(_0x47d3c4) {
                const _0x2d004f = _0x27ae;
                try {
                    _0x102ca6[_0x2d004f(0xdd)](_0x10fd38, _0x3b78c2[_0x102ca6[_0x2d004f(0xae)]](_0x47d3c4));
                } catch (_0x4b69a8) {
                    _0x102ca6[_0x2d004f(0xdd)](_0x5df3b, _0x4b69a8);
                }
            }
            function _0x10fd38(_0x1b22c0) {
                const _0x4f3905 = _0x27ae;
                _0x1b22c0[_0x4f3905(0x6d)] ? _0x102ca6[_0x4f3905(0xa5)](_0xb8c484, _0x1b22c0[_0x4f3905(0x8e)]) : _0x102ca6[_0x4f3905(0x9d)](_0x596563, _0x1b22c0[_0x4f3905(0x8e)])[_0x4f3905(0x73)](_0xb1f42, _0x39c878);
            }
            _0x102ca6[_0x4b956f(0x81)](_0x10fd38, (_0x3b78c2 = _0x3b78c2[_0x4b956f(0xaf)](_0x55eb53, _0x79dba1 || []))[_0x4b956f(0xdc)]());
        });
    }, __importDefault = this && this[_0x2abb90(0xc8) + _0x2abb90(0xc6)] || function (_0x160d05) {
        const _0x259041 = _0x2abb90;
        return _0x160d05 && _0x160d05[_0x259041(0x83)] ? _0x160d05 : { 'default': _0x160d05 };
    };
const _0x114ed4 = {};
_0x114ed4[_0x2abb90(0x8e)] = !![], Object[_0x2abb90(0xb0) + _0x2abb90(0x77)](exports, _0x2abb90(0x83), _0x114ed4);
function _0x27ae(_0x4ea868, _0x12ebd4) {
    const _0x33e18c = _0x4939();
    return _0x27ae = function (_0x1a987a, _0x6fe510) {
        _0x1a987a = _0x1a987a - (-0x1 * -0xf47 + 0x1c33 + -0x2b13);
        let _0x193f59 = _0x33e18c[_0x1a987a];
        return _0x193f59;
    }, _0x27ae(_0x4ea868, _0x12ebd4);
}
const MessageZPRO_1 = __importDefault(require(_0x2abb90(0xd4) + _0x2abb90(0x8b) + _0x2abb90(0x79))), ye0esz516_zpro_1 = require(_0x2abb90(0xb3) + _0x2abb90(0x88) + _0x2abb90(0xac) + _0x2abb90(0xe1)), waposxjtgen_zpro_1 = __importDefault(require(_0x2abb90(0x8d) + _0x2abb90(0x71) + _0x2abb90(0xd0) + _0x2abb90(0x93))), uuid_1 = require(_0x2abb90(0xba)), TicketZPRO_1 = __importDefault(require(_0x2abb90(0xd4) + _0x2abb90(0xa2) + _0x2abb90(0xb2))), UserZPRO_1 = __importDefault(require(_0x2abb90(0xd4) + _0x2abb90(0xd8) + 'O')), ContactZPRO_1 = __importDefault(require(_0x2abb90(0xd4) + _0x2abb90(0x9c) + _0x2abb90(0x79))), CreateMessageService = _0x52bf6f => __awaiter(void (0x228d * -0x1 + -0xd04 + 0x2f91), void (0x1768 + 0x2e * -0x67 + 0x26 * -0x21), void (0x8c0 + 0x1d74 * -0x1 + 0xa * 0x212), function* () {
        const _0x5b9572 = _0x2abb90, _0x279ea8 = {};
        _0x279ea8[_0x5b9572(0x6e)] = _0x5b9572(0xad) + _0x5b9572(0x72) + _0x5b9572(0x86) + _0x5b9572(0xcc) + _0x5b9572(0x76), _0x279ea8[_0x5b9572(0x98)] = _0x5b9572(0xad) + _0x5b9572(0x72) + _0x5b9572(0x86) + _0x5b9572(0xcc) + _0x5b9572(0x85) + _0x5b9572(0xe0), _0x279ea8[_0x5b9572(0xa1)] = function (_0x2ba86f, _0x38f0e3) {
            return _0x2ba86f === _0x38f0e3;
        }, _0x279ea8[_0x5b9572(0xc9)] = function (_0x1f4a36, _0x48b69e) {
            return _0x1f4a36 === _0x48b69e;
        }, _0x279ea8[_0x5b9572(0xc7)] = _0x5b9572(0x96), _0x279ea8[_0x5b9572(0xaa)] = function (_0x410f34, _0x536fbc) {
            return _0x410f34 === _0x536fbc;
        }, _0x279ea8[_0x5b9572(0x9a)] = _0x5b9572(0xcb), _0x279ea8[_0x5b9572(0x6c)] = _0x5b9572(0x9e), _0x279ea8[_0x5b9572(0x6b)] = _0x5b9572(0xa8), _0x279ea8[_0x5b9572(0xc1)] = _0x5b9572(0xde), _0x279ea8[_0x5b9572(0xb5)] = _0x5b9572(0x89), _0x279ea8[_0x5b9572(0xca)] = _0x5b9572(0x7b), _0x279ea8[_0x5b9572(0xce)] = _0x5b9572(0xa4), _0x279ea8[_0x5b9572(0xc5)] = function (_0x3ec16c, _0x22fc8a) {
            return _0x3ec16c >= _0x22fc8a;
        }, _0x279ea8[_0x5b9572(0xb4)] = function (_0x7864f4, _0xddb5ab) {
            return _0x7864f4 === _0xddb5ab;
        }, _0x279ea8[_0x5b9572(0xcd)] = _0x5b9572(0x84), _0x279ea8[_0x5b9572(0x8a)] = _0x5b9572(0x91) + _0x5b9572(0x80) + _0x5b9572(0xbf), _0x279ea8[_0x5b9572(0x7e)] = function (_0x485482, _0x115476) {
            return _0x485482 >= _0x115476;
        }, _0x279ea8[_0x5b9572(0x7f)] = function (_0x2ab053, _0x3ed46f) {
            return _0x2ab053 === _0x3ed46f;
        }, _0x279ea8[_0x5b9572(0xe3)] = function (_0x150531, _0x52d479) {
            return _0x150531 === _0x52d479;
        }, _0x279ea8[_0x5b9572(0x68)] = _0x5b9572(0xd6) + 'e', _0x279ea8[_0x5b9572(0xc0)] = function (_0x34d532, _0x1d9b9f) {
            return _0x34d532 + _0x1d9b9f;
        }, _0x279ea8[_0x5b9572(0xd7)] = _0x5b9572(0xad) + _0x5b9572(0x72) + _0x5b9572(0x6f);
        const _0x92fe10 = _0x279ea8;
        var _0x4686e9, _0x1f3861;
        ye0esz516_zpro_1[_0x5b9572(0xdb)][_0x5b9572(0xda)](_0x92fe10[_0x5b9572(0x6e)]);
        const _0x3ade36 = {};
        _0x3ade36[_0x5b9572(0x94)] = _0x52bf6f['id'], _0x3ade36[_0x5b9572(0xc3)] = _0x52bf6f[_0x5b9572(0xc3)];
        const _0x5454be = {};
        _0x5454be[_0x5b9572(0x8c)] = _0x3ade36;
        const _0x529005 = yield MessageZPRO_1[_0x5b9572(0xcf)][_0x5b9572(0x92)](_0x5454be);
        if (_0x529005) {
            ye0esz516_zpro_1[_0x5b9572(0xdb)][_0x5b9572(0xda)](_0x92fe10[_0x5b9572(0x98)]);
            return;
        }
        const {
            id: _0x433dfa,
            contactId: _0x3e7230,
            body: _0x7b2c7c,
            ticketId: _0x34a46a,
            fromMe: _0x5bd372,
            tenantId: _0x2bb58c,
            fileName: _0x238ade,
            mediaType: _0x1b65d8,
            originalName: _0x2d5cc3,
            scheduleDate: _0x13ca15,
            ack: _0x16c511,
            userId: _0x1dbe68
        } = _0x52bf6f;
        if ((!_0x7b2c7c || _0x92fe10[_0x5b9572(0xa1)](_0x7b2c7c, '')) && (!_0x238ade || _0x92fe10[_0x5b9572(0xc9)](_0x238ade, '')))
            return;
        const _0x1c30a8 = (0x1ea0 + -0x4 * -0x6b5 + -0x3974 * 0x1, uuid_1['v4'])(), _0x298822 = {};
        _0x298822[_0x5b9572(0x90)] = _0x3e7230, _0x298822[_0x5b9572(0xb1)] = _0x7b2c7c, _0x298822[_0x5b9572(0xc4)] = _0x34a46a, _0x298822[_0x5b9572(0xd1)] = _0x5bd372, _0x298822[_0x5b9572(0xc3)] = _0x2bb58c, _0x298822[_0x5b9572(0x94)] = _0x433dfa, _0x298822[_0x5b9572(0x78)] = 0x2, _0x298822[_0x5b9572(0xd9)] = _0x92fe10[_0x5b9572(0xc7)], _0x298822[_0x5b9572(0xbe)] = _0x1c30a8, _0x298822[_0x5b9572(0x82)] = ![], _0x298822[_0x5b9572(0x7a) + 'te'] = _0x13ca15, _0x298822[_0x5b9572(0xbb)] = _0x1dbe68;
        const _0x472552 = _0x298822;
        _0x52bf6f[_0x5b9572(0x99)] && (_0x472552[_0x5b9572(0x99)] = _0x52bf6f[_0x5b9572(0x99)]);
        _0x52bf6f[_0x5b9572(0xa6)] && (_0x472552[_0x5b9572(0xa6)] = _0x52bf6f[_0x5b9572(0xa6)]);
        _0x52bf6f[_0x5b9572(0x70)] && (_0x472552[_0x5b9572(0x70)] = _0x52bf6f[_0x5b9572(0x70)]);
        _0x238ade && (_0x472552[_0x5b9572(0x87)] = _0x238ade, _0x472552[_0x5b9572(0xb9)] = _0x92fe10[_0x5b9572(0xaa)](_0x1b65d8, _0x92fe10[_0x5b9572(0x9a)]) ? _0x92fe10[_0x5b9572(0x6c)] : _0x1b65d8);
        try {
            const _0x51739d = yield MessageZPRO_1[_0x5b9572(0xcf)][_0x5b9572(0x97)](_0x472552), _0x2fe5b5 = {};
            _0x2fe5b5[_0x5b9572(0xc3)] = _0x2bb58c;
            const _0x491603 = {};
            _0x491603[_0x5b9572(0x74)] = TicketZPRO_1[_0x5b9572(0xcf)], _0x491603['as'] = _0x92fe10[_0x5b9572(0x6b)], _0x491603[_0x5b9572(0x8c)] = _0x2fe5b5, _0x491603[_0x5b9572(0x67)] = [_0x92fe10[_0x5b9572(0xc1)]];
            const _0x2fa193 = yield MessageZPRO_1[_0x5b9572(0xcf)][_0x5b9572(0x75)](_0x51739d['id'], {
                'include': [
                    _0x491603,
                    {
                        'model': MessageZPRO_1[_0x5b9572(0xcf)],
                        'as': _0x92fe10[_0x5b9572(0xb5)],
                        'include': [_0x92fe10[_0x5b9572(0xc1)]]
                    },
                    {
                        'model': UserZPRO_1[_0x5b9572(0xcf)],
                        'as': _0x92fe10[_0x5b9572(0xca)],
                        'attributes': [
                            'id',
                            _0x92fe10[_0x5b9572(0xce)]
                        ]
                    },
                    {
                        'model': ContactZPRO_1[_0x5b9572(0xcf)],
                        'as': _0x92fe10[_0x5b9572(0xc1)],
                        'attributes': [
                            'id',
                            _0x92fe10[_0x5b9572(0xce)]
                        ]
                    }
                ]
            });
            if (_0x2fa193)
                try {
                    yield _0x2fa193[_0x5b9572(0xa8)][_0x5b9572(0xc2)]({
                        'lastMessageAt': _0x92fe10[_0x5b9572(0xc5)](_0x92fe10[_0x5b9572(0xb4)](_0x4686e9 = _0x2fa193[_0x5b9572(0xa3)], null) || _0x92fe10[_0x5b9572(0xa1)](_0x4686e9, void (-0x15 * -0x5f + -0x1e8f + 0x16c4)) ? void (0x732 * -0x5 + 0x13fb + 0x3 * 0x555) : _0x4686e9[_0x5b9572(0x95)]()[_0x5b9572(0xa0)], -0x1049 + -0x1001 + 0x2057) ? _0x2fa193[_0x5b9572(0xa3)] : new Date()[_0x5b9572(0xb8)](),
                        'lastMessageReceived': _0x2fa193[_0x5b9572(0xd1)] ? null : new Date()[_0x5b9572(0xb8)]()
                    });
                } catch (_0xaac3b6) {
                    console[_0x5b9572(0x7d)](_0x92fe10[_0x5b9572(0xcd)], _0xaac3b6);
                }
            if (!_0x2fa193)
                throw new Error(_0x92fe10[_0x5b9572(0x8a)]);
            _0x2fa193[_0x5b9572(0xd1)] && (yield TicketZPRO_1[_0x5b9572(0xcf)][_0x5b9572(0xc2)]({ 'lastMessageReceived': _0x92fe10[_0x5b9572(0x7e)](_0x92fe10[_0x5b9572(0x7f)](_0x1f3861 = _0x2fa193[_0x5b9572(0xa3)], null) || _0x92fe10[_0x5b9572(0xe3)](_0x1f3861, void (0xe6b + 0x1 * 0x8b3 + -0x10d * 0x16)) ? void (0x672 + -0x39a * 0x5 + -0x2 * -0x5c8) : _0x1f3861[_0x5b9572(0x95)]()[_0x5b9572(0xa0)], 0x7 * -0x387 + 0x5a1 * -0x5 + 0x34e3) ? _0x2fa193[_0x5b9572(0xa3)] : new Date()[_0x5b9572(0xb8)]() }, { 'where': { 'id': _0x2fa193[_0x5b9572(0xc4)] } }));
            const _0x3e6ce3 = {};
            return _0x3e6ce3[_0x5b9572(0xc3)] = _0x2bb58c, _0x3e6ce3[_0x5b9572(0xbc)] = _0x92fe10[_0x5b9572(0x68)], _0x3e6ce3[_0x5b9572(0x6a)] = _0x2fa193, (-0x16b8 + -0x955 * -0x2 + -0x3 * -0x15a, waposxjtgen_zpro_1[_0x5b9572(0xcf)])(_0x3e6ce3), _0x51739d;
        } catch (_0x2f1eea) {
            ye0esz516_zpro_1[_0x5b9572(0xdb)][_0x5b9572(0x69)](_0x92fe10[_0x5b9572(0xc0)](_0x92fe10[_0x5b9572(0xd7)], _0x2f1eea));
        }
    });
exports[_0x2abb90(0xcf)] = CreateMessageService;