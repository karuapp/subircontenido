'use strict';
const _0xbf5f53 = _0x107b;
(function (_0xc88468, _0x41968a) {
    const _0x22b79e = _0x107b, _0x2a3f8b = _0xc88468();
    while (!![]) {
        try {
            const _0x4bcd4f = parseInt(_0x22b79e(0x1cb)) / (0x1436 + -0x3c4 * -0xa + -0x39dd) + parseInt(_0x22b79e(0x1e7)) / (-0x1401 + -0x664 * -0x3 + -0x1 * -0xd7) + -parseInt(_0x22b79e(0x218)) / (-0xd8b * -0x1 + 0x1619 + -0x23a1) * (parseInt(_0x22b79e(0x1b9)) / (-0xdc + 0xe3f + 0x7 * -0x1e9)) + parseInt(_0x22b79e(0x1b8)) / (0x1a0 * -0x1 + 0xa12 * -0x1 + -0xbb7 * -0x1) * (parseInt(_0x22b79e(0x1fa)) / (-0x819 + 0x1b45 * 0x1 + -0x1326)) + -parseInt(_0x22b79e(0x213)) / (-0x1480 + -0x1 * 0x3eb + 0x1872) + -parseInt(_0x22b79e(0x20d)) / (-0xc33 + -0xd8 * 0x7 + 0x1223) + parseInt(_0x22b79e(0x1f7)) / (-0xa03 + -0x4b3 * -0x2 + 0xa6 * 0x1);
            if (_0x4bcd4f === _0x41968a)
                break;
            else
                _0x2a3f8b['push'](_0x2a3f8b['shift']());
        } catch (_0x125a64) {
            _0x2a3f8b['push'](_0x2a3f8b['shift']());
        }
    }
}(_0x4d80, 0x780e9 + -0x9dc47 + 0xe1ca1));
function _0x107b(_0x5185db, _0x3843a1) {
    const _0x531c2e = _0x4d80();
    return _0x107b = function (_0x19b74d, _0x53e876) {
        _0x19b74d = _0x19b74d - (-0x23f3 * -0x1 + 0x1 * 0x23f6 + 0x3b * -0x131);
        let _0x4299cd = _0x531c2e[_0x19b74d];
        return _0x4299cd;
    }, _0x107b(_0x5185db, _0x3843a1);
}
function _0x4d80() {
    const _0x46b6e0 = [
        ')::\x20',
        'pending',
        'mediaUrl',
        'defineProp',
        'UvIBz',
        'DMDAj',
        'video',
        'toString',
        'then',
        'value',
        ':::\x20WhaTitan\x20',
        'sendVoice',
        'tenantId',
        'zammU',
        'dataValues',
        '5880717CLkjCD',
        'erty',
        'zpro',
        '9103434CYYSDG',
        'public',
        'HQIrd',
        'join',
        '../../ludp',
        'bCPDB',
        'closed',
        'DaXIe',
        'pzZrK',
        'assign',
        'ls/TicketZ',
        'lwrWR',
        'throw',
        'logger',
        'error',
        'g_zpro/3a2',
        'gzdjK',
        ':\x20Error\x20se',
        '../../xwsp',
        '11824920FiLNHW',
        'ticket',
        'gZMJU',
        'xzlJP',
        '../../mode',
        'nant:\x20',
        '3929394tnRzUv',
        'mediaName',
        'reply_to_m',
        '\x208\x20(id:\x20',
        'lte',
        '10245ZlXzFN',
        '__esModule',
        'qvwVt',
        'essage_id',
        'where',
        'ISwRI',
        'age\x20is\x20(te',
        'includes',
        'text',
        'abhjW',
        'chat:ack',
        'date',
        'sendMessag',
        'XltCT',
        'PRO',
        'sendDocume',
        'telegramId',
        'Error\x20mess',
        'rsEEH',
        'messageId',
        'qcp0_zpro',
        'DaniJ',
        'image',
        'ASC',
        'MQWJu',
        'createdAt',
        'EecCs',
        'ptt',
        '5TPCeiN',
        '1624hRljkg',
        'chat',
        'apply',
        '__importDe',
        ':::\x20WhaTitan\x20::',
        'posxjtgen_',
        '__awaiter',
        'lEici',
        'telegram',
        'c8_zpro/wa',
        '../../k7qf',
        'mediaType',
        'HseBC',
        'wKIXv',
        'contact',
        'sendVideo',
        'sequelize',
        'ZPRO',
        '1484541aWKOyq',
        'nd\x20message',
        'update',
        'message_id',
        'done',
        'audio',
        'OCXsc',
        'sendPhoto',
        'ls/Message',
        '/ye0esz516',
        'BhNYi',
        'fault',
        'path',
        'default',
        'wHSJz',
        'hUJko',
        'body',
        'findAll',
        'sended',
        'timestamp',
        '\x20|\x20Ticket:',
        'quotedMsg',
        'fvpgx',
        'warn',
        'source',
        '3s0z5_zpro',
        'next',
        '_zpro',
        '1082250RRCSpj'
    ];
    _0x4d80 = function () {
        return _0x46b6e0;
    };
    return _0x4d80();
}
var __awaiter = this && this[_0xbf5f53(0x1bf)] || function (_0x2d152c, _0x286a21, _0x215728, _0x2f361a) {
        const _0x52bf99 = _0xbf5f53, _0x138466 = {
                'abhjW': function (_0xc4d389, _0x155c29) {
                    return _0xc4d389(_0x155c29);
                },
                'gZMJU': function (_0x7e0ff7, _0x515a85) {
                    return _0x7e0ff7 instanceof _0x515a85;
                },
                'EecCs': function (_0x38e6ff, _0xacca33) {
                    return _0x38e6ff(_0xacca33);
                },
                'HseBC': _0x52bf99(0x206),
                'xzlJP': function (_0xc6affe, _0x55e2a4) {
                    return _0xc6affe(_0x55e2a4);
                }
            };
        function _0x402b02(_0x54d1c0) {
            const _0x5b0bf9 = _0x52bf99, _0xda68d7 = {
                    'bCPDB': function (_0x34ec79, _0x3d798e) {
                        const _0x1eb387 = _0x107b;
                        return _0x138466[_0x1eb387(0x1a5)](_0x34ec79, _0x3d798e);
                    }
                };
            return _0x138466[_0x5b0bf9(0x20f)](_0x54d1c0, _0x215728) ? _0x54d1c0 : new _0x215728(function (_0x1019f4) {
                const _0x5e709c = _0x5b0bf9;
                _0xda68d7[_0x5e709c(0x1ff)](_0x1019f4, _0x54d1c0);
            });
        }
        return new (_0x215728 || (_0x215728 = Promise))(function (_0x1fb519, _0x112a2c) {
            const _0x16d025 = _0x52bf99, _0x14e7ee = {
                    'lwrWR': function (_0x45a1ce, _0x2a7802) {
                        const _0x1788d0 = _0x107b;
                        return _0x138466[_0x1788d0(0x1a5)](_0x45a1ce, _0x2a7802);
                    }
                };
            function _0x3822d9(_0x369a48) {
                const _0x5cc2ee = _0x107b;
                try {
                    _0x138466[_0x5cc2ee(0x1a5)](_0xf24688, _0x2f361a[_0x5cc2ee(0x1e5)](_0x369a48));
                } catch (_0x5521a7) {
                    _0x138466[_0x5cc2ee(0x1b6)](_0x112a2c, _0x5521a7);
                }
            }
            function _0x2b1c19(_0x32e6b8) {
                const _0xb445e7 = _0x107b;
                try {
                    _0x138466[_0xb445e7(0x1b6)](_0xf24688, _0x2f361a[_0x138466[_0xb445e7(0x1c5)]](_0x32e6b8));
                } catch (_0x54484e) {
                    _0x138466[_0xb445e7(0x210)](_0x112a2c, _0x54484e);
                }
            }
            function _0xf24688(_0x30a1b3) {
                const _0x25ccab = _0x107b;
                _0x30a1b3[_0x25ccab(0x1cf)] ? _0x14e7ee[_0x25ccab(0x205)](_0x1fb519, _0x30a1b3[_0x25ccab(0x1f1)]) : _0x14e7ee[_0x25ccab(0x205)](_0x402b02, _0x30a1b3[_0x25ccab(0x1f1)])[_0x25ccab(0x1f0)](_0x3822d9, _0x2b1c19);
            }
            _0x138466[_0x16d025(0x1a5)](_0xf24688, (_0x2f361a = _0x2f361a[_0x16d025(0x1bb)](_0x2d152c, _0x286a21 || []))[_0x16d025(0x1e5)]());
        });
    }, __importDefault = this && this[_0xbf5f53(0x1bc) + _0xbf5f53(0x1d6)] || function (_0x43f8fe) {
        const _0x3f5c59 = _0xbf5f53;
        return _0x43f8fe && _0x43f8fe[_0x3f5c59(0x219)] ? _0x43f8fe : { 'default': _0x43f8fe };
    };
const _0x2b6868 = {};
_0x2b6868[_0xbf5f53(0x1f1)] = !![], Object[_0xbf5f53(0x1eb) + _0xbf5f53(0x1f8)](exports, _0xbf5f53(0x219), _0x2b6868);
const path_1 = require(_0xbf5f53(0x1d7)), sequelize_1 = require(_0xbf5f53(0x1c9)), _3a2qcp0_zpro_1 = __importDefault(require(_0xbf5f53(0x1c3) + _0xbf5f53(0x209) + _0xbf5f53(0x1b0))), waposxjtgen_zpro_1 = __importDefault(require(_0xbf5f53(0x1fe) + _0xbf5f53(0x1c2) + _0xbf5f53(0x1be) + _0xbf5f53(0x1f9))), MessageZPRO_1 = __importDefault(require(_0xbf5f53(0x211) + _0xbf5f53(0x1d3) + _0xbf5f53(0x1ca))), TicketZPRO_1 = __importDefault(require(_0xbf5f53(0x211) + _0xbf5f53(0x204) + _0xbf5f53(0x1aa))), ye0esz516_zpro_1 = require(_0xbf5f53(0x20c) + _0xbf5f53(0x1e4) + _0xbf5f53(0x1d4) + _0xbf5f53(0x1e6)), SendMessagesSystemWbot = (_0x591e3c, _0x12be3e) => __awaiter(void (0x17ef + 0x10ab + 0x2 * -0x144d), void (0x1f74 + -0x4c3 + -0x1ab1), void (-0xa27 + -0x166 + 0xb8d * 0x1), function* () {
        const _0x1d840a = _0xbf5f53, _0x3bd627 = {};
        _0x3bd627[_0x1d840a(0x202)] = _0x1d840a(0x1e9), _0x3bd627[_0x1d840a(0x1b1)] = _0x1d840a(0x1c7), _0x3bd627[_0x1d840a(0x1ed)] = _0x1d840a(0x20e), _0x3bd627[_0x1d840a(0x1a1)] = _0x1d840a(0x200), _0x3bd627[_0x1d840a(0x1ae)] = _0x1d840a(0x1c1), _0x3bd627[_0x1d840a(0x1b4)] = _0x1d840a(0x1e0), _0x3bd627[_0x1d840a(0x1c6)] = _0x1d840a(0x1b5), _0x3bd627[_0x1d840a(0x1ec)] = _0x1d840a(0x1b3), _0x3bd627[_0x1d840a(0x20a)] = _0x1d840a(0x1ba), _0x3bd627[_0x1d840a(0x201)] = _0x1d840a(0x1a4), _0x3bd627[_0x1d840a(0x1d9)] = _0x1d840a(0x1fb), _0x3bd627[_0x1d840a(0x1fc)] = function (_0x3679bf, _0x2c8e06) {
            return _0x3679bf === _0x2c8e06;
        }, _0x3bd627[_0x1d840a(0x1d1)] = _0x1d840a(0x1d0), _0x3bd627[_0x1d840a(0x1da)] = _0x1d840a(0x1b7), _0x3bd627[_0x1d840a(0x19e)] = _0x1d840a(0x1b2), _0x3bd627[_0x1d840a(0x1e1)] = function (_0x3f2df0, _0x525ce9) {
            return _0x3f2df0 === _0x525ce9;
        }, _0x3bd627[_0x1d840a(0x1a9)] = _0x1d840a(0x1ee), _0x3bd627[_0x1d840a(0x1d5)] = function (_0x58952a, _0x30c3e5) {
            return _0x58952a * _0x30c3e5;
        }, _0x3bd627[_0x1d840a(0x1f5)] = _0x1d840a(0x1dd), _0x3bd627[_0x1d840a(0x1c0)] = _0x1d840a(0x1a6);
        const _0x2efd1c = _0x3bd627, _0x5d4bca = { [sequelize_1['Op']['is']]: null }, _0x4b6a00 = {
                'fromMe': !![],
                'messageId': _0x5d4bca,
                'status': _0x2efd1c[_0x1d840a(0x202)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][_0x1d840a(0x217)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, _0x182e12 = yield MessageZPRO_1[_0x1d840a(0x1d8)][_0x1d840a(0x1dc)]({
                'where': _0x4b6a00,
                'include': [
                    _0x2efd1c[_0x1d840a(0x1b1)],
                    {
                        'model': TicketZPRO_1[_0x1d840a(0x1d8)],
                        'as': _0x2efd1c[_0x1d840a(0x1ed)],
                        'where': {
                            'tenantId': _0x12be3e,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: _0x2efd1c[_0x1d840a(0x1a1)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': _0x2efd1c[_0x1d840a(0x1ae)],
                            'whatsappId': _0x591e3c['id']
                        },
                        'include': [_0x2efd1c[_0x1d840a(0x1b1)]]
                    },
                    {
                        'model': MessageZPRO_1[_0x1d840a(0x1d8)],
                        'as': _0x2efd1c[_0x1d840a(0x1b4)],
                        'include': [_0x2efd1c[_0x1d840a(0x1b1)]]
                    }
                ],
                'order': [[
                        _0x2efd1c[_0x1d840a(0x1c6)],
                        _0x2efd1c[_0x1d840a(0x1ec)]
                    ]]
            });
        let _0x1e2c90;
        for (const _0x3e8df4 of _0x182e12) {
            const _0x40bb3e = _0x3e8df4, {ticket: _0x541747} = _0x40bb3e, _0x174631 = _0x541747[_0x1d840a(0x1c7)][_0x1d840a(0x1ac)], _0x40a0f4 = {};
            _0x40bb3e[_0x1d840a(0x1e0)] && (_0x40a0f4[_0x1d840a(0x215) + _0x1d840a(0x19f)] = _0x40bb3e[_0x1d840a(0x1e0)][_0x1d840a(0x1af)]);
            try {
                if (![
                        _0x2efd1c[_0x1d840a(0x20a)],
                        _0x2efd1c[_0x1d840a(0x201)]
                    ][_0x1d840a(0x1a3)](_0x40bb3e[_0x1d840a(0x1c4)]) && _0x40bb3e[_0x1d840a(0x214)]) {
                    const _0x3b3829 = (0x2 * -0x125f + 0x2376 * -0x1 + 0x4834, path_1[_0x1d840a(0x1fd)])(__dirname, '..', '..', '..', _0x2efd1c[_0x1d840a(0x1d9)], _0x12be3e[_0x1d840a(0x1ef)]()), _0x1fcdba = (-0x7b0 * -0x1 + 0x2130 + 0x1 * -0x28e0, path_1[_0x1d840a(0x1fd)])(_0x3b3829, _0x40bb3e[_0x1d840a(0x214)]);
                    if (_0x2efd1c[_0x1d840a(0x1fc)](_0x40bb3e[_0x1d840a(0x1c4)], _0x2efd1c[_0x1d840a(0x1d1)]) || _0x2efd1c[_0x1d840a(0x1fc)](_0x40bb3e[_0x1d840a(0x1c4)], _0x2efd1c[_0x1d840a(0x1da)])) {
                        const _0x379ff8 = {};
                        _0x379ff8[_0x1d840a(0x1e3)] = _0x1fcdba, _0x1e2c90 = yield _0x591e3c[_0x1d840a(0x1c1)][_0x1d840a(0x1f3)](_0x174631, _0x379ff8, _0x40a0f4);
                    } else {
                        if (_0x2efd1c[_0x1d840a(0x1fc)](_0x40bb3e[_0x1d840a(0x1c4)], _0x2efd1c[_0x1d840a(0x19e)])) {
                            const _0x5f56d4 = {};
                            _0x5f56d4[_0x1d840a(0x1e3)] = _0x1fcdba, _0x1e2c90 = yield _0x591e3c[_0x1d840a(0x1c1)][_0x1d840a(0x1d2)](_0x174631, _0x5f56d4, _0x40a0f4);
                        } else {
                            if (_0x2efd1c[_0x1d840a(0x1e1)](_0x40bb3e[_0x1d840a(0x1c4)], _0x2efd1c[_0x1d840a(0x1a9)])) {
                                const _0x4e3f2a = {};
                                _0x4e3f2a[_0x1d840a(0x1e3)] = _0x1fcdba, _0x1e2c90 = yield _0x591e3c[_0x1d840a(0x1c1)][_0x1d840a(0x1c8)](_0x174631, _0x4e3f2a, _0x40a0f4);
                            } else {
                                const _0x1e87bd = {};
                                _0x1e87bd[_0x1d840a(0x1e3)] = _0x1fcdba, _0x1e2c90 = yield _0x591e3c[_0x1d840a(0x1c1)][_0x1d840a(0x1ab) + 'nt'](_0x174631, _0x1e87bd, _0x40a0f4);
                            }
                        }
                    }
                } else
                    _0x1e2c90 = yield _0x591e3c[_0x1d840a(0x1c1)][_0x1d840a(0x1a8) + 'e'](_0x174631, _0x40bb3e[_0x1d840a(0x1db)], _0x40a0f4);
                const _0x1f4d07 = Object[_0x1d840a(0x203)](Object[_0x1d840a(0x203)](Object[_0x1d840a(0x203)]({}, _0x40bb3e), _0x1e2c90), {
                        'id': _0x40bb3e['id'],
                        'timestamp': _0x2efd1c[_0x1d840a(0x1d5)](_0x1e2c90[_0x1d840a(0x1a7)], -0xd9e + 0xca + 0x10bc),
                        'messageId': _0x1e2c90[_0x1d840a(0x1ce)],
                        'status': _0x2efd1c[_0x1d840a(0x1f5)],
                        'ack': 0x2
                    }), _0x5ee8bb = {};
                _0x5ee8bb['id'] = _0x40bb3e['id'];
                const _0x3b9d13 = {};
                _0x3b9d13[_0x1d840a(0x1a0)] = _0x5ee8bb, yield MessageZPRO_1[_0x1d840a(0x1d8)][_0x1d840a(0x1cd)](Object[_0x1d840a(0x203)]({}, _0x1f4d07), _0x3b9d13), (-0x779 * -0x3 + -0x1d36 + 0x6cb, waposxjtgen_zpro_1[_0x1d840a(0x1d8)])({
                    'tenantId': _0x541747[_0x1d840a(0x1f4)],
                    'type': _0x2efd1c[_0x1d840a(0x1c0)],
                    'payload': Object[_0x1d840a(0x203)](Object[_0x1d840a(0x203)]({}, _0x40bb3e[_0x1d840a(0x1f6)]), {
                        'id': _0x40bb3e['id'],
                        'mediaUrl': _0x40bb3e[_0x1d840a(0x1ea)],
                        'timestamp': _0x1f4d07[_0x1d840a(0x1de)],
                        'messageId': _0x1e2c90[_0x1d840a(0x1ce)],
                        'status': _0x2efd1c[_0x1d840a(0x1f5)],
                        'ack': 0x2
                    })
                }), yield (0xb44 * 0x2 + -0x1ac8 * -0x1 + -0x41c * 0xc, _3a2qcp0_zpro_1[_0x1d840a(0x1d8)])(_0x541747);
            } catch (_0x1bb6cf) {
                const _0x1f72d2 = _0x40bb3e['id'], _0x2082f7 = _0x40bb3e[_0x1d840a(0x20e)]['id'];
                ye0esz516_zpro_1[_0x1d840a(0x207)][_0x1d840a(0x208)](_0x1d840a(0x1ad) + _0x1d840a(0x1a2) + _0x1d840a(0x212) + _0x12be3e + (_0x1d840a(0x1df) + '\x20') + _0x2082f7 + ')'), ye0esz516_zpro_1[_0x1d840a(0x207)][_0x1d840a(0x1e2)](_0x1d840a(0x1f2) + _0x1d840a(0x1bd) + _0x1d840a(0x20b) + _0x1d840a(0x1cc) + _0x1d840a(0x216) + _0x1f72d2 + _0x1d840a(0x1e8) + _0x1bb6cf);
            }
        }
    });
exports[_0xbf5f53(0x1d8)] = SendMessagesSystemWbot;