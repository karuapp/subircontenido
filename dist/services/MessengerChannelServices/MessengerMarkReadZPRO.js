'use strict';
const _0x5bd64a = _0x51f8;
(function (_0x2699f8, _0x280589) {
    const _0x261421 = _0x51f8, _0x1d9056 = _0x2699f8();
    while (!![]) {
        try {
            const _0xecbbed = parseInt(_0x261421(0xe2)) / (-0x2e8 + -0x252d + 0x1 * 0x2816) + -parseInt(_0x261421(0xfc)) / (0x14f9 + -0x1159 * 0x1 + -0x39e) * (parseInt(_0x261421(0xf1)) / (-0x88f + -0x20 * -0x2e + 0x2d2)) + -parseInt(_0x261421(0xf0)) / (0x24 * 0xf9 + -0x29 * -0x77 + -0x360f) * (-parseInt(_0x261421(0xf5)) / (-0x181c + -0x1 * -0x18d + 0x1694)) + parseInt(_0x261421(0xf6)) / (0x946 + 0x25d + -0xb9d) + -parseInt(_0x261421(0x101)) / (0x513 * 0x1 + 0x1fe7 + -0x41b * 0x9) + -parseInt(_0x261421(0xea)) / (-0x19b7 + -0x1914 + 0x32d3) * (-parseInt(_0x261421(0xed)) / (0x6b * 0x56 + -0x1 * 0x595 + 0x795 * -0x4)) + parseInt(_0x261421(0x105)) / (0xdf5 + 0x29 * 0x6d + -0x1f60);
            if (_0xecbbed === _0x280589)
                break;
            else
                _0x1d9056['push'](_0x1d9056['shift']());
        } catch (_0x1a64d6) {
            _0x1d9056['push'](_0x1d9056['shift']());
        }
    }
}(_0x4ed0, 0x251d1 * 0x1 + -0x2cf72 + 0x240b5));
var __awaiter = this && this[_0x5bd64a(0xd4)] || function (_0x18fe08, _0x2237cb, _0x784c90, _0x15fc6d) {
        const _0x2edd46 = _0x5bd64a, _0x152c58 = {
                'ZlmkC': function (_0x5593ab, _0x498b1b) {
                    return _0x5593ab(_0x498b1b);
                },
                'XEvlj': function (_0x10502a, _0x416380) {
                    return _0x10502a instanceof _0x416380;
                },
                'JUNMa': function (_0x491e18, _0x4a092a) {
                    return _0x491e18(_0x4a092a);
                },
                'xDagV': function (_0x3db821, _0x534b67) {
                    return _0x3db821(_0x534b67);
                },
                'uYLsa': _0x2edd46(0xfd),
                'byYNN': function (_0x36fb77, _0x4b024b) {
                    return _0x36fb77(_0x4b024b);
                },
                'Tesof': function (_0x3988a3, _0xc61be) {
                    return _0x3988a3(_0xc61be);
                }
            };
        function _0x1dda19(_0x169566) {
            const _0x4e4593 = _0x2edd46;
            return _0x152c58[_0x4e4593(0xf2)](_0x169566, _0x784c90) ? _0x169566 : new _0x784c90(function (_0x1f2a1b) {
                const _0x512506 = _0x4e4593;
                _0x152c58[_0x512506(0xe9)](_0x1f2a1b, _0x169566);
            });
        }
        return new (_0x784c90 || (_0x784c90 = Promise))(function (_0x1240d6, _0x1f2932) {
            const _0x12a603 = _0x2edd46;
            function _0x43b331(_0x50c83f) {
                const _0x272a69 = _0x51f8;
                try {
                    _0x152c58[_0x272a69(0xe6)](_0x137f05, _0x15fc6d[_0x272a69(0x10e)](_0x50c83f));
                } catch (_0xf51107) {
                    _0x152c58[_0x272a69(0xeb)](_0x1f2932, _0xf51107);
                }
            }
            function _0x5c0f44(_0x2ec838) {
                const _0x44c79b = _0x51f8;
                try {
                    _0x152c58[_0x44c79b(0xeb)](_0x137f05, _0x15fc6d[_0x152c58[_0x44c79b(0x109)]](_0x2ec838));
                } catch (_0x214b20) {
                    _0x152c58[_0x44c79b(0xe9)](_0x1f2932, _0x214b20);
                }
            }
            function _0x137f05(_0x1adec1) {
                const _0x314337 = _0x51f8;
                _0x1adec1[_0x314337(0xfa)] ? _0x152c58[_0x314337(0xf8)](_0x1240d6, _0x1adec1[_0x314337(0xec)]) : _0x152c58[_0x314337(0xd7)](_0x1dda19, _0x1adec1[_0x314337(0xec)])[_0x314337(0xfb)](_0x43b331, _0x5c0f44);
            }
            _0x152c58[_0x12a603(0xf8)](_0x137f05, (_0x15fc6d = _0x15fc6d[_0x12a603(0x10c)](_0x18fe08, _0x2237cb || []))[_0x12a603(0x10e)]());
        });
    }, __importDefault = this && this[_0x5bd64a(0x106) + _0x5bd64a(0xfe)] || function (_0x19e514) {
        const _0x3a2f35 = _0x5bd64a;
        return _0x19e514 && _0x19e514[_0x3a2f35(0x103)] ? _0x19e514 : { 'default': _0x19e514 };
    };
const _0x355eca = {};
function _0x51f8(_0xdc3b19, _0x5606bd) {
    const _0x403e71 = _0x4ed0();
    return _0x51f8 = function (_0x2a223c, _0x2804b9) {
        _0x2a223c = _0x2a223c - (0x699 * -0x4 + -0x22dd + 0x3e15);
        let _0x441337 = _0x403e71[_0x2a223c];
        return _0x441337;
    }, _0x51f8(_0xdc3b19, _0x5606bd);
}
function _0x4ed0() {
    const _0x5085e7 = [
        'chat:ack',
        'ZlmkC',
        '856iBFimO',
        'xDagV',
        'value',
        '9927jOFcxV',
        'assign',
        '../../mode',
        '26088gYmqnS',
        '74238hIMmeW',
        'XEvlj',
        'sender',
        'defineProp',
        '100IAltQo',
        '167958yUPmHy',
        'zpro',
        'byYNN',
        'erty',
        'done',
        'then',
        '10pBnrAz',
        'throw',
        'fault',
        'map',
        'ls/Contact',
        '1212855YDNthV',
        'dataValues',
        '__esModule',
        'mediaUrl',
        '532590lVVMtV',
        '__importDe',
        'ls/TicketZ',
        'read',
        'uYLsa',
        'all',
        'lte',
        'apply',
        '../../ludp',
        'next',
        '__awaiter',
        'default',
        'lnTVO',
        'Tesof',
        'ls/Message',
        'PRO',
        'sequelize',
        'update',
        'findAll',
        'timestamp',
        'messageId',
        'watermark',
        'posxjtgen_',
        'c8_zpro/wa',
        '82758ntONfY',
        'ZPRO',
        'DSRGl',
        'ack',
        'JUNMa',
        'sended'
    ];
    _0x4ed0 = function () {
        return _0x5085e7;
    };
    return _0x4ed0();
}
_0x355eca[_0x5bd64a(0xec)] = !![], Object[_0x5bd64a(0xf4) + _0x5bd64a(0xf9)](exports, _0x5bd64a(0x103), _0x355eca);
const sequelize_1 = require(_0x5bd64a(0xda)), waposxjtgen_zpro_1 = __importDefault(require(_0x5bd64a(0x10d) + _0x5bd64a(0xe1) + _0x5bd64a(0xe0) + _0x5bd64a(0xf7))), ContactZPRO_1 = __importDefault(require(_0x5bd64a(0xef) + _0x5bd64a(0x100) + _0x5bd64a(0xe3))), MessageZPRO_1 = __importDefault(require(_0x5bd64a(0xef) + _0x5bd64a(0xd8) + _0x5bd64a(0xe3))), TicketZPRO_1 = __importDefault(require(_0x5bd64a(0xef) + _0x5bd64a(0x107) + _0x5bd64a(0xd9))), MessengerMarkRead = (_0x304609, _0x367184) => __awaiter(void (-0x1b21 + 0x121e + 0x903), void (-0x1425 + -0x83e + 0x1c63), void (0x1ca4 + 0x2 * 0x4bc + 0x987 * -0x4), function* () {
        const _0x19171d = _0x5bd64a, _0x4ce99e = {};
        _0x4ce99e[_0x19171d(0xe4)] = _0x19171d(0xe8), _0x4ce99e[_0x19171d(0xd6)] = _0x19171d(0xe7);
        const _0x34c53d = _0x4ce99e, _0x426c12 = yield MessageZPRO_1[_0x19171d(0xd5)][_0x19171d(0xdc)]({
                'where': {
                    'tenantId': _0x367184,
                    'createdAt': { [sequelize_1['Op'][_0x19171d(0x10b)]]: new Date(_0x304609[_0x19171d(0x108)][_0x19171d(0xdf)]) },
                    'fromMe': !![],
                    'ack': {
                        [sequelize_1['Op']['in']]: [
                            0xa59 + 0x1 * -0xac1 + 0x69,
                            0x26b6 + -0xc7d + 0x8bd * -0x3
                        ]
                    }
                },
                'include': [{
                        'model': TicketZPRO_1[_0x19171d(0xd5)],
                        'where': { 'tenantId': _0x367184 },
                        'include': [{
                                'model': ContactZPRO_1[_0x19171d(0xd5)],
                                'where': {
                                    'tenantId': _0x367184,
                                    'messengerId': _0x304609[_0x19171d(0xf3)]['id']
                                }
                            }]
                    }]
            });
        yield Promise[_0x19171d(0x10a)](_0x426c12[_0x19171d(0xff)](_0xd72c17 => __awaiter(void (0x283 + 0xfe6 + -0x1269), void (-0x1af + 0x470 + -0x2c1), void (0x1 * -0x1c03 + -0x6 * -0x127 + -0x1eb * -0xb), function* () {
            const _0x491dee = _0x19171d, _0x230fa6 = {};
            _0x230fa6[_0x491dee(0xe5)] = 0x3, yield _0xd72c17[_0x491dee(0xdb)](_0x230fa6), (0x22cb + -0x125c + -0x106f, waposxjtgen_zpro_1[_0x491dee(0xd5)])({
                'tenantId': _0x367184,
                'type': _0x34c53d[_0x491dee(0xe4)],
                'payload': Object[_0x491dee(0xee)](Object[_0x491dee(0xee)]({}, _0xd72c17[_0x491dee(0x102)]), {
                    'mediaUrl': _0xd72c17[_0x491dee(0x104)],
                    'id': _0xd72c17['id'],
                    'timestamp': _0xd72c17[_0x491dee(0xdd)],
                    'messageId': _0xd72c17[_0x491dee(0xde)],
                    'status': _0x34c53d[_0x491dee(0xd6)],
                    'ack': 0x3
                })
            });
        })));
    });
exports[_0x5bd64a(0xd5)] = MessengerMarkRead;