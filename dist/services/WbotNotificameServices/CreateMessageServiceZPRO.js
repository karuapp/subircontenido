'use strict';
const _0x599bbb = _0x42e9;
(function (_0x3a6000, _0x19580b) {
    const _0x5a9bae = _0x42e9, _0x1d29de = _0x3a6000();
    while (!![]) {
        try {
            const _0x17cb6c = parseInt(_0x5a9bae(0xf3)) / (0x740 + -0x2252 + 0x1b13) * (-parseInt(_0x5a9bae(0xcc)) / (0x1 * 0x87d + 0x1 * -0x253 + 0x314 * -0x2)) + parseInt(_0x5a9bae(0xbc)) / (-0x1cd7 + -0x1595 + -0x1 * -0x326f) * (-parseInt(_0x5a9bae(0xe0)) / (-0x77 + 0x8ed * -0x2 + 0x1255)) + -parseInt(_0x5a9bae(0x118)) / (0x6 * -0x2c6 + 0x25ba + -0x1511) * (parseInt(_0x5a9bae(0x108)) / (-0x59f * -0x1 + -0x1dc5 * -0x1 + -0x235e)) + -parseInt(_0x5a9bae(0xfe)) / (0x2 * -0x108d + -0x391 + 0x24b2) * (-parseInt(_0x5a9bae(0x121)) / (0x2f5 * 0xb + -0x254d + 0x4ce)) + -parseInt(_0x5a9bae(0xb4)) / (-0xe1a + 0x7ed * -0x4 + 0x2dd7 * 0x1) * (parseInt(_0x5a9bae(0x102)) / (0x1b10 + 0x1 * 0x262d + -0x4133)) + -parseInt(_0x5a9bae(0x115)) / (0x16a7 + 0x1 * 0xfef + -0x268b) * (parseInt(_0x5a9bae(0xec)) / (0x15dd + -0x4d3 + 0x366 * -0x5)) + parseInt(_0x5a9bae(0xd9)) / (0x951 + 0x2 * 0x656 + -0x15f0) * (parseInt(_0x5a9bae(0x11c)) / (-0x25e1 * -0x1 + -0x85d * 0x2 + -0x1519));
            if (_0x17cb6c === _0x19580b)
                break;
            else
                _0x1d29de['push'](_0x1d29de['shift']());
        } catch (_0x5413a7) {
            _0x1d29de['push'](_0x1d29de['shift']());
        }
    }
}(_0x24e2, 0x5ffbd + 0x1956 + 0x23658));
var __awaiter = this && this[_0x599bbb(0xe4)] || function (_0x52adf, _0x204f42, _0x35db25, _0x25444f) {
        const _0x38d6d8 = _0x599bbb, _0x442d01 = {
                'oyHav': function (_0x1c1f37, _0x2f3947) {
                    return _0x1c1f37(_0x2f3947);
                },
                'ZSQQW': function (_0x593d70, _0x3425db) {
                    return _0x593d70 instanceof _0x3425db;
                },
                'yfZRG': function (_0xd7a2e0, _0x1c1e85) {
                    return _0xd7a2e0(_0x1c1e85);
                },
                'QcceM': _0x38d6d8(0xf9),
                'Bezec': function (_0x46dab5, _0x1c3d45) {
                    return _0x46dab5(_0x1c3d45);
                },
                'stECN': function (_0x401997, _0x141910) {
                    return _0x401997(_0x141910);
                },
                'IDNyO': function (_0x19c3a2, _0x14189c) {
                    return _0x19c3a2(_0x14189c);
                },
                'CtCcP': function (_0x5d0f13, _0xa3d7fc) {
                    return _0x5d0f13(_0xa3d7fc);
                }
            };
        function _0x405f11(_0x226fbf) {
            const _0x1d2fa8 = _0x38d6d8;
            return _0x442d01[_0x1d2fa8(0xac)](_0x226fbf, _0x35db25) ? _0x226fbf : new _0x35db25(function (_0x56e9c9) {
                const _0x59f75e = _0x1d2fa8;
                _0x442d01[_0x59f75e(0xfc)](_0x56e9c9, _0x226fbf);
            });
        }
        return new (_0x35db25 || (_0x35db25 = Promise))(function (_0x541034, _0x56d11d) {
            const _0x1bf4e7 = _0x38d6d8, _0x423fd1 = {
                    'OWsVt': function (_0x33cd5e, _0x47a84d) {
                        const _0x16459b = _0x42e9;
                        return _0x442d01[_0x16459b(0xfc)](_0x33cd5e, _0x47a84d);
                    },
                    'jHulW': function (_0x52542e, _0x54841c) {
                        const _0x40bff6 = _0x42e9;
                        return _0x442d01[_0x40bff6(0x111)](_0x52542e, _0x54841c);
                    }
                };
            function _0x127872(_0x24fc56) {
                const _0x382492 = _0x42e9;
                try {
                    _0x423fd1[_0x382492(0xbe)](_0x4d0799, _0x25444f[_0x382492(0xd1)](_0x24fc56));
                } catch (_0xaee5ea) {
                    _0x423fd1[_0x382492(0xda)](_0x56d11d, _0xaee5ea);
                }
            }
            function _0x886cc5(_0x48d845) {
                const _0x4da037 = _0x42e9;
                try {
                    _0x442d01[_0x4da037(0xb6)](_0x4d0799, _0x25444f[_0x442d01[_0x4da037(0xe3)]](_0x48d845));
                } catch (_0x58a8a2) {
                    _0x442d01[_0x4da037(0xc0)](_0x56d11d, _0x58a8a2);
                }
            }
            function _0x4d0799(_0x1279a5) {
                const _0x318109 = _0x42e9;
                _0x1279a5[_0x318109(0x105)] ? _0x442d01[_0x318109(0x101)](_0x541034, _0x1279a5[_0x318109(0xdb)]) : _0x442d01[_0x318109(0xe8)](_0x405f11, _0x1279a5[_0x318109(0xdb)])[_0x318109(0xe6)](_0x127872, _0x886cc5);
            }
            _0x442d01[_0x1bf4e7(0xb6)](_0x4d0799, (_0x25444f = _0x25444f[_0x1bf4e7(0x11a)](_0x52adf, _0x204f42 || []))[_0x1bf4e7(0xd1)]());
        });
    }, __importDefault = this && this[_0x599bbb(0xcb) + _0x599bbb(0xc1)] || function (_0x519f1c) {
        const _0x48193b = _0x599bbb;
        return _0x519f1c && _0x519f1c[_0x48193b(0xc2)] ? _0x519f1c : { 'default': _0x519f1c };
    };
const _0x3b6ea7 = {};
_0x3b6ea7[_0x599bbb(0xdb)] = !![], Object[_0x599bbb(0xed) + _0x599bbb(0xc8)](exports, _0x599bbb(0xc2), _0x3b6ea7);
const MessageZPRO_1 = __importDefault(require(_0x599bbb(0xc5) + _0x599bbb(0xe7) + _0x599bbb(0x117))), ye0esz516_zpro_1 = require(_0x599bbb(0xad) + _0x599bbb(0x119) + _0x599bbb(0xf2) + _0x599bbb(0xcf)), waposxjtgen_zpro_1 = __importDefault(require(_0x599bbb(0x128) + _0x599bbb(0xee) + _0x599bbb(0xe2) + _0x599bbb(0xeb))), uuid_1 = require(_0x599bbb(0xba)), TicketZPRO_1 = __importDefault(require(_0x599bbb(0xc5) + _0x599bbb(0x126) + _0x599bbb(0x125))), UserZPRO_1 = __importDefault(require(_0x599bbb(0xc5) + _0x599bbb(0x10c) + 'O')), ContactZPRO_1 = __importDefault(require(_0x599bbb(0xc5) + _0x599bbb(0xf7) + _0x599bbb(0x117))), CreateMessageService = _0x4f2512 => __awaiter(void (0x4 * 0x778 + 0x3fc + -0x21dc), void (0x5d8 * 0x4 + 0x23d6 + -0x3b36), void (-0x1 * 0x20f1 + -0x431 + -0x1 * -0x2522), function* () {
        const _0x2d3329 = _0x599bbb, _0x327de5 = {};
        _0x327de5[_0x2d3329(0x104)] = _0x2d3329(0xd2) + _0x2d3329(0xb7) + _0x2d3329(0xca) + _0x2d3329(0xf6), _0x327de5[_0x2d3329(0xf4)] = _0x2d3329(0xd2) + _0x2d3329(0xb7) + _0x2d3329(0xca) + _0x2d3329(0x120) + _0x2d3329(0xdd), _0x327de5[_0x2d3329(0xbb)] = function (_0x1d695c, _0x5c260f) {
            return _0x1d695c === _0x5c260f;
        }, _0x327de5[_0x2d3329(0x107)] = function (_0x33ae99, _0x552482) {
            return _0x33ae99 === _0x552482;
        }, _0x327de5[_0x2d3329(0xdf)] = _0x2d3329(0xf0), _0x327de5[_0x2d3329(0x103)] = function (_0x706a74, _0x5938c7) {
            return _0x706a74 === _0x5938c7;
        }, _0x327de5[_0x2d3329(0xce)] = _0x2d3329(0xc3), _0x327de5[_0x2d3329(0x106)] = _0x2d3329(0xbf), _0x327de5[_0x2d3329(0x10f)] = _0x2d3329(0xef), _0x327de5[_0x2d3329(0xae)] = _0x2d3329(0xb8), _0x327de5[_0x2d3329(0x113)] = _0x2d3329(0xd3), _0x327de5[_0x2d3329(0xd8)] = _0x2d3329(0x109), _0x327de5[_0x2d3329(0x123)] = _0x2d3329(0xf1), _0x327de5[_0x2d3329(0xd5)] = function (_0x28dc6b, _0x19731c) {
            return _0x28dc6b >= _0x19731c;
        }, _0x327de5[_0x2d3329(0xdc)] = function (_0x325e31, _0x23bad2) {
            return _0x325e31 === _0x23bad2;
        }, _0x327de5[_0x2d3329(0xfd)] = _0x2d3329(0x127), _0x327de5[_0x2d3329(0x116)] = _0x2d3329(0xc9) + _0x2d3329(0xb3) + _0x2d3329(0x129), _0x327de5[_0x2d3329(0x11d)] = function (_0x479de6, _0xeb70e3) {
            return _0x479de6 === _0xeb70e3;
        }, _0x327de5[_0x2d3329(0xb9)] = function (_0x1bd8fd, _0x1df9de) {
            return _0x1bd8fd === _0x1df9de;
        }, _0x327de5[_0x2d3329(0x10a)] = _0x2d3329(0x122) + 'e', _0x327de5[_0x2d3329(0xaf)] = function (_0x13a33c, _0x53e1ff) {
            return _0x13a33c + _0x53e1ff;
        }, _0x327de5[_0x2d3329(0xe5)] = _0x2d3329(0xd2) + _0x2d3329(0xb7) + _0x2d3329(0x11e);
        const _0x5d3a8b = _0x327de5;
        var _0x2dd17d, _0x177821;
        ye0esz516_zpro_1[_0x2d3329(0xb2)][_0x2d3329(0xb0)](_0x5d3a8b[_0x2d3329(0x104)]);
        const _0x231b6c = {};
        _0x231b6c[_0x2d3329(0x11f)] = _0x4f2512['id'], _0x231b6c[_0x2d3329(0xde)] = _0x4f2512[_0x2d3329(0xde)];
        const _0x2da49a = {};
        _0x2da49a[_0x2d3329(0xfa)] = _0x231b6c;
        const _0x1af940 = yield MessageZPRO_1[_0x2d3329(0x10b)][_0x2d3329(0x11b)](_0x2da49a);
        if (_0x1af940) {
            ye0esz516_zpro_1[_0x2d3329(0xb2)][_0x2d3329(0xb0)](_0x5d3a8b[_0x2d3329(0xf4)]);
            return;
        }
        const {
            id: _0x1a08c7,
            contactId: _0x31f5bf,
            body: _0x6c1e,
            ticketId: _0x2bd4fa,
            fromMe: _0x57a366,
            tenantId: _0x41ccef,
            fileName: _0x47d54b,
            mediaType: _0x5231e4,
            originalName: _0x2a2c81,
            scheduleDate: _0x386209,
            ack: _0x24f5a3,
            userId: _0x4a0525
        } = _0x4f2512;
        if ((!_0x6c1e || _0x5d3a8b[_0x2d3329(0xbb)](_0x6c1e, '')) && (!_0x47d54b || _0x5d3a8b[_0x2d3329(0x107)](_0x47d54b, '')))
            return;
        const _0x2456ec = (0x79b + -0x126 * -0x8 + -0x1 * 0x10cb, uuid_1['v4'])(), _0x10a091 = {};
        _0x10a091[_0x2d3329(0xbd)] = _0x31f5bf, _0x10a091[_0x2d3329(0xe9)] = _0x6c1e, _0x10a091[_0x2d3329(0xc6)] = _0x2bd4fa, _0x10a091[_0x2d3329(0xe1)] = _0x57a366, _0x10a091[_0x2d3329(0xde)] = _0x41ccef, _0x10a091[_0x2d3329(0x11f)] = _0x1a08c7, _0x10a091[_0x2d3329(0xd0)] = 0x2, _0x10a091[_0x2d3329(0xff)] = _0x5d3a8b[_0x2d3329(0xdf)], _0x10a091[_0x2d3329(0x10d)] = _0x2456ec, _0x10a091[_0x2d3329(0xf8)] = ![], _0x10a091[_0x2d3329(0x112) + 'te'] = _0x386209, _0x10a091[_0x2d3329(0x110)] = _0x4a0525;
        const _0x19ac68 = _0x10a091;
        _0x47d54b && (_0x19ac68[_0x2d3329(0xd7)] = _0x47d54b, _0x19ac68[_0x2d3329(0x124)] = _0x5d3a8b[_0x2d3329(0x103)](_0x5231e4, _0x5d3a8b[_0x2d3329(0xce)]) ? _0x5d3a8b[_0x2d3329(0x106)] : _0x5231e4);
        try {
            const _0x30348c = yield MessageZPRO_1[_0x2d3329(0x10b)][_0x2d3329(0x100)](_0x19ac68), _0x38cc92 = {};
            _0x38cc92[_0x2d3329(0xde)] = _0x41ccef;
            const _0xf7a0d4 = {};
            _0xf7a0d4[_0x2d3329(0xfb)] = TicketZPRO_1[_0x2d3329(0x10b)], _0xf7a0d4['as'] = _0x5d3a8b[_0x2d3329(0x10f)], _0xf7a0d4[_0x2d3329(0xfa)] = _0x38cc92, _0xf7a0d4[_0x2d3329(0xd6)] = [_0x5d3a8b[_0x2d3329(0xae)]];
            const _0x1e1fec = yield MessageZPRO_1[_0x2d3329(0x10b)][_0x2d3329(0x114)](_0x30348c['id'], {
                'include': [
                    _0xf7a0d4,
                    {
                        'model': MessageZPRO_1[_0x2d3329(0x10b)],
                        'as': _0x5d3a8b[_0x2d3329(0x113)],
                        'include': [_0x5d3a8b[_0x2d3329(0xae)]]
                    },
                    {
                        'model': UserZPRO_1[_0x2d3329(0x10b)],
                        'as': _0x5d3a8b[_0x2d3329(0xd8)],
                        'attributes': [
                            'id',
                            _0x5d3a8b[_0x2d3329(0x123)]
                        ]
                    },
                    {
                        'model': ContactZPRO_1[_0x2d3329(0x10b)],
                        'as': _0x5d3a8b[_0x2d3329(0xae)],
                        'attributes': [
                            'id',
                            _0x5d3a8b[_0x2d3329(0x123)]
                        ]
                    }
                ]
            });
            if (_0x1e1fec)
                try {
                    yield _0x1e1fec[_0x2d3329(0xef)][_0x2d3329(0xb5)]({
                        'lastMessageAt': _0x5d3a8b[_0x2d3329(0xd5)](_0x5d3a8b[_0x2d3329(0x107)](_0x2dd17d = _0x1e1fec[_0x2d3329(0x10e)], null) || _0x5d3a8b[_0x2d3329(0xdc)](_0x2dd17d, void (-0x1a0c + -0x2621 * 0x1 + 0x402d)) ? void (0x13 * -0x55 + -0x238d * -0x1 + -0xc5 * 0x26) : _0x2dd17d[_0x2d3329(0xea)]()[_0x2d3329(0xc7)], 0x4 * -0xce + 0x1 * 0x9e9 + -0x6a4) ? _0x1e1fec[_0x2d3329(0x10e)] : new Date()[_0x2d3329(0xb1)](),
                        'lastMessageReceived': _0x1e1fec[_0x2d3329(0xe1)] ? null : new Date()[_0x2d3329(0xb1)]()
                    });
                } catch (_0x1053d5) {
                    console[_0x2d3329(0xcd)](_0x5d3a8b[_0x2d3329(0xfd)], _0x1053d5);
                }
            if (!_0x1e1fec)
                throw new Error(_0x5d3a8b[_0x2d3329(0x116)]);
            _0x1e1fec[_0x2d3329(0xe1)] && (yield TicketZPRO_1[_0x2d3329(0x10b)][_0x2d3329(0xb5)]({ 'lastMessageReceived': _0x5d3a8b[_0x2d3329(0xd5)](_0x5d3a8b[_0x2d3329(0x11d)](_0x177821 = _0x1e1fec[_0x2d3329(0x10e)], null) || _0x5d3a8b[_0x2d3329(0xb9)](_0x177821, void (0x1ad5 + -0x4f2 * 0x1 + -0x15e3)) ? void (-0x1 * 0xf76 + -0x9a9 * 0x1 + -0x6d * -0x3b) : _0x177821[_0x2d3329(0xea)]()[_0x2d3329(0xc7)], 0x1cfc + -0xc89 + -0x1066) ? _0x1e1fec[_0x2d3329(0x10e)] : new Date()[_0x2d3329(0xb1)]() }, { 'where': { 'id': _0x1e1fec[_0x2d3329(0xc6)] } }));
            const _0x3dc97a = {};
            return _0x3dc97a[_0x2d3329(0xde)] = _0x41ccef, _0x3dc97a[_0x2d3329(0xf5)] = _0x5d3a8b[_0x2d3329(0x10a)], _0x3dc97a[_0x2d3329(0xc4)] = _0x1e1fec, (0x5e8 + 0x12fc + -0x18e4, waposxjtgen_zpro_1[_0x2d3329(0x10b)])(_0x3dc97a), _0x30348c;
        } catch (_0x27244b) {
            ye0esz516_zpro_1[_0x2d3329(0xb2)][_0x2d3329(0xd4)](_0x5d3a8b[_0x2d3329(0xaf)](_0x5d3a8b[_0x2d3329(0xe5)], _0x27244b));
        }
    });
function _0x42e9(_0x59dfd6, _0x4b4433) {
    const _0x19859d = _0x24e2();
    return _0x42e9 = function (_0x5d0155, _0x5a1767) {
        _0x5d0155 = _0x5d0155 - (0x164 + -0x1ae8 * 0x1 + 0x1a30);
        let _0x59f265 = _0x19859d[_0x5d0155];
        return _0x59f265;
    }, _0x42e9(_0x59dfd6, _0x4b4433);
}
exports[_0x599bbb(0x10b)] = CreateMessageService;
function _0x24e2() {
    const _0x37b130 = [
        'toString',
        'zpro',
        '720Ktkccp',
        'defineProp',
        'c8_zpro/wa',
        'ticket',
        'sended',
        'name',
        '/ye0esz516',
        '153562yvRlNn',
        'pcqmb',
        'type',
        '\x20message\x20',
        'ls/Contact',
        'read',
        'throw',
        'where',
        'model',
        'oyHav',
        'nsclM',
        '7JaBVmS',
        'status',
        'create',
        'stECN',
        '20DBviUn',
        'psdHv',
        'PHlrP',
        'done',
        'yoYTp',
        'joNTm',
        '4504266EefMYy',
        'user',
        'ITSPn',
        'default',
        'ls/UserZPR',
        'idFront',
        'timestamp',
        'vblgv',
        'userId',
        'CtCcP',
        'scheduleDa',
        'VoIBM',
        'findByPk',
        '59279gqwOTs',
        'rfgut',
        'ZPRO',
        '5WQvvrx',
        '3s0z5_zpro',
        'apply',
        'findOne',
        '28rlWhdP',
        'xxTcO',
        ':\x20e8',
        'messageId',
        '\x20message\x20e',
        '2928552RRFvZC',
        'chat:creat',
        'FqvwT',
        'mediaType',
        'PRO',
        'ls/TicketZ',
        'error',
        '../../ludp',
        '_SYSTEM\x202',
        'ZSQQW',
        '../../xwsp',
        'HzNFk',
        'EKyDN',
        'info',
        'getTime',
        'logger',
        'NG_MESSAGE',
        '3508308hlVQfZ',
        'update',
        'yfZRG',
        ':::\x20WhaTitan\x20::',
        'contact',
        'lnUoi',
        'uuid',
        'QOFJj',
        '3LclHOE',
        'contactId',
        'OWsVt',
        'image',
        'Bezec',
        'fault',
        '__esModule',
        'photo',
        'payload',
        '../../mode',
        'ticketId',
        'length',
        'erty',
        'ERR_CREATI',
        ':\x20Creating',
        '__importDe',
        '2bcVCmP',
        'log',
        'mHbbk',
        '_zpro',
        'ack',
        'next',
        ':::\x20WhaTitan\x20',
        'quotedMsg',
        'warn',
        'lhBgZ',
        'include',
        'mediaUrl',
        'IKgVB',
        '20699926qtqYXs',
        'jHulW',
        'value',
        'fWqTW',
        'xists',
        'tenantId',
        'jfpxw',
        '3995268KFaaGN',
        'fromMe',
        'posxjtgen_',
        'QcceM',
        '__awaiter',
        'sWOHC',
        'then',
        'ls/Message',
        'IDNyO',
        'body'
    ];
    _0x24e2 = function () {
        return _0x37b130;
    };
    return _0x24e2();
}