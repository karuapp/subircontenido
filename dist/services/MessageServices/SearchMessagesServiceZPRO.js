'use strict';
function _0x581e() {
    const _0x595757 = [
        'userId',
        'xcajG',
        '../../mode',
        'body',
        'findAndCou',
        'RgpwA',
        '68249MdogEO',
        'include',
        '../../dmkb',
        'Admin',
        'findOne',
        'trOPh',
        '34nKssRt',
        'then',
        'PRO',
        'defineProp',
        'ls/Setting',
        'ls/Message',
        'PSegJ',
        'sequelize',
        'XAgOs',
        'user',
        'ftHaN',
        'ntAll',
        'NotViewAss',
        'PCykq',
        '5051268yLxSvm',
        '144hLHuBC',
        'xPWYP',
        'limit',
        'ERR_NO_SEA',
        'ticket',
        'cIHnN',
        'mxx_zpro',
        'key',
        'YJsCz',
        'model',
        '5ePGOxq',
        'super',
        'supervisor',
        'rNZMp',
        'D_TENANT_I',
        'MwmbW',
        'soagW',
        'ro/0yv1ei6',
        'ZPRO',
        'fault',
        'ERR_INVALI',
        'UKEEm',
        'toISOStrin',
        '3GvDAVo',
        'ls/TicketZ',
        'attributes',
        'RCH_TERM_P',
        'kqzNV',
        'admin',
        '6220764obBoAL',
        'gimvd',
        'next',
        'kfMCz',
        '__awaiter',
        '152887EBLeLZ',
        'mZkWq',
        'HKjZT',
        'kwVVm',
        'offset',
        '108860NFQBFr',
        'gulYv',
        'order',
        'done',
        'value',
        'apply',
        'ls/TenantZ',
        'iLike',
        'BfPWF',
        'where',
        'ROVIDED',
        '__esModule',
        'YVHjH',
        'erty',
        '14509683UGcZUz',
        'MDULs',
        'ignedTicke',
        'gsd6i9a_zp',
        'AvdeG',
        'default',
        'length',
        'emYFX',
        'cqtkk',
        'KivtA',
        'required',
        'throw',
        'map',
        '1364QnjMpU',
        'tenantId',
        'enabled',
        'disabled',
        'createdAt',
        'moKQe',
        '__importDe',
        '1474938PbqGVp',
        'Kayqd',
        'DESC'
    ];
    _0x581e = function () {
        return _0x595757;
    };
    return _0x581e();
}
const _0x45b4b7 = _0x37be;
(function (_0x3a5483, _0x5983dc) {
    const _0xfa5681 = _0x37be, _0x19d4b5 = _0x3a5483();
    while (!![]) {
        try {
            const _0x27047c = parseInt(_0xfa5681(0x21a)) / (-0x1f09 + 0x226e * 0x1 + -0x364) * (-parseInt(_0xfa5681(0x220)) / (0x61 * 0x23 + -0x1fee + 0x7 * 0x2ab)) + -parseInt(_0xfa5681(0x1df)) / (0xf * 0x25 + -0x1b75 + 0x17d * 0x11) * (parseInt(_0xfa5681(0x22e)) / (-0xd * 0x274 + 0xc0c + 0x13dc)) + parseInt(_0xfa5681(0x239)) / (-0x6 * 0x24 + -0x177a * -0x1 + -0x169d) * (parseInt(_0xfa5681(0x211)) / (0x31 * -0xc9 + -0x25e2 + 0x4c61)) + parseInt(_0xfa5681(0x1ea)) / (-0xd * 0xd + -0x1768 + 0x1818) * (-parseInt(_0xfa5681(0x22f)) / (0x4f * -0x31 + -0x1b2 * 0x9 + 0x2d * 0xad)) + parseInt(_0xfa5681(0x1fd)) / (0x1d15 * -0x1 + -0x46c * 0x8 + -0x4f6 * -0xd) + parseInt(_0xfa5681(0x1ef)) / (0x1264 + 0x1 * -0x1185 + -0x47 * 0x3) * (parseInt(_0xfa5681(0x20a)) / (0x15a * 0x11 + -0x1508 + -0x1e7)) + parseInt(_0xfa5681(0x1e5)) / (0x1cc2 + -0x5e * 0x5e + 0x5ce * 0x1);
            if (_0x27047c === _0x5983dc)
                break;
            else
                _0x19d4b5['push'](_0x19d4b5['shift']());
        } catch (_0x5c7749) {
            _0x19d4b5['push'](_0x19d4b5['shift']());
        }
    }
}(_0x581e, -0x845ba * 0x3 + 0x1 * -0x51536 + -0x1 * -0x2bc967));
var __awaiter = this && this[_0x45b4b7(0x1e9)] || function (_0x2869d5, _0x1cf3c7, _0x14bbb4, _0x44206d) {
        const _0x271898 = _0x45b4b7, _0x43ccc7 = {
                'MDULs': function (_0xa001b0, _0x267f0b) {
                    return _0xa001b0(_0x267f0b);
                },
                'xcajG': function (_0x4c60d0, _0x2c643e) {
                    return _0x4c60d0 instanceof _0x2c643e;
                },
                'MwmbW': _0x271898(0x208),
                'KivtA': function (_0x20d98d, _0x4ef543) {
                    return _0x20d98d(_0x4ef543);
                },
                'xPWYP': function (_0x473da7, _0x35c010) {
                    return _0x473da7(_0x35c010);
                },
                'Kayqd': function (_0x24f1dd, _0x1a6329) {
                    return _0x24f1dd(_0x1a6329);
                }
            };
        function _0x401032(_0x5e25cd) {
            const _0x3f9a12 = _0x271898;
            return _0x43ccc7[_0x3f9a12(0x215)](_0x5e25cd, _0x14bbb4) ? _0x5e25cd : new _0x14bbb4(function (_0xa9c471) {
                const _0x34eb60 = _0x3f9a12;
                _0x43ccc7[_0x34eb60(0x1fe)](_0xa9c471, _0x5e25cd);
            });
        }
        return new (_0x14bbb4 || (_0x14bbb4 = Promise))(function (_0x2ef825, _0x41730b) {
            const _0x58d630 = _0x271898, _0x5e5962 = {
                    'PSegJ': function (_0x5d37b0, _0x5d9363) {
                        const _0x242854 = _0x37be;
                        return _0x43ccc7[_0x242854(0x1fe)](_0x5d37b0, _0x5d9363);
                    },
                    'moKQe': function (_0x5405c7, _0x3e22dc) {
                        const _0x34c2bb = _0x37be;
                        return _0x43ccc7[_0x34c2bb(0x206)](_0x5405c7, _0x3e22dc);
                    },
                    'trOPh': function (_0x1f188b, _0x1890cc) {
                        const _0x5eb9ba = _0x37be;
                        return _0x43ccc7[_0x5eb9ba(0x230)](_0x1f188b, _0x1890cc);
                    }
                };
            function _0x5b5b34(_0x2d6658) {
                const _0x133f43 = _0x37be;
                try {
                    _0x5e5962[_0x133f43(0x226)](_0x26f162, _0x44206d[_0x133f43(0x1e7)](_0x2d6658));
                } catch (_0x4a1091) {
                    _0x5e5962[_0x133f43(0x20f)](_0x41730b, _0x4a1091);
                }
            }
            function _0x4db0b4(_0x8140ba) {
                const _0x538508 = _0x37be;
                try {
                    _0x43ccc7[_0x538508(0x1fe)](_0x26f162, _0x44206d[_0x43ccc7[_0x538508(0x1d7)]](_0x8140ba));
                } catch (_0x3456ec) {
                    _0x43ccc7[_0x538508(0x1fe)](_0x41730b, _0x3456ec);
                }
            }
            function _0x26f162(_0x220f96) {
                const _0x5a9b23 = _0x37be;
                _0x220f96[_0x5a9b23(0x1f2)] ? _0x5e5962[_0x5a9b23(0x20f)](_0x2ef825, _0x220f96[_0x5a9b23(0x1f3)]) : _0x5e5962[_0x5a9b23(0x21f)](_0x401032, _0x220f96[_0x5a9b23(0x1f3)])[_0x5a9b23(0x221)](_0x5b5b34, _0x4db0b4);
            }
            _0x43ccc7[_0x58d630(0x212)](_0x26f162, (_0x44206d = _0x44206d[_0x58d630(0x1f4)](_0x2869d5, _0x1cf3c7 || []))[_0x58d630(0x1e7)]());
        });
    }, __importDefault = this && this[_0x45b4b7(0x210) + _0x45b4b7(0x1db)] || function (_0x6ad36) {
        const _0x30ca40 = _0x45b4b7;
        return _0x6ad36 && _0x6ad36[_0x30ca40(0x1fa)] ? _0x6ad36 : { 'default': _0x6ad36 };
    };
const _0x275eaa = {};
_0x275eaa[_0x45b4b7(0x1f3)] = !![], Object[_0x45b4b7(0x223) + _0x45b4b7(0x1fc)](exports, _0x45b4b7(0x1fa), _0x275eaa);
const _0yv1ei6mxx_zpro_1 = __importDefault(require(_0x45b4b7(0x21c) + _0x45b4b7(0x200) + _0x45b4b7(0x1d9) + _0x45b4b7(0x235))), MessageZPRO_1 = __importDefault(require(_0x45b4b7(0x216) + _0x45b4b7(0x225) + _0x45b4b7(0x1da))), TicketZPRO_1 = __importDefault(require(_0x45b4b7(0x216) + _0x45b4b7(0x1e0) + _0x45b4b7(0x222))), SettingZPRO_1 = __importDefault(require(_0x45b4b7(0x216) + _0x45b4b7(0x224) + _0x45b4b7(0x1da))), TenantZPRO_1 = __importDefault(require(_0x45b4b7(0x216) + _0x45b4b7(0x1f5) + _0x45b4b7(0x222))), sequelize_1 = require(_0x45b4b7(0x227)), SearchMessagesService = ({
        searchTerm: _0xe128d6,
        tenantId: _0x491cb1,
        pageNumber: pageNumber = '1',
        userId: _0xce40db,
        profile: _0x5031ae
    }) => __awaiter(void (0x25d1 + 0x105d * -0x2 + -0x517), void (0x1 * -0xc81 + 0x259 * 0xb + -0x1f * 0x6e), void (0x115 + -0x3d * -0x4b + -0x4 * 0x4bd), function* () {
        const _0x4ed81c = _0x45b4b7, _0x128131 = {
                'YJsCz': _0x4ed81c(0x232) + _0x4ed81c(0x1e2) + _0x4ed81c(0x1f9),
                'gimvd': function (_0x3cd20b, _0x295b62) {
                    return _0x3cd20b * _0x295b62;
                },
                'soagW': function (_0x3e19d2, _0x14aaa0) {
                    return _0x3e19d2 - _0x14aaa0;
                },
                'YVHjH': function (_0x7c28f9, _0x434d17, _0x16d301) {
                    return _0x7c28f9(_0x434d17, _0x16d301);
                },
                'kfMCz': function (_0x3fbd9d, _0x5a726b) {
                    return _0x3fbd9d(_0x5a726b);
                },
                'AvdeG': _0x4ed81c(0x1dc) + _0x4ed81c(0x23d) + 'D',
                'PCykq': _0x4ed81c(0x23b) + _0x4ed81c(0x21d),
                'cqtkk': _0x4ed81c(0x22c) + _0x4ed81c(0x1ff) + 'ts',
                'kwVVm': function (_0x2d054d, _0x225969) {
                    return _0x2d054d === _0x225969;
                },
                'ftHaN': function (_0x5249b5, _0x345922) {
                    return _0x5249b5 === _0x345922;
                },
                'kqzNV': _0x4ed81c(0x20c),
                'RgpwA': _0x4ed81c(0x1e4),
                'HKjZT': function (_0x161801, _0x24c854) {
                    return _0x161801 === _0x24c854;
                },
                'XAgOs': _0x4ed81c(0x23a),
                'cIHnN': function (_0x1b7f81, _0x57f057) {
                    return _0x1b7f81 === _0x57f057;
                },
                'UKEEm': _0x4ed81c(0x20d),
                'gulYv': _0x4ed81c(0x229),
                'BfPWF': _0x4ed81c(0x20e),
                'rNZMp': _0x4ed81c(0x213),
                'mZkWq': function (_0x59b0c0, _0x5c7b63) {
                    return _0x59b0c0 > _0x5c7b63;
                },
                'emYFX': function (_0x294dab, _0x4bfec4) {
                    return _0x294dab + _0x4bfec4;
                }
            };
        if (!_0xe128d6)
            throw new _0yv1ei6mxx_zpro_1[(_0x4ed81c(0x202))](_0x128131[_0x4ed81c(0x237)], 0x6e9 + 0x1cec + 0x1f * -0x11b);
        const _0x3f77a2 = -0x3ef * 0x1 + 0x1 * -0x242f + 0x1 * 0x2821, _0x3553b1 = _0x128131[_0x4ed81c(0x1e6)](_0x3f77a2, _0x128131[_0x4ed81c(0x1d8)](_0x128131[_0x4ed81c(0x1fb)](parseInt, pageNumber, -0x13c9 * 0x1 + -0x2 * 0xefb + -0x1 * -0x31c9), 0x1b1f + 0x15ba + -0x30d8)), _0x5c21a9 = _0x128131[_0x4ed81c(0x1fb)](parseInt, _0x491cb1, -0x623 * -0x1 + -0x96a * -0x3 + -0x2257);
        if (_0x128131[_0x4ed81c(0x1e8)](isNaN, _0x5c21a9))
            throw new _0yv1ei6mxx_zpro_1[(_0x4ed81c(0x202))](_0x128131[_0x4ed81c(0x201)], 0x1908 + 0x19 * 0xf1 + 0x7 * -0x6b7);
        const _0x386dfd = {};
        _0x386dfd['id'] = _0x5c21a9;
        const _0x53ca85 = {};
        _0x53ca85[_0x4ed81c(0x1f8)] = _0x386dfd, _0x53ca85[_0x4ed81c(0x1e1)] = [_0x128131[_0x4ed81c(0x22d)]];
        const _0x4ac5d6 = yield TenantZPRO_1[_0x4ed81c(0x202)][_0x4ed81c(0x21e)](_0x53ca85), _0x512020 = {};
        _0x512020[_0x4ed81c(0x20b)] = _0x5c21a9, _0x512020[_0x4ed81c(0x236)] = _0x128131[_0x4ed81c(0x205)];
        const _0x17ceaf = {};
        _0x17ceaf[_0x4ed81c(0x1f8)] = _0x512020;
        const _0xff765e = yield SettingZPRO_1[_0x4ed81c(0x202)][_0x4ed81c(0x21e)](_0x17ceaf), _0x53e311 = _0x128131[_0x4ed81c(0x1ed)](_0x128131[_0x4ed81c(0x1ed)](_0xff765e, null) || _0x128131[_0x4ed81c(0x22a)](_0xff765e, void (-0x1eb * -0x1 + 0xb9b + -0xd86 * 0x1)) ? void (-0x232e + 0x3eb + 0x1f43) : _0xff765e[_0x4ed81c(0x1f3)], _0x128131[_0x4ed81c(0x1e3)]), _0xead933 = {};
        _0xead933[_0x4ed81c(0x20b)] = _0x5c21a9;
        let _0x2b8bac = _0xead933;
        if (_0x128131[_0x4ed81c(0x1ed)](_0x5031ae, _0x128131[_0x4ed81c(0x219)])) {
        } else {
            if (_0x128131[_0x4ed81c(0x1ec)](_0x5031ae, _0x128131[_0x4ed81c(0x228)])) {
                if (_0x128131[_0x4ed81c(0x1ed)](_0x128131[_0x4ed81c(0x22a)](_0x4ac5d6, null) || _0x128131[_0x4ed81c(0x234)](_0x4ac5d6, void (0xba2 + 0x1745 + -0x22e7)) ? void (-0x7 * -0x449 + -0x12c3 * -0x2 + 0x1 * -0x4385) : _0x4ac5d6[_0x4ed81c(0x23b) + _0x4ed81c(0x21d)], _0x128131[_0x4ed81c(0x1dd)])) {
                } else
                    _0x2b8bac[_0x4ed81c(0x214)] = _0xce40db;
            } else {
                if (_0x128131[_0x4ed81c(0x234)](_0x5031ae, _0x128131[_0x4ed81c(0x1f0)])) {
                    if (_0x53e311)
                        _0x2b8bac[_0x4ed81c(0x214)] = _0xce40db;
                    else {
                    }
                }
            }
        }
        const _0x331bfb = { [sequelize_1['Op'][_0x4ed81c(0x1f6)]]: '%' + _0xe128d6 + '%' }, _0x365964 = {};
        _0x365964[_0x4ed81c(0x217)] = _0x331bfb;
        const _0x567709 = {};
        _0x567709[_0x4ed81c(0x238)] = TicketZPRO_1[_0x4ed81c(0x202)], _0x567709[_0x4ed81c(0x1f8)] = _0x2b8bac, _0x567709[_0x4ed81c(0x207)] = !![];
        const _0x2cd366 = {};
        _0x2cd366[_0x4ed81c(0x1f8)] = _0x365964, _0x2cd366[_0x4ed81c(0x21b)] = [_0x567709], _0x2cd366[_0x4ed81c(0x231)] = _0x3f77a2, _0x2cd366[_0x4ed81c(0x1ee)] = _0x3553b1, _0x2cd366[_0x4ed81c(0x1f1)] = [[
                _0x128131[_0x4ed81c(0x1f7)],
                _0x128131[_0x4ed81c(0x23c)]
            ]];
        const {
                count: _0x553b71,
                rows: _0x435f37
            } = yield MessageZPRO_1[_0x4ed81c(0x202)][_0x4ed81c(0x218) + _0x4ed81c(0x22b)](_0x2cd366), _0x50a020 = _0x435f37[_0x4ed81c(0x209)](_0x55cb41 => ({
                'ticket': _0x55cb41[_0x4ed81c(0x233)],
                'lastMessageTimestamp': _0x55cb41[_0x4ed81c(0x20e)][_0x4ed81c(0x1de) + 'g']()
            }));
        return {
            'tickets': _0x50a020,
            'count': _0x553b71,
            'hasMore': _0x128131[_0x4ed81c(0x1eb)](_0x553b71, _0x128131[_0x4ed81c(0x204)](_0x3553b1, _0x435f37[_0x4ed81c(0x203)]))
        };
    });
function _0x37be(_0x568d28, _0x54af68) {
    const _0x506dd0 = _0x581e();
    return _0x37be = function (_0x232563, _0x3a117b) {
        _0x232563 = _0x232563 - (0x1 * -0x18c3 + 0x1 * -0x41e + 0x1eb8);
        let _0x511090 = _0x506dd0[_0x232563];
        return _0x511090;
    }, _0x37be(_0x568d28, _0x54af68);
}
exports[_0x45b4b7(0x202)] = SearchMessagesService;