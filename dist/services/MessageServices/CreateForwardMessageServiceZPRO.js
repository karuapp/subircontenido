'use strict';
const _0x56a43c = _0x5c61;
(function (_0x13ee83, _0x2281ba) {
    const _0x1e9ec2 = _0x5c61, _0x55dbd0 = _0x13ee83();
    while (!![]) {
        try {
            const _0x5cebe2 = -parseInt(_0x1e9ec2(0x1eb)) / (0x17bf * 0x1 + -0x24 * -0xe2 + -0x3786) + parseInt(_0x1e9ec2(0x1ca)) / (-0x287 * 0xe + -0x1455 + 0x37b9) * (-parseInt(_0x1e9ec2(0x1b0)) / (0x11 * 0x211 + 0xbfb * -0x1 + -0x1723 * 0x1)) + parseInt(_0x1e9ec2(0x1fb)) / (-0x771 + -0x1680 + 0x1df5) * (parseInt(_0x1e9ec2(0x1bc)) / (-0x927 + -0x1cc4 + 0x1 * 0x25f0)) + -parseInt(_0x1e9ec2(0x1da)) / (-0x184 * -0x19 + 0x36f * 0x4 + -0x339a) * (parseInt(_0x1e9ec2(0x1d6)) / (0x1e9 + -0xb * -0x232 + -0x88 * 0x31)) + parseInt(_0x1e9ec2(0x1d1)) / (0x1548 + 0x62a + 0x16 * -0x13f) * (parseInt(_0x1e9ec2(0x1d9)) / (-0x4c6 * 0x3 + -0x24b3 * 0x1 + 0x330e * 0x1)) + -parseInt(_0x1e9ec2(0x207)) / (0x10b * -0x19 + -0x1c2b * -0x1 + -0x20e) + parseInt(_0x1e9ec2(0x1e9)) / (-0x19bb + 0x1f * 0xea + -0x290);
            if (_0x5cebe2 === _0x2281ba)
                break;
            else
                _0x55dbd0['push'](_0x55dbd0['shift']());
        } catch (_0x18f3b2) {
            _0x55dbd0['push'](_0x55dbd0['shift']());
        }
    }
}(_0x3415, -0x93eb2 + -0x510 * 0x271 + -0x174 * -0x13cb));
function _0x3415() {
    const _0x1f85b9 = [
        'vwMJP',
        'ndnKp',
        'SoLbh',
        'done',
        '2571fXIIrU',
        'ERR_CREATI',
        'loQTw',
        'GPhQT',
        'contactId',
        'isGroup',
        '_SYSTEM',
        'ZjieA',
        'getTime',
        'next',
        'posxjtgen_',
        '__importDe',
        '695feqCCT',
        'update',
        'juOvV',
        'fault',
        'erty',
        'kdeOS',
        'TBmzk',
        'ZrOpE',
        'contact',
        '__awaiter',
        'agYxq',
        'apply',
        'chat:creat',
        'where',
        '1180oBEHsa',
        'ticket',
        'ervices/Sh',
        'LuVlH',
        'AmihM',
        'ls/Message',
        '../../mode',
        '6264408gKYiQN',
        'kttyf',
        'tenantId',
        'zpro',
        'PRO',
        '301erSanf',
        'ls/TicketZ',
        'NkEoZ',
        '9RQUStt',
        '20010ekacOd',
        'zvyrQ',
        'defineProp',
        'VyHQT',
        'quotedMsg',
        'uyQvv',
        'RcAHz',
        'ate',
        'FiBQb',
        'type',
        'Lzzng',
        'rWxFh',
        'payload',
        'NG_MESSAGE',
        'mediaType',
        '5624619DSjALc',
        'model',
        '357272fJmJJt',
        'chat',
        'create',
        'ZPRO',
        'value',
        'findByPk',
        'c8_zpro/wa',
        'owTicketSe',
        '../TicketS',
        'whatsapp',
        'default',
        'include',
        'rviceZPRO',
        'createdAt',
        'attributes',
        'kAFCP',
        '10436ypAmgJ',
        '../../ludp',
        '__esModule',
        'status',
        'UCtzB',
        'pending',
        'sequelize',
        'RZmio',
        'mediaName',
        'then',
        'ynJvk',
        'whatsappId',
        '1816740gVydsi',
        'throw',
        'yHtRm',
        'open',
        'findOne',
        'KkwaZ',
        'ticket:upd',
        'body'
    ];
    _0x3415 = function () {
        return _0x1f85b9;
    };
    return _0x3415();
}
function _0x5c61(_0x11cb82, _0x386e06) {
    const _0x22b806 = _0x3415();
    return _0x5c61 = function (_0x570293, _0x23000f) {
        _0x570293 = _0x570293 - (-0x9b6 * -0x1 + -0x13 * 0x1b4 + -0x4dc * -0x5);
        let _0x5a2224 = _0x22b806[_0x570293];
        return _0x5a2224;
    }, _0x5c61(_0x11cb82, _0x386e06);
}
var __awaiter = this && this[_0x56a43c(0x1c5)] || function (_0x1024b2, _0x4f93cb, _0x34bbe9, _0x1f55af) {
        const _0x3259ee = _0x56a43c, _0x27bbee = {
                'agYxq': function (_0xeaba2a, _0x5d1665) {
                    return _0xeaba2a(_0x5d1665);
                },
                'Lzzng': function (_0x2b0854, _0x4d89c4) {
                    return _0x2b0854 instanceof _0x4d89c4;
                },
                'ZjieA': _0x3259ee(0x208),
                'yHtRm': function (_0x406adb, _0x52bd30) {
                    return _0x406adb(_0x52bd30);
                },
                'vwMJP': function (_0x1ec79b, _0x3a192e) {
                    return _0x1ec79b(_0x3a192e);
                },
                'kAFCP': function (_0x1ebf2c, _0x2e0525) {
                    return _0x1ebf2c(_0x2e0525);
                }
            };
        function _0x46c254(_0x41e605) {
            const _0x13f175 = _0x3259ee;
            return _0x27bbee[_0x13f175(0x1e4)](_0x41e605, _0x34bbe9) ? _0x41e605 : new _0x34bbe9(function (_0x91ea58) {
                const _0x584f49 = _0x13f175;
                _0x27bbee[_0x584f49(0x1c6)](_0x91ea58, _0x41e605);
            });
        }
        return new (_0x34bbe9 || (_0x34bbe9 = Promise))(function (_0x2e03f9, _0x3dee79) {
            const _0x1ead07 = _0x3259ee, _0x4a102a = {
                    'NkEoZ': function (_0x41876a, _0x4ac63d) {
                        const _0x41fa16 = _0x5c61;
                        return _0x27bbee[_0x41fa16(0x1c6)](_0x41876a, _0x4ac63d);
                    },
                    'KkwaZ': function (_0x43f325, _0x2b4355) {
                        const _0x3487f7 = _0x5c61;
                        return _0x27bbee[_0x3487f7(0x1a6)](_0x43f325, _0x2b4355);
                    },
                    'GPhQT': function (_0x13c144, _0x2d9987) {
                        const _0x1472fa = _0x5c61;
                        return _0x27bbee[_0x1472fa(0x1ac)](_0x13c144, _0x2d9987);
                    },
                    'LuVlH': function (_0xc6c8f7, _0x111b45) {
                        const _0x5c9b57 = _0x5c61;
                        return _0x27bbee[_0x5c9b57(0x1fa)](_0xc6c8f7, _0x111b45);
                    }
                };
            function _0x13729b(_0xfef98) {
                const _0x4987ac = _0x5c61;
                try {
                    _0x4a102a[_0x4987ac(0x1d8)](_0xf43535, _0x1f55af[_0x4987ac(0x1b9)](_0xfef98));
                } catch (_0x2560b8) {
                    _0x4a102a[_0x4987ac(0x1a9)](_0x3dee79, _0x2560b8);
                }
            }
            function _0x5a108e(_0x3d6eeb) {
                const _0x47f3e5 = _0x5c61;
                try {
                    _0x27bbee[_0x47f3e5(0x1c6)](_0xf43535, _0x1f55af[_0x27bbee[_0x47f3e5(0x1b7)]](_0x3d6eeb));
                } catch (_0x49f801) {
                    _0x27bbee[_0x47f3e5(0x1c6)](_0x3dee79, _0x49f801);
                }
            }
            function _0xf43535(_0x4272a7) {
                const _0x452677 = _0x5c61;
                _0x4272a7[_0x452677(0x1af)] ? _0x4a102a[_0x452677(0x1b3)](_0x2e03f9, _0x4272a7[_0x452677(0x1ef)]) : _0x4a102a[_0x452677(0x1cd)](_0x46c254, _0x4272a7[_0x452677(0x1ef)])[_0x452677(0x204)](_0x13729b, _0x5a108e);
            }
            _0x27bbee[_0x1ead07(0x1c6)](_0xf43535, (_0x1f55af = _0x1f55af[_0x1ead07(0x1c7)](_0x1024b2, _0x4f93cb || []))[_0x1ead07(0x1b9)]());
        });
    }, __importDefault = this && this[_0x56a43c(0x1bb) + _0x56a43c(0x1bf)] || function (_0x41eec4) {
        const _0x20a1cc = _0x56a43c;
        return _0x41eec4 && _0x41eec4[_0x20a1cc(0x1fd)] ? _0x41eec4 : { 'default': _0x41eec4 };
    };
const _0xa66d8 = {};
_0xa66d8[_0x56a43c(0x1ef)] = !![], Object[_0x56a43c(0x1dc) + _0x56a43c(0x1c0)](exports, _0x56a43c(0x1fd), _0xa66d8);
const sequelize_1 = require(_0x56a43c(0x201)), waposxjtgen_zpro_1 = __importDefault(require(_0x56a43c(0x1fc) + _0x56a43c(0x1f1) + _0x56a43c(0x1ba) + _0x56a43c(0x1d4))), MessageZPRO_1 = __importDefault(require(_0x56a43c(0x1d0) + _0x56a43c(0x1cf) + _0x56a43c(0x1ee))), TicketZPRO_1 = __importDefault(require(_0x56a43c(0x1d0) + _0x56a43c(0x1d7) + _0x56a43c(0x1d5))), ShowTicketServiceZPRO_1 = __importDefault(require(_0x56a43c(0x1f3) + _0x56a43c(0x1cc) + _0x56a43c(0x1f2) + _0x56a43c(0x1f7))), CreateForwardMessageService = ({
        userId: _0x57a8b1,
        tenantId: _0x497d8d,
        message: _0x58f11e,
        contact: _0x1e16e5,
        ticketIdOrigin: _0x19920c,
        channel: _0x2214e6
    }) => __awaiter(void (-0x189 * 0x11 + -0x2245 + -0x3c5e * -0x1), void (-0x1 * 0x2655 + -0x4 * 0x2a0 + 0x30d5), void (0x1e4d + 0xd73 * -0x1 + -0x10da), function* () {
        const _0x3ae913 = _0x56a43c, _0x55d3fa = {
                'juOvV': _0x3ae913(0x1fe),
                'ndnKp': _0x3ae913(0x1b4),
                'ynJvk': _0x3ae913(0x206),
                'zvyrQ': _0x3ae913(0x1d3),
                'RZmio': _0x3ae913(0x1f8),
                'rWxFh': _0x3ae913(0x1a7),
                'TBmzk': _0x3ae913(0x200),
                'kdeOS': function (_0x152f6b, _0x23d174) {
                    return _0x152f6b(_0x23d174);
                },
                'uyQvv': function (_0x2d79f2, _0x9b210c) {
                    return _0x2d79f2 === _0x9b210c;
                },
                'loQTw': function (_0x3d91aa, _0xc796e1) {
                    return _0x3d91aa === _0xc796e1;
                },
                'FiBQb': function (_0x2fb2ee, _0x583041) {
                    return _0x2fb2ee === _0x583041;
                },
                'ZrOpE': _0x3ae913(0x1ec),
                'VyHQT': _0x3ae913(0x1cb),
                'kttyf': _0x3ae913(0x1c4),
                'RcAHz': _0x3ae913(0x1de),
                'SoLbh': _0x3ae913(0x1b1) + _0x3ae913(0x1e7) + _0x3ae913(0x1b6),
                'AmihM': _0x3ae913(0x1aa) + _0x3ae913(0x1e1),
                'UCtzB': _0x3ae913(0x1c8) + 'e'
            }, _0x3e8200 = {};
        _0x3e8200['id'] = _0x19920c, _0x3e8200[_0x3ae913(0x1d3)] = _0x497d8d;
        const _0x311606 = yield (0x2 * -0xcec + 0x10e4 + 0x8f4, ShowTicketServiceZPRO_1[_0x3ae913(0x1f5)])(_0x3e8200);
        let _0xea8e42;
        const _0x2a1c0c = {};
        _0x2a1c0c[_0x3ae913(0x1f9)] = [
            'id',
            _0x55d3fa[_0x3ae913(0x1be)],
            _0x55d3fa[_0x3ae913(0x1ad)],
            _0x55d3fa[_0x3ae913(0x205)],
            _0x55d3fa[_0x3ae913(0x1db)],
            _0x55d3fa[_0x3ae913(0x202)]
        ], _0x2a1c0c[_0x3ae913(0x1c9)] = {}, _0x2a1c0c[_0x3ae913(0x1c9)][_0x3ae913(0x1fe)] = {
            [sequelize_1['Op']['or']]: [
                _0x55d3fa[_0x3ae913(0x1e5)],
                _0x55d3fa[_0x3ae913(0x1c2)]
            ]
        }, _0x2a1c0c[_0x3ae913(0x1c9)][_0x3ae913(0x1d3)] = _0x497d8d, _0x2a1c0c[_0x3ae913(0x1c9)][_0x3ae913(0x1b4)] = _0x1e16e5['id'], _0x2a1c0c[_0x3ae913(0x1c9)][_0x3ae913(0x206)] = _0x311606[_0x3ae913(0x1f4)]['id'], _0xea8e42 = yield TicketZPRO_1[_0x3ae913(0x1f5)][_0x3ae913(0x1a8)](_0x2a1c0c);
        !_0xea8e42 && (_0xea8e42 = yield TicketZPRO_1[_0x3ae913(0x1f5)][_0x3ae913(0x1ed)]({
            'contactId': _0x1e16e5['id'],
            'status': _0x55d3fa[_0x3ae913(0x1e5)],
            'isGroup': _0x1e16e5[_0x3ae913(0x1b5)],
            'userId': _0x55d3fa[_0x3ae913(0x1c1)](Number, _0x57a8b1),
            'tenantId': _0x55d3fa[_0x3ae913(0x1c1)](Number, _0x497d8d),
            'unreadMessages': 0x0,
            'whatsappId': _0x311606[_0x3ae913(0x206)],
            'lastMessage': _0x58f11e[_0x3ae913(0x1ab)],
            'lastMessageAt': new Date()[_0x3ae913(0x1b8)](),
            'answered': !![],
            'channel': _0x2214e6
        }));
        const _0x342036 = {
                'body': _0x58f11e[_0x3ae913(0x1ab)],
                'contactId': _0x1e16e5['id'],
                'fromMe': !![],
                'read': !![],
                'mediaType': _0x55d3fa[_0x3ae913(0x1df)](_0x58f11e, null) || _0x55d3fa[_0x3ae913(0x1df)](_0x58f11e, void (-0x2d * 0x33 + -0x3a6 * -0x9 + -0x17df)) ? void (0x2f * 0x95 + -0x1192 + -0x9c9) : _0x58f11e[_0x3ae913(0x1e8)],
                'mediaUrl': _0x55d3fa[_0x3ae913(0x1df)](_0x58f11e, null) || _0x55d3fa[_0x3ae913(0x1b2)](_0x58f11e, void (-0x42e + 0xd54 + -0x1 * 0x926)) ? void (-0xc10 + 0x5 * -0x125 + 0x11c9) : _0x58f11e[_0x3ae913(0x203)],
                'mediaName': _0x55d3fa[_0x3ae913(0x1e2)](_0x58f11e, null) || _0x55d3fa[_0x3ae913(0x1b2)](_0x58f11e, void (-0x5 * 0x6a + -0x2257 + 0x2469)) ? void (-0x1232 + 0x1 * 0x1de1 + 0xbaf * -0x1) : _0x58f11e[_0x3ae913(0x203)],
                'timestamp': new Date()[_0x3ae913(0x1b8)](),
                'userId': _0x57a8b1,
                'scheduleDate': null,
                'sendType': _0x55d3fa[_0x3ae913(0x1c3)],
                'status': _0x55d3fa[_0x3ae913(0x1c2)],
                'ticketId': _0xea8e42['id'],
                'tenantId': _0x497d8d
            }, _0x243fc7 = yield MessageZPRO_1[_0x3ae913(0x1f5)][_0x3ae913(0x1ed)](_0x342036), _0x5cd718 = {};
        _0x5cd718[_0x3ae913(0x1d3)] = _0x497d8d;
        const _0x4cbb79 = {};
        _0x4cbb79[_0x3ae913(0x1ea)] = TicketZPRO_1[_0x3ae913(0x1f5)], _0x4cbb79['as'] = _0x55d3fa[_0x3ae913(0x1dd)], _0x4cbb79[_0x3ae913(0x1c9)] = _0x5cd718, _0x4cbb79[_0x3ae913(0x1f6)] = [_0x55d3fa[_0x3ae913(0x1d2)]];
        const _0xcb81a5 = yield MessageZPRO_1[_0x3ae913(0x1f5)][_0x3ae913(0x1f0)](_0x243fc7['id'], {
            'include': [
                _0x4cbb79,
                {
                    'model': MessageZPRO_1[_0x3ae913(0x1f5)],
                    'as': _0x55d3fa[_0x3ae913(0x1e0)],
                    'include': [_0x55d3fa[_0x3ae913(0x1d2)]]
                }
            ]
        });
        if (!_0xcb81a5)
            throw new Error(_0x55d3fa[_0x3ae913(0x1ae)]);
        yield _0xea8e42[_0x3ae913(0x1bd)]({
            'lastMessage': _0xcb81a5[_0x3ae913(0x1ab)],
            'lastMessageAt': new Date()[_0x3ae913(0x1b8)](),
            'answered': !![]
        });
        const _0x21f6a3 = {};
        _0x21f6a3[_0x3ae913(0x1d3)] = _0xea8e42[_0x3ae913(0x1d3)], _0x21f6a3[_0x3ae913(0x1e3)] = _0x55d3fa[_0x3ae913(0x1ce)], _0x21f6a3[_0x3ae913(0x1e6)] = _0xea8e42, (0x3 * -0x493 + 0xdb6 + 0x3 * 0x1, waposxjtgen_zpro_1[_0x3ae913(0x1f5)])(_0x21f6a3);
        const _0x35763d = {};
        _0x35763d[_0x3ae913(0x1d3)] = _0x497d8d, _0x35763d[_0x3ae913(0x1e3)] = _0x55d3fa[_0x3ae913(0x1ff)], _0x35763d[_0x3ae913(0x1e6)] = _0xcb81a5, (-0x111d + -0xf0f + 0x202c, waposxjtgen_zpro_1[_0x3ae913(0x1f5)])(_0x35763d);
    });
exports[_0x56a43c(0x1f5)] = CreateForwardMessageService;