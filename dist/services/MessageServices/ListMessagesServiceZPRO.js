'use strict';
const _0x391c8f = _0x3c57;
(function (_0x5a5f30, _0x43a50c) {
    const _0x10f4ae = _0x3c57, _0x2f3751 = _0x5a5f30();
    while (!![]) {
        try {
            const _0x46e766 = parseInt(_0x10f4ae(0x11e)) / (0xdb0 + 0x16f9 + -0x24a8) + -parseInt(_0x10f4ae(0xc5)) / (-0x247c + 0x2707 + 0xb * -0x3b) + parseInt(_0x10f4ae(0xfe)) / (-0x7d5 + 0x1b * 0x10f + -0x14bd) + parseInt(_0x10f4ae(0xdd)) / (0xc * -0x2bf + 0x134f * -0x2 + 0x4796) + parseInt(_0x10f4ae(0x119)) / (-0xc52 * -0x2 + 0x23ed + 0x1f * -0x1f4) + parseInt(_0x10f4ae(0xf1)) / (-0x539 + 0x26c7 + -0x862 * 0x4) + -parseInt(_0x10f4ae(0xd7)) / (-0x28e + 0x47 * 0x2e + -0xa2d);
            if (_0x46e766 === _0x43a50c)
                break;
            else
                _0x2f3751['push'](_0x2f3751['shift']());
        } catch (_0x135366) {
            _0x2f3751['push'](_0x2f3751['shift']());
        }
    }
}(_0x3478, -0x1f * -0xb942 + 0xeef51 + -0x8df5 * 0x29));
var __awaiter = this && this[_0x391c8f(0xf8)] || function (_0x23878c, _0xcfae7a, _0x9590b1, _0x2335e5) {
        const _0x54e634 = _0x391c8f, _0x5e8bee = {
                'dNKmG': function (_0x55b961, _0x321467) {
                    return _0x55b961(_0x321467);
                },
                'gAfgW': function (_0x12c86a, _0xa85b12) {
                    return _0x12c86a instanceof _0xa85b12;
                },
                'ZsQKY': function (_0x559b3d, _0x23d524) {
                    return _0x559b3d(_0x23d524);
                },
                'hGQfK': _0x54e634(0x106)
            };
        function _0x181124(_0x26e5fd) {
            const _0x32e542 = _0x54e634, _0xd3f83f = {
                    'zWpfp': function (_0x2d6f34, _0x2bcec2) {
                        const _0x1098b3 = _0x3c57;
                        return _0x5e8bee[_0x1098b3(0x11b)](_0x2d6f34, _0x2bcec2);
                    }
                };
            return _0x5e8bee[_0x32e542(0xdf)](_0x26e5fd, _0x9590b1) ? _0x26e5fd : new _0x9590b1(function (_0x168672) {
                const _0x4fe86b = _0x32e542;
                _0xd3f83f[_0x4fe86b(0xe8)](_0x168672, _0x26e5fd);
            });
        }
        return new (_0x9590b1 || (_0x9590b1 = Promise))(function (_0x242ca5, _0x23b63d) {
            const _0x4c1f94 = _0x54e634, _0x469e14 = {
                    'rhrty': function (_0x13c3b, _0x543be0) {
                        const _0x2bc81a = _0x3c57;
                        return _0x5e8bee[_0x2bc81a(0xcd)](_0x13c3b, _0x543be0);
                    },
                    'kDZBa': _0x5e8bee[_0x4c1f94(0xd2)]
                };
            function _0x5a4cf7(_0x4d6ad) {
                const _0x4a3acc = _0x4c1f94;
                try {
                    _0x5e8bee[_0x4a3acc(0x11b)](_0x2d0d31, _0x2335e5[_0x4a3acc(0xfd)](_0x4d6ad));
                } catch (_0x2f6409) {
                    _0x5e8bee[_0x4a3acc(0x11b)](_0x23b63d, _0x2f6409);
                }
            }
            function _0x31ff96(_0x4ae2ef) {
                const _0x488a0c = _0x4c1f94;
                try {
                    _0x469e14[_0x488a0c(0x10c)](_0x2d0d31, _0x2335e5[_0x469e14[_0x488a0c(0xeb)]](_0x4ae2ef));
                } catch (_0x5c2b2e) {
                    _0x469e14[_0x488a0c(0x10c)](_0x23b63d, _0x5c2b2e);
                }
            }
            function _0x2d0d31(_0x45a7ee) {
                const _0x5679be = _0x4c1f94;
                _0x45a7ee[_0x5679be(0x11c)] ? _0x5e8bee[_0x5679be(0xcd)](_0x242ca5, _0x45a7ee[_0x5679be(0x115)]) : _0x5e8bee[_0x5679be(0x11b)](_0x181124, _0x45a7ee[_0x5679be(0x115)])[_0x5679be(0xca)](_0x5a4cf7, _0x31ff96);
            }
            _0x5e8bee[_0x4c1f94(0xcd)](_0x2d0d31, (_0x2335e5 = _0x2335e5[_0x4c1f94(0xc6)](_0x23878c, _0xcfae7a || []))[_0x4c1f94(0xfd)]());
        });
    }, __importDefault = this && this[_0x391c8f(0x104) + _0x391c8f(0xd4)] || function (_0x5d412b) {
        const _0x334e56 = _0x391c8f;
        return _0x5d412b && _0x5d412b[_0x334e56(0xed)] ? _0x5d412b : { 'default': _0x5d412b };
    };
function _0x3478() {
    const _0x32577f = [
        'findAndCou',
        'ErJQk',
        '6893388uJdtlL',
        'ls/TicketZ',
        'gAfgW',
        'name',
        'rviceZPRO',
        'PRO',
        'attributes',
        'ls/TenantZ',
        'reverse',
        'contact',
        'ls/UserZPR',
        'zWpfp',
        'quotedMsg',
        'aysuw',
        'kDZBa',
        'gsd6i9a_zp',
        '__esModule',
        'DESC',
        'blBea',
        'where',
        '7925586kwdmCe',
        'ZSsev',
        'yAQfO',
        'OffLineZPR',
        'ERR_NO_TIC',
        'default',
        'ydqlx',
        '__awaiter',
        'ls/Contact',
        'ls/Message',
        'AMEZW',
        'tKhfB',
        'next',
        '3481392QfoUwa',
        'Url',
        'tenantId',
        'user',
        'include',
        'ro/0yv1ei6',
        '__importDe',
        'order',
        'throw',
        'createdAt',
        'lvKWd',
        'mxx_zpro',
        'ervices/Sh',
        'erty',
        'rhrty',
        'owTicketSe',
        'WPLGu',
        'YFxjm',
        'TTIpT',
        'IsWHh',
        'whatsappId',
        'DIsvZ',
        'ntAll',
        'value',
        '../../dmkb',
        'ticketId',
        '../TicketS',
        '9559305piJxeV',
        'wrsKV',
        'dNKmG',
        'done',
        'uZAkz',
        '91048LYfkAT',
        'number',
        'defineProp',
        '3230106eQGOuf',
        'apply',
        'LDfgU',
        'contactId',
        'JPnKy',
        'then',
        'length',
        'KET_FOUND_',
        'ZsQKY',
        'groupTicke',
        'enabled',
        'ciwyR',
        'ZPRO',
        'hGQfK',
        'queueId',
        'fault',
        'profilePic',
        'findOne',
        '25435228bBTtmw',
        'NlsPX',
        'LGTCb',
        '../../mode'
    ];
    _0x3478 = function () {
        return _0x32577f;
    };
    return _0x3478();
}
const _0x29a1f3 = {};
function _0x3c57(_0x592c3b, _0x15adad) {
    const _0x20c4f9 = _0x3478();
    return _0x3c57 = function (_0x49ec04, _0x454ee0) {
        _0x49ec04 = _0x49ec04 - (0xc * -0x1d5 + 0xf63 + 0x75d);
        let _0x10c5e7 = _0x20c4f9[_0x49ec04];
        return _0x10c5e7;
    }, _0x3c57(_0x592c3b, _0x15adad);
}
_0x29a1f3[_0x391c8f(0x115)] = !![], Object[_0x391c8f(0xc4) + _0x391c8f(0x10b)](exports, _0x391c8f(0xed), _0x29a1f3);
const _0yv1ei6mxx_zpro_1 = __importDefault(require(_0x391c8f(0x116) + _0x391c8f(0xec) + _0x391c8f(0x103) + _0x391c8f(0x109))), MessageZPRO_1 = __importDefault(require(_0x391c8f(0xda) + _0x391c8f(0xfa) + _0x391c8f(0xd1))), MessageOffLineZPRO_1 = __importDefault(require(_0x391c8f(0xda) + _0x391c8f(0xfa) + _0x391c8f(0xf4) + 'O')), TicketZPRO_1 = __importDefault(require(_0x391c8f(0xda) + _0x391c8f(0xde) + _0x391c8f(0xe2))), ShowTicketServiceZPRO_1 = __importDefault(require(_0x391c8f(0x118) + _0x391c8f(0x10a) + _0x391c8f(0x10d) + _0x391c8f(0xe1))), TenantZPRO_1 = __importDefault(require(_0x391c8f(0xda) + _0x391c8f(0xe4) + _0x391c8f(0xe2))), UserZPRO_1 = __importDefault(require(_0x391c8f(0xda) + _0x391c8f(0xe7) + 'O')), ContactZPRO_1 = __importDefault(require(_0x391c8f(0xda) + _0x391c8f(0xf9) + _0x391c8f(0xd1))), ListMessagesService = ({
        pageNumber: pageNumber = '1',
        ticketId: _0x39b5c3,
        tenantId: _0xac5b58
    }) => __awaiter(void (-0x1 * 0x1c00 + -0x2262 + -0x2 * -0x1f31), void (0x3d * 0x39 + -0x1fb5 * 0x1 + -0xe8 * -0x14), void (-0x1 * 0xd87 + -0x7cc + 0x1553 * 0x1), function* () {
        const _0x5c6228 = _0x391c8f, _0x4894ef = {};
        _0x4894ef[_0x5c6228(0x11a)] = _0x5c6228(0xf5) + _0x5c6228(0xcc) + '26', _0x4894ef[_0x5c6228(0xf3)] = _0x5c6228(0xce) + 'ts', _0x4894ef[_0x5c6228(0xea)] = function (_0x265720, _0x16ba87) {
            return _0x265720 === _0x16ba87;
        }, _0x4894ef[_0x5c6228(0x10e)] = function (_0x1c33fc, _0x5a6655) {
            return _0x1c33fc === _0x5a6655;
        }, _0x4894ef[_0x5c6228(0x11d)] = _0x5c6228(0xcf), _0x4894ef[_0x5c6228(0xd0)] = function (_0x2fc94d, _0x21b384) {
            return _0x2fc94d * _0x21b384;
        }, _0x4894ef[_0x5c6228(0x113)] = function (_0x32a465, _0x10eb3a) {
            return _0x32a465 - _0x10eb3a;
        }, _0x4894ef[_0x5c6228(0xdc)] = _0x5c6228(0xe6), _0x4894ef[_0x5c6228(0x110)] = _0x5c6228(0xe9), _0x4894ef[_0x5c6228(0xf7)] = _0x5c6228(0xe0), _0x4894ef[_0x5c6228(0xfb)] = _0x5c6228(0x11f), _0x4894ef[_0x5c6228(0xef)] = _0x5c6228(0xd5) + _0x5c6228(0xff), _0x4894ef[_0x5c6228(0xd9)] = _0x5c6228(0xd3), _0x4894ef[_0x5c6228(0x108)] = _0x5c6228(0xc8), _0x4894ef[_0x5c6228(0xf2)] = _0x5c6228(0x112), _0x4894ef[_0x5c6228(0xd8)] = _0x5c6228(0x101), _0x4894ef[_0x5c6228(0x10f)] = _0x5c6228(0x107), _0x4894ef[_0x5c6228(0xc9)] = _0x5c6228(0xee), _0x4894ef[_0x5c6228(0x111)] = function (_0x544486, _0x4b4135) {
            return _0x544486 === _0x4b4135;
        }, _0x4894ef[_0x5c6228(0xfc)] = function (_0x2730c9, _0x27ab08) {
            return _0x2730c9 > _0x27ab08;
        }, _0x4894ef[_0x5c6228(0xc7)] = function (_0x50927d, _0x199e63) {
            return _0x50927d + _0x199e63;
        };
        const _0x42fdc9 = _0x4894ef, _0x28d6ee = {};
        _0x28d6ee['id'] = _0x39b5c3, _0x28d6ee[_0x5c6228(0x100)] = _0xac5b58;
        const _0x46e468 = yield (-0x1b1 * -0x17 + -0x620 + 0x1 * -0x20c7, ShowTicketServiceZPRO_1[_0x5c6228(0xf6)])(_0x28d6ee);
        if (!_0x46e468)
            throw new _0yv1ei6mxx_zpro_1[(_0x5c6228(0xf6))](_0x42fdc9[_0x5c6228(0x11a)], -0x1 * 0xf9d + 0x26ad + -0x157c);
        const _0x3d88e2 = {};
        _0x3d88e2['id'] = _0xac5b58;
        const _0x450f9d = {};
        _0x450f9d[_0x5c6228(0xf0)] = _0x3d88e2, _0x450f9d[_0x5c6228(0xe3)] = [_0x42fdc9[_0x5c6228(0xf3)]];
        const _0xea9458 = yield TenantZPRO_1[_0x5c6228(0xf6)][_0x5c6228(0xd6)](_0x450f9d), _0x334d89 = {};
        _0x334d89[_0x5c6228(0xd3)] = _0x46e468[_0x5c6228(0xd3)], _0x334d89[_0x5c6228(0xc8)] = _0x46e468[_0x5c6228(0xc8)], _0x334d89[_0x5c6228(0x112)] = _0x46e468[_0x5c6228(0x112)];
        let _0x18353a = _0x334d89;
        _0x42fdc9[_0x5c6228(0xea)](_0x42fdc9[_0x5c6228(0xea)](_0xea9458, null) || _0x42fdc9[_0x5c6228(0x10e)](_0xea9458, void (-0xa01 * -0x3 + 0x3 * 0xb35 + -0x3fa2)) ? void (-0x3 * 0x136 + -0x212 * -0x4 + 0x253 * -0x2) : _0xea9458[_0x5c6228(0xce) + 'ts'], _0x42fdc9[_0x5c6228(0x11d)]) && delete _0x18353a[_0x5c6228(0xd3)];
        const _0x136248 = -0x1dad + -0x3 * 0x51c + -0x1 * -0x2d1f, _0x496e34 = _0x42fdc9[_0x5c6228(0xd0)](_0x136248, _0x42fdc9[_0x5c6228(0x113)](+pageNumber, 0xb84 + -0x1d1 * 0xf + 0xfbc)), {
                count: _0x5d8479,
                rows: _0x4f7df0
            } = yield MessageZPRO_1[_0x5c6228(0xf6)][_0x5c6228(0xdb) + _0x5c6228(0x114)]({
                'limit': _0x136248,
                'include': [
                    _0x42fdc9[_0x5c6228(0xdc)],
                    {
                        'model': MessageZPRO_1[_0x5c6228(0xf6)],
                        'as': _0x42fdc9[_0x5c6228(0x110)],
                        'include': [{
                                'model': ContactZPRO_1[_0x5c6228(0xf6)],
                                'as': _0x42fdc9[_0x5c6228(0xdc)],
                                'attributes': [
                                    'id',
                                    _0x42fdc9[_0x5c6228(0xf7)],
                                    _0x42fdc9[_0x5c6228(0xfb)],
                                    _0x42fdc9[_0x5c6228(0xef)]
                                ]
                            }]
                    },
                    {
                        'model': TicketZPRO_1[_0x5c6228(0xf6)],
                        'where': _0x18353a,
                        'required': !![],
                        'attributes': {
                            'include': [
                                'id',
                                _0x42fdc9[_0x5c6228(0xd9)],
                                _0x42fdc9[_0x5c6228(0x108)],
                                _0x42fdc9[_0x5c6228(0xf2)]
                            ]
                        },
                        'include': [{
                                'model': UserZPRO_1[_0x5c6228(0xf6)],
                                'as': _0x42fdc9[_0x5c6228(0xd8)],
                                'attributes': [
                                    'id',
                                    _0x42fdc9[_0x5c6228(0xf7)]
                                ]
                            }]
                    },
                    {
                        'model': UserZPRO_1[_0x5c6228(0xf6)],
                        'attributes': [_0x42fdc9[_0x5c6228(0xf7)]]
                    }
                ],
                'offset': _0x496e34,
                'order': [[
                        _0x42fdc9[_0x5c6228(0x10f)],
                        _0x42fdc9[_0x5c6228(0xc9)]
                    ]]
            });
        let _0x10dd97 = [];
        if (_0x42fdc9[_0x5c6228(0x111)](+pageNumber, -0x93f + 0x2 * 0xdf3 + -0x12a6)) {
            const _0x9a6412 = {};
            _0x9a6412[_0x5c6228(0x117)] = _0x39b5c3;
            const _0x5a28c4 = {};
            _0x5a28c4[_0x5c6228(0xf0)] = _0x9a6412, _0x5a28c4[_0x5c6228(0x102)] = [
                _0x42fdc9[_0x5c6228(0xdc)],
                {
                    'model': MessageZPRO_1[_0x5c6228(0xf6)],
                    'as': _0x42fdc9[_0x5c6228(0x110)],
                    'include': [_0x42fdc9[_0x5c6228(0xdc)]]
                }
            ], _0x5a28c4[_0x5c6228(0x105)] = [[
                    _0x42fdc9[_0x5c6228(0x10f)],
                    _0x42fdc9[_0x5c6228(0xc9)]
                ]];
            const {rows: _0xf57365} = yield MessageOffLineZPRO_1[_0x5c6228(0xf6)][_0x5c6228(0xdb) + _0x5c6228(0x114)](_0x5a28c4);
            _0x10dd97 = _0xf57365;
        }
        const _0x3fbd12 = _0x42fdc9[_0x5c6228(0xfc)](_0x5d8479, _0x42fdc9[_0x5c6228(0xc7)](_0x496e34, _0x4f7df0[_0x5c6228(0xcb)]));
        return {
            'messages': _0x4f7df0[_0x5c6228(0xe5)](),
            'messagesOffLine': _0x10dd97,
            'ticket': _0x46e468,
            'count': _0x5d8479,
            'hasMore': _0x3fbd12
        };
    });
exports[_0x391c8f(0xf6)] = ListMessagesService;