'use strict';
const _0x3fd682 = _0x2a33;
(function (_0x3ab05d, _0x59cdc9) {
    const _0x2b0f13 = _0x2a33, _0x4fd5ed = _0x3ab05d();
    while (!![]) {
        try {
            const _0x3141ab = parseInt(_0x2b0f13(0xaa)) / (-0xc6f + -0x1215 + -0x259 * -0xd) * (parseInt(_0x2b0f13(0xa2)) / (-0x10c3 + -0x20e9 + 0x31ae)) + -parseInt(_0x2b0f13(0x99)) / (-0x23d8 + -0x1ebc + 0x4297) * (parseInt(_0x2b0f13(0x8f)) / (-0x90e * -0x3 + 0x5 * 0x5d5 + -0x384f)) + parseInt(_0x2b0f13(0x92)) / (-0x17a7 + -0x1 * -0x1c6f + -0x17 * 0x35) + parseInt(_0x2b0f13(0xa5)) / (0xeda + 0x962 * -0x1 + -0x52 * 0x11) * (-parseInt(_0x2b0f13(0xad)) / (-0x511 * 0x2 + -0x1f00 + 0x2929)) + -parseInt(_0x2b0f13(0xa8)) / (0xbf2 * 0x1 + 0xd15 + -0x18ff) + parseInt(_0x2b0f13(0xa6)) / (-0x264d + 0xb * -0xeb + 0x306f) * (-parseInt(_0x2b0f13(0xb6)) / (0x4 * -0x3ab + -0x23df + 0x3295)) + parseInt(_0x2b0f13(0xc2)) / (-0x22ca + 0xd * -0x2cb + 0x4724) * (parseInt(_0x2b0f13(0xc0)) / (0x18 * 0x43 + -0x6 * -0x1e8 + 0xae * -0x1a));
            if (_0x3141ab === _0x59cdc9)
                break;
            else
                _0x4fd5ed['push'](_0x4fd5ed['shift']());
        } catch (_0x3fedd8) {
            _0x4fd5ed['push'](_0x4fd5ed['shift']());
        }
    }
}(_0x2dad, -0xad45 * 0x1 + 0x1f58 * 0xd + 0x4d03 * 0x3));
var __awaiter = this && this[_0x3fd682(0x78)] || function (_0x253602, _0xa8f998, _0x8f2861, _0x2d4c0d) {
        const _0x5d0ecd = _0x3fd682, _0x2c57f3 = {
                'EIPpg': function (_0x374810, _0x3521bc) {
                    return _0x374810(_0x3521bc);
                },
                'AojdW': function (_0x5a3a1f, _0x267ffc) {
                    return _0x5a3a1f instanceof _0x267ffc;
                },
                'AabvI': function (_0x5edc50, _0x59908b) {
                    return _0x5edc50(_0x59908b);
                },
                'sIFxl': function (_0x32a9ea, _0x2c0e97) {
                    return _0x32a9ea(_0x2c0e97);
                },
                'oudEn': _0x5d0ecd(0x87),
                'xKNel': function (_0x665d98, _0x184e65) {
                    return _0x665d98(_0x184e65);
                },
                'fczaK': function (_0x5872b1, _0x104a71) {
                    return _0x5872b1(_0x104a71);
                }
            };
        function _0x583c1b(_0x2881df) {
            const _0x7ae14e = _0x5d0ecd, _0x4503b6 = {
                    'gdWyh': function (_0x243c77, _0x59e784) {
                        const _0x4bbeff = _0x2a33;
                        return _0x2c57f3[_0x4bbeff(0x7f)](_0x243c77, _0x59e784);
                    }
                };
            return _0x2c57f3[_0x7ae14e(0xcc)](_0x2881df, _0x8f2861) ? _0x2881df : new _0x8f2861(function (_0xafd4ce) {
                const _0x4ac617 = _0x7ae14e;
                _0x4503b6[_0x4ac617(0x9d)](_0xafd4ce, _0x2881df);
            });
        }
        return new (_0x8f2861 || (_0x8f2861 = Promise))(function (_0xf00236, _0x1cad2c) {
            const _0x109fda = _0x5d0ecd, _0xdf7e1c = {
                    'ZsvXN': function (_0x4570ce, _0x10e7e6) {
                        const _0x3cacfe = _0x2a33;
                        return _0x2c57f3[_0x3cacfe(0x79)](_0x4570ce, _0x10e7e6);
                    },
                    'LPoHY': function (_0x408db7, _0x2a4453) {
                        const _0x452f40 = _0x2a33;
                        return _0x2c57f3[_0x452f40(0x88)](_0x408db7, _0x2a4453);
                    }
                };
            function _0x321bef(_0x2e1bdd) {
                const _0x4f0871 = _0x2a33;
                try {
                    _0x2c57f3[_0x4f0871(0xbd)](_0x37e59c, _0x2d4c0d[_0x4f0871(0xbf)](_0x2e1bdd));
                } catch (_0x1eba2e) {
                    _0x2c57f3[_0x4f0871(0x89)](_0x1cad2c, _0x1eba2e);
                }
            }
            function _0x4f4d90(_0x4bdbae) {
                const _0x23f507 = _0x2a33;
                try {
                    _0x2c57f3[_0x23f507(0x89)](_0x37e59c, _0x2d4c0d[_0x2c57f3[_0x23f507(0xc1)]](_0x4bdbae));
                } catch (_0x431bc0) {
                    _0x2c57f3[_0x23f507(0x88)](_0x1cad2c, _0x431bc0);
                }
            }
            function _0x37e59c(_0x52234c) {
                const _0x169f92 = _0x2a33;
                _0x52234c[_0x169f92(0x85)] ? _0xdf7e1c[_0x169f92(0xb9)](_0xf00236, _0x52234c[_0x169f92(0x7a)]) : _0xdf7e1c[_0x169f92(0x9f)](_0x583c1b, _0x52234c[_0x169f92(0x7a)])[_0x169f92(0x9a)](_0x321bef, _0x4f4d90);
            }
            _0x2c57f3[_0x109fda(0x89)](_0x37e59c, (_0x2d4c0d = _0x2d4c0d[_0x109fda(0xb1)](_0x253602, _0xa8f998 || []))[_0x109fda(0xbf)]());
        });
    }, __importDefault = this && this[_0x3fd682(0x86) + _0x3fd682(0xbc)] || function (_0x1acbd3) {
        const _0x599015 = _0x3fd682;
        return _0x1acbd3 && _0x1acbd3[_0x599015(0x83)] ? _0x1acbd3 : { 'default': _0x1acbd3 };
    };
function _0x2a33(_0x14df94, _0x4957ba) {
    const _0x2142cb = _0x2dad();
    return _0x2a33 = function (_0x52524b, _0x2f1cf2) {
        _0x52524b = _0x52524b - (-0x422 + 0x50b + -0x1 * 0x71);
        let _0x1aebdb = _0x2142cb[_0x52524b];
        return _0x1aebdb;
    }, _0x2a33(_0x14df94, _0x4957ba);
}
const _0x5ba16b = {};
_0x5ba16b[_0x3fd682(0x7a)] = !![], Object[_0x3fd682(0xc3) + _0x3fd682(0xae)](exports, _0x3fd682(0x83), _0x5ba16b);
function _0x2dad() {
    const _0x28a9bf = [
        '10TFOjLB',
        'GpkPW',
        'FShzJ',
        'ZsvXN',
        'pro',
        'include',
        'fault',
        'AabvI',
        'tenantId',
        'next',
        '48CXLHTU',
        'oudEn',
        '634843GvxXqm',
        'defineProp',
        'aKtMX',
        'findAndCou',
        'dewLG',
        'kcDPK',
        'where',
        'owTicketSe',
        'ASC',
        'reverse',
        'AojdW',
        '__awaiter',
        'fczaK',
        'value',
        'contact',
        'queueId',
        'TtQYW',
        'ervices/Sh',
        'EIPpg',
        'whatsappId',
        'ls/Contact',
        'KmCCD',
        '__esModule',
        'default',
        'done',
        '__importDe',
        'throw',
        'xKNel',
        'sIFxl',
        'OKteR',
        'profilePic',
        'contactId',
        'order',
        'DHkUd',
        '1080NPoUhL',
        'RGYyI',
        '../../y20r',
        '67020cLnVBz',
        '../../mode',
        'OffLineZPR',
        'ZPRO',
        'number',
        'ticketId',
        'quotedMsg',
        '519EWRvqS',
        'then',
        '../TicketS',
        'ls/UserZPR',
        'gdWyh',
        'createdAt',
        'LPoHY',
        'ls/Message',
        'ntAll',
        '12Dbwgda',
        '0s48_zpro/',
        'ERR_NO_TIC',
        '4890vzpwFi',
        '654048hQRDPW',
        'rviceZPRO',
        '1291960AvwJmL',
        'PRO',
        '31251XBFAku',
        'Url',
        'IBohQ',
        '273hcMiPq',
        'erty',
        'scw1efoe_z',
        'KET_FOUND_',
        'apply',
        'name',
        'ls/TicketZ',
        'RiQDA',
        'user'
    ];
    _0x2dad = function () {
        return _0x28a9bf;
    };
    return _0x2dad();
}
const scw1efoe_zpro_1 = __importDefault(require(_0x3fd682(0x91) + _0x3fd682(0xa3) + _0x3fd682(0xaf) + _0x3fd682(0xba))), MessageZPRO_1 = __importDefault(require(_0x3fd682(0x93) + _0x3fd682(0xa0) + _0x3fd682(0x95))), MessageOffLineZPRO_1 = __importDefault(require(_0x3fd682(0x93) + _0x3fd682(0xa0) + _0x3fd682(0x94) + 'O')), TicketZPRO_1 = __importDefault(require(_0x3fd682(0x93) + _0x3fd682(0xb3) + _0x3fd682(0xa9))), ShowTicketServiceZPRO_1 = __importDefault(require(_0x3fd682(0x9b) + _0x3fd682(0x7e) + _0x3fd682(0xc9) + _0x3fd682(0xa7))), UserZPRO_1 = __importDefault(require(_0x3fd682(0x93) + _0x3fd682(0x9c) + 'O')), ContactZPRO_1 = __importDefault(require(_0x3fd682(0x93) + _0x3fd682(0x81) + _0x3fd682(0x95))), ExportMessagesService = ({
        ticketId: _0x5d8871,
        tenantId: _0x2f3521
    }) => __awaiter(void (-0x1 * -0x5cb + 0xcf1 + -0x1b4 * 0xb), void (0xac9 * -0x3 + -0x2cc + 0x2327), void (0x195d * 0x1 + -0x1b * -0xcd + -0x2efc), function* () {
        const _0x544d16 = _0x3fd682, _0x2db059 = {};
        _0x2db059[_0x544d16(0x8a)] = _0x544d16(0xa4) + _0x544d16(0xb0) + '26', _0x2db059[_0x544d16(0xb8)] = _0x544d16(0x7b), _0x2db059[_0x544d16(0x8e)] = _0x544d16(0x98), _0x2db059[_0x544d16(0xc6)] = _0x544d16(0xb2), _0x2db059[_0x544d16(0xb7)] = _0x544d16(0x96), _0x2db059[_0x544d16(0xc4)] = _0x544d16(0x8b) + _0x544d16(0xab), _0x2db059[_0x544d16(0xac)] = _0x544d16(0x7c), _0x2db059[_0x544d16(0xc7)] = _0x544d16(0x8c), _0x2db059[_0x544d16(0x7d)] = _0x544d16(0x80), _0x2db059[_0x544d16(0x90)] = _0x544d16(0xb5), _0x2db059[_0x544d16(0xb4)] = _0x544d16(0x9e), _0x2db059[_0x544d16(0x82)] = _0x544d16(0xca);
        const _0x1bc04a = _0x2db059, _0x268b51 = {};
        _0x268b51['id'] = _0x5d8871, _0x268b51[_0x544d16(0xbe)] = _0x2f3521;
        const _0x3deec9 = yield (0x11a2 + 0x12e8 + 0x3 * -0xc2e, ShowTicketServiceZPRO_1[_0x544d16(0x84)])(_0x268b51);
        if (!_0x3deec9)
            throw new scw1efoe_zpro_1[(_0x544d16(0x84))](_0x1bc04a[_0x544d16(0x8a)], 0x1703 + -0x2632 + 0x10c3);
        const _0x342457 = {};
        _0x342457[_0x544d16(0x97)] = _0x5d8871, _0x342457[_0x544d16(0xbe)] = _0x2f3521;
        const {
                count: _0x20d5aa,
                rows: _0x4976d2
            } = yield MessageZPRO_1[_0x544d16(0x84)][_0x544d16(0xc5) + _0x544d16(0xa1)]({
                'where': _0x342457,
                'include': [
                    _0x1bc04a[_0x544d16(0xb8)],
                    {
                        'model': MessageZPRO_1[_0x544d16(0x84)],
                        'as': _0x1bc04a[_0x544d16(0x8e)],
                        'include': [{
                                'model': ContactZPRO_1[_0x544d16(0x84)],
                                'as': _0x1bc04a[_0x544d16(0xb8)],
                                'attributes': [
                                    'id',
                                    _0x1bc04a[_0x544d16(0xc6)],
                                    _0x1bc04a[_0x544d16(0xb7)],
                                    _0x1bc04a[_0x544d16(0xc4)]
                                ]
                            }]
                    },
                    {
                        'model': TicketZPRO_1[_0x544d16(0x84)],
                        'attributes': [
                            'id',
                            _0x1bc04a[_0x544d16(0xac)],
                            _0x1bc04a[_0x544d16(0xc7)],
                            _0x1bc04a[_0x544d16(0x7d)]
                        ],
                        'include': [{
                                'model': UserZPRO_1[_0x544d16(0x84)],
                                'as': _0x1bc04a[_0x544d16(0x90)],
                                'attributes': [
                                    'id',
                                    _0x1bc04a[_0x544d16(0xc6)]
                                ]
                            }]
                    },
                    {
                        'model': UserZPRO_1[_0x544d16(0x84)],
                        'attributes': [_0x1bc04a[_0x544d16(0xc6)]]
                    }
                ],
                'order': [[
                        _0x1bc04a[_0x544d16(0xb4)],
                        _0x1bc04a[_0x544d16(0x82)]
                    ]]
            }), _0x1493ab = {};
        _0x1493ab[_0x544d16(0x97)] = _0x5d8871;
        const _0x2f83c9 = {};
        _0x2f83c9[_0x544d16(0xc8)] = _0x1493ab, _0x2f83c9[_0x544d16(0xbb)] = [
            _0x1bc04a[_0x544d16(0xb8)],
            {
                'model': MessageZPRO_1[_0x544d16(0x84)],
                'as': _0x1bc04a[_0x544d16(0x8e)],
                'include': [_0x1bc04a[_0x544d16(0xb8)]]
            }
        ], _0x2f83c9[_0x544d16(0x8d)] = [[
                _0x1bc04a[_0x544d16(0xb4)],
                _0x1bc04a[_0x544d16(0x82)]
            ]];
        const {rows: _0x4ee5a2} = yield MessageOffLineZPRO_1[_0x544d16(0x84)][_0x544d16(0xc5) + _0x544d16(0xa1)](_0x2f83c9);
        return {
            'messages': _0x4976d2[_0x544d16(0xcb)](),
            'messagesOffLine': _0x4ee5a2,
            'ticket': _0x3deec9,
            'count': _0x20d5aa
        };
    });
exports[_0x3fd682(0x84)] = ExportMessagesService;