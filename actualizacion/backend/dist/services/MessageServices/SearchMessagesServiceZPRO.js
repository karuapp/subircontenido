'use strict';
const _0xaadf0c = _0x1ba2;
function _0x553d() {
    const _0x1cd979 = [
        'then',
        'pro',
        '__importDe',
        '86441NQKFQZ',
        'JvybG',
        'length',
        '__awaiter',
        '0s48_zpro/',
        '387ilWGBu',
        '../../y20r',
        'vmoqe',
        'avFPU',
        'offset',
        'super',
        'DESC',
        'gQlov',
        'sequelize',
        'ticket',
        'key',
        'required',
        'BQRNB',
        '265730vKyMDW',
        'spvfZ',
        'limit',
        'iLike',
        'LuQra',
        'supervisor',
        'ZDdZB',
        'ZPRO',
        'ERR_INVALI',
        'rQVAz',
        'TulqP',
        'attributes',
        'ls/Setting',
        'GzssG',
        'apply',
        'GUVNc',
        'RCH_TERM_P',
        'TVhaE',
        'smgwC',
        'createdAt',
        '12BDNXUC',
        'OwEri',
        'iyHAK',
        'done',
        'aTOkq',
        'Admin',
        'map',
        'default',
        'QdWKW',
        'findOne',
        '19312356omAOWD',
        'PRO',
        'tenantId',
        'defineProp',
        '4Fyvzwo',
        'ignedTicke',
        'hWEhX',
        'AksVg',
        'body',
        'where',
        'erty',
        'NotViewAss',
        'ls/TicketZ',
        'TFMRv',
        'KMbup',
        'throw',
        'order',
        '2206370DNfQQa',
        'eacLI',
        'model',
        'YJjuJ',
        'ROVIDED',
        'CsoVH',
        'ClMYP',
        '__esModule',
        'enabled',
        'yEQdh',
        '../../mode',
        'user',
        'YiJaL',
        '3490116XtnrWG',
        'xFbOt',
        '2mUYqsQ',
        'include',
        'CRnpC',
        '143YiPZuP',
        'wLzcV',
        'ntAll',
        'scw1efoe_z',
        'YMIoc',
        'D_TENANT_I',
        '192872ipEsiv',
        'disabled',
        'next',
        'toISOStrin',
        'findAndCou',
        'value',
        '2817912TvNIzU',
        'fault',
        'ls/Message',
        'userId',
        'ERR_NO_SEA',
        'QqQMD',
        'admin',
        'ls/TenantZ'
    ];
    _0x553d = function () {
        return _0x1cd979;
    };
    return _0x553d();
}
(function (_0x69e853, _0x3e08dd) {
    const _0x44a620 = _0x1ba2, _0x1219f7 = _0x69e853();
    while (!![]) {
        try {
            const _0x22137d = -parseInt(_0x44a620(0x14a)) / (-0x19c * 0x3 + 0xe7e + -0x9a9) * (parseInt(_0x44a620(0x130)) / (0xd7 * -0x7 + -0x1 * -0x25be + -0x1fdb)) + -parseInt(_0x44a620(0x13f)) / (0x37d * -0x1 + -0x2328 + 0x26a8) * (parseInt(_0x44a620(0x114)) / (-0x215 + 0x149e + -0x1285)) + -parseInt(_0x44a620(0x121)) / (-0xca7 + 0x238 * 0x10 + -0xb6a * 0x2) * (-parseInt(_0x44a620(0x106)) / (0x3b * 0x71 + -0x1 * -0x235f + -0xf59 * 0x4)) + parseInt(_0x44a620(0x12e)) / (0x73 + 0x40c + 0x68 * -0xb) + -parseInt(_0x44a620(0x139)) / (-0x1 * -0x1816 + -0x1 * 0x1d3f + 0x531) * (parseInt(_0x44a620(0x14f)) / (0x954 + 0x60c + -0xf57)) + parseInt(_0x44a620(0x15c)) / (-0x1bb6 + -0x252d + 0x40ed) * (-parseInt(_0x44a620(0x133)) / (0x666 + 0x1979 + 0x7f5 * -0x4)) + parseInt(_0x44a620(0x110)) / (-0x1bb4 + 0x7 * 0x44c + 0x1 * -0x254);
            if (_0x22137d === _0x3e08dd)
                break;
            else
                _0x1219f7['push'](_0x1219f7['shift']());
        } catch (_0x235aa3) {
            _0x1219f7['push'](_0x1219f7['shift']());
        }
    }
}(_0x553d, 0x5a8eb + 0xffc1d + -0x26 * 0x55ed));
function _0x1ba2(_0x2d895d, _0x419c10) {
    const _0x470b14 = _0x553d();
    return _0x1ba2 = function (_0x45718b, _0x3eda44) {
        _0x45718b = _0x45718b - (-0x5 * 0x78d + 0x185 + 0x154 * 0x1c);
        let _0x5426cb = _0x470b14[_0x45718b];
        return _0x5426cb;
    }, _0x1ba2(_0x2d895d, _0x419c10);
}
var __awaiter = this && this[_0xaadf0c(0x14d)] || function (_0x5ebf6d, _0x55e777, _0x3d276d, _0x2f7e21) {
        const _0x3bd46e = _0xaadf0c, _0x1423a7 = {
                'iyHAK': function (_0x21b507, _0x563802) {
                    return _0x21b507(_0x563802);
                },
                'QdWKW': function (_0x316fbe, _0x18ccd1) {
                    return _0x316fbe instanceof _0x18ccd1;
                },
                'YJjuJ': function (_0x33652f, _0xfc2c86) {
                    return _0x33652f(_0xfc2c86);
                },
                'yEQdh': function (_0x5bccf7, _0x29e59a) {
                    return _0x5bccf7(_0x29e59a);
                },
                'QqQMD': _0x3bd46e(0x11f),
                'rQVAz': function (_0xaca05, _0x114b7f) {
                    return _0xaca05(_0x114b7f);
                }
            };
        function _0x30024b(_0xc9372a) {
            const _0x10d489 = _0x3bd46e;
            return _0x1423a7[_0x10d489(0x10e)](_0xc9372a, _0x3d276d) ? _0xc9372a : new _0x3d276d(function (_0x12729a) {
                const _0x513390 = _0x10d489;
                _0x1423a7[_0x513390(0x108)](_0x12729a, _0xc9372a);
            });
        }
        return new (_0x3d276d || (_0x3d276d = Promise))(function (_0x3606f6, _0x435828) {
            const _0x1ba5aa = _0x3bd46e, _0x87264b = {
                    'CsoVH': function (_0x223f21, _0x1a6015) {
                        const _0x46ca25 = _0x1ba2;
                        return _0x1423a7[_0x46ca25(0x12a)](_0x223f21, _0x1a6015);
                    },
                    'JvybG': _0x1423a7[_0x1ba5aa(0x144)],
                    'TFMRv': function (_0x1565ac, _0x468c15) {
                        const _0x476fc3 = _0x1ba5aa;
                        return _0x1423a7[_0x476fc3(0x12a)](_0x1565ac, _0x468c15);
                    }
                };
            function _0x4cd15f(_0x47275c) {
                const _0x21926e = _0x1ba5aa;
                try {
                    _0x1423a7[_0x21926e(0x108)](_0x4840a0, _0x2f7e21[_0x21926e(0x13b)](_0x47275c));
                } catch (_0x3bcdac) {
                    _0x1423a7[_0x21926e(0x124)](_0x435828, _0x3bcdac);
                }
            }
            function _0x4b7db6(_0x39c0b6) {
                const _0x2439bb = _0x1ba5aa;
                try {
                    _0x87264b[_0x2439bb(0x126)](_0x4840a0, _0x2f7e21[_0x87264b[_0x2439bb(0x14b)]](_0x39c0b6));
                } catch (_0x24dfec) {
                    _0x87264b[_0x2439bb(0x11d)](_0x435828, _0x24dfec);
                }
            }
            function _0x4840a0(_0x4525d5) {
                const _0x309696 = _0x1ba5aa;
                _0x4525d5[_0x309696(0x109)] ? _0x1423a7[_0x309696(0x124)](_0x3606f6, _0x4525d5[_0x309696(0x13e)]) : _0x1423a7[_0x309696(0x12a)](_0x30024b, _0x4525d5[_0x309696(0x13e)])[_0x309696(0x147)](_0x4cd15f, _0x4b7db6);
            }
            _0x1423a7[_0x1ba5aa(0xfb)](_0x4840a0, (_0x2f7e21 = _0x2f7e21[_0x1ba5aa(0x100)](_0x5ebf6d, _0x55e777 || []))[_0x1ba5aa(0x13b)]());
        });
    }, __importDefault = this && this[_0xaadf0c(0x149) + _0xaadf0c(0x140)] || function (_0x1637d2) {
        const _0x492f22 = _0xaadf0c;
        return _0x1637d2 && _0x1637d2[_0x492f22(0x128)] ? _0x1637d2 : { 'default': _0x1637d2 };
    };
const _0x59d2f1 = {};
_0x59d2f1[_0xaadf0c(0x13e)] = !![], Object[_0xaadf0c(0x113) + _0xaadf0c(0x11a)](exports, _0xaadf0c(0x128), _0x59d2f1);
const scw1efoe_zpro_1 = __importDefault(require(_0xaadf0c(0x150) + _0xaadf0c(0x14e) + _0xaadf0c(0x136) + _0xaadf0c(0x148))), MessageZPRO_1 = __importDefault(require(_0xaadf0c(0x12b) + _0xaadf0c(0x141) + _0xaadf0c(0xf9))), TicketZPRO_1 = __importDefault(require(_0xaadf0c(0x12b) + _0xaadf0c(0x11c) + _0xaadf0c(0x111))), SettingZPRO_1 = __importDefault(require(_0xaadf0c(0x12b) + _0xaadf0c(0xfe) + _0xaadf0c(0xf9))), TenantZPRO_1 = __importDefault(require(_0xaadf0c(0x12b) + _0xaadf0c(0x146) + _0xaadf0c(0x111))), sequelize_1 = require(_0xaadf0c(0x157)), SearchMessagesService = ({
        searchTerm: _0x44368d,
        tenantId: _0x1108ae,
        pageNumber: pageNumber = '1',
        userId: _0x25b07c,
        profile: _0x27f147
    }) => __awaiter(void (-0x2278 + -0x1 * 0x4af + 0x2727), void (0x79 * -0x2b + -0x4b * -0x15 + -0x2 * -0x716), void (0x1a92 + 0x357 * -0x5 + 0x1 * -0x9df), function* () {
        const _0x2a1175 = _0xaadf0c, _0x5a2537 = {
                'LuQra': _0x2a1175(0x143) + _0x2a1175(0x102) + _0x2a1175(0x125),
                'smgwC': function (_0x104652, _0x5b5f34) {
                    return _0x104652 * _0x5b5f34;
                },
                'wLzcV': function (_0x546f3b, _0x1567ef) {
                    return _0x546f3b - _0x1567ef;
                },
                'gQlov': function (_0x49c5fc, _0x33e9de, _0xc673ff) {
                    return _0x49c5fc(_0x33e9de, _0xc673ff);
                },
                'AksVg': function (_0x542cb7, _0x23548e, _0x94d9b4) {
                    return _0x542cb7(_0x23548e, _0x94d9b4);
                },
                'GzssG': function (_0x366a74, _0x56559b) {
                    return _0x366a74(_0x56559b);
                },
                'ClMYP': _0x2a1175(0xfa) + _0x2a1175(0x138) + 'D',
                'TVhaE': _0x2a1175(0xf7) + _0x2a1175(0x10b),
                'hWEhX': _0x2a1175(0x11b) + _0x2a1175(0x115) + 'ts',
                'xFbOt': function (_0x510b34, _0x28eabe) {
                    return _0x510b34 === _0x28eabe;
                },
                'OwEri': function (_0x33f696, _0x3d44a9) {
                    return _0x33f696 === _0x3d44a9;
                },
                'BQRNB': _0x2a1175(0x129),
                'KMbup': _0x2a1175(0x145),
                'vmoqe': function (_0x347816, _0x41da15) {
                    return _0x347816 === _0x41da15;
                },
                'spvfZ': _0x2a1175(0x154),
                'GUVNc': function (_0x271f89, _0x8a6d47) {
                    return _0x271f89 === _0x8a6d47;
                },
                'TulqP': function (_0x3a1268, _0x54a366) {
                    return _0x3a1268 === _0x54a366;
                },
                'avFPU': _0x2a1175(0x13a),
                'eacLI': function (_0x1e0d48, _0x4e8fa8) {
                    return _0x1e0d48 === _0x4e8fa8;
                },
                'CRnpC': _0x2a1175(0x12c),
                'YMIoc': _0x2a1175(0x105),
                'YiJaL': _0x2a1175(0x155),
                'ZDdZB': function (_0x26ea4f, _0x13e4cb) {
                    return _0x26ea4f > _0x13e4cb;
                },
                'aTOkq': function (_0x5b7ba6, _0x45a2d5) {
                    return _0x5b7ba6 + _0x45a2d5;
                }
            };
        if (!_0x44368d)
            throw new scw1efoe_zpro_1[(_0x2a1175(0x10d))](_0x5a2537[_0x2a1175(0xf6)], -0xf * -0x135 + 0x23df + -0x346a);
        const _0x227bcb = -0x313 * 0x4 + 0x12f5 + -0x6a6, _0x3db251 = _0x5a2537[_0x2a1175(0x104)](_0x227bcb, _0x5a2537[_0x2a1175(0x134)](_0x5a2537[_0x2a1175(0x156)](parseInt, pageNumber, -0x18ab + -0x4ce + 0x1d83), 0x655 * -0x2 + 0x1073 + -0x3c8)), _0x330aa6 = _0x5a2537[_0x2a1175(0x117)](parseInt, _0x1108ae, -0x2220 + 0x1317 + -0x1 * -0xf13);
        if (_0x5a2537[_0x2a1175(0xff)](isNaN, _0x330aa6))
            throw new scw1efoe_zpro_1[(_0x2a1175(0x10d))](_0x5a2537[_0x2a1175(0x127)], -0x22b + 0x1e39 * -0x1 + 0x21f4);
        const _0x26d11d = {};
        _0x26d11d['id'] = _0x330aa6;
        const _0x5ce5cf = {};
        _0x5ce5cf[_0x2a1175(0x119)] = _0x26d11d, _0x5ce5cf[_0x2a1175(0xfd)] = [_0x5a2537[_0x2a1175(0x103)]];
        const _0xf9f31a = yield TenantZPRO_1[_0x2a1175(0x10d)][_0x2a1175(0x10f)](_0x5ce5cf), _0x5d1598 = {};
        _0x5d1598[_0x2a1175(0x112)] = _0x330aa6, _0x5d1598[_0x2a1175(0x159)] = _0x5a2537[_0x2a1175(0x116)];
        const _0x3aa2aa = {};
        _0x3aa2aa[_0x2a1175(0x119)] = _0x5d1598;
        const _0xf7cc6a = yield SettingZPRO_1[_0x2a1175(0x10d)][_0x2a1175(0x10f)](_0x3aa2aa), _0x3541f9 = _0x5a2537[_0x2a1175(0x12f)](_0x5a2537[_0x2a1175(0x12f)](_0xf7cc6a, null) || _0x5a2537[_0x2a1175(0x107)](_0xf7cc6a, void (0x1cd9 * 0x1 + 0x1 * 0x1847 + -0x64 * 0x88)) ? void (0x58e + 0x661 + 0x263 * -0x5) : _0xf7cc6a[_0x2a1175(0x13e)], _0x5a2537[_0x2a1175(0x15b)]), _0x27fd66 = {};
        _0x27fd66[_0x2a1175(0x112)] = _0x330aa6;
        let _0x20ea33 = _0x27fd66;
        if (_0x5a2537[_0x2a1175(0x107)](_0x27f147, _0x5a2537[_0x2a1175(0x11e)])) {
        } else {
            if (_0x5a2537[_0x2a1175(0x151)](_0x27f147, _0x5a2537[_0x2a1175(0x15d)])) {
                if (_0x5a2537[_0x2a1175(0x101)](_0x5a2537[_0x2a1175(0x101)](_0xf9f31a, null) || _0x5a2537[_0x2a1175(0xfc)](_0xf9f31a, void (-0x26 * 0x101 + 0x28 * 0x28 + 0x551 * 0x6)) ? void (0x78e * -0x4 + 0x1 * 0x15cd + 0x86b * 0x1) : _0xf9f31a[_0x2a1175(0xf7) + _0x2a1175(0x10b)], _0x5a2537[_0x2a1175(0x152)])) {
                } else
                    _0x20ea33[_0x2a1175(0x142)] = _0x25b07c;
            } else {
                if (_0x5a2537[_0x2a1175(0x122)](_0x27f147, _0x5a2537[_0x2a1175(0x132)])) {
                    if (_0x3541f9)
                        _0x20ea33[_0x2a1175(0x142)] = _0x25b07c;
                    else {
                    }
                }
            }
        }
        const _0x305dc1 = { [sequelize_1['Op'][_0x2a1175(0xf5)]]: '%' + _0x44368d + '%' }, _0x1a9fca = {};
        _0x1a9fca[_0x2a1175(0x118)] = _0x305dc1;
        const _0x62b32 = {};
        _0x62b32[_0x2a1175(0x123)] = TicketZPRO_1[_0x2a1175(0x10d)], _0x62b32[_0x2a1175(0x119)] = _0x20ea33, _0x62b32[_0x2a1175(0x15a)] = !![];
        const _0x5ffc6f = {};
        _0x5ffc6f[_0x2a1175(0x119)] = _0x1a9fca, _0x5ffc6f[_0x2a1175(0x131)] = [_0x62b32], _0x5ffc6f[_0x2a1175(0xf4)] = _0x227bcb, _0x5ffc6f[_0x2a1175(0x153)] = _0x3db251, _0x5ffc6f[_0x2a1175(0x120)] = [[
                _0x5a2537[_0x2a1175(0x137)],
                _0x5a2537[_0x2a1175(0x12d)]
            ]];
        const {
                count: _0x3c7dbd,
                rows: _0x163959
            } = yield MessageZPRO_1[_0x2a1175(0x10d)][_0x2a1175(0x13d) + _0x2a1175(0x135)](_0x5ffc6f), _0x25a902 = _0x163959[_0x2a1175(0x10c)](_0x1635d5 => ({
                'ticket': _0x1635d5[_0x2a1175(0x158)],
                'lastMessageTimestamp': _0x1635d5[_0x2a1175(0x105)][_0x2a1175(0x13c) + 'g']()
            }));
        return {
            'tickets': _0x25a902,
            'count': _0x3c7dbd,
            'hasMore': _0x5a2537[_0x2a1175(0xf8)](_0x3c7dbd, _0x5a2537[_0x2a1175(0x10a)](_0x3db251, _0x163959[_0x2a1175(0x14c)]))
        };
    });
exports[_0xaadf0c(0x10d)] = SearchMessagesService;