'use strict';
function _0x123e(_0x111689, _0x59ae76) {
    const _0x261487 = _0x2ada();
    return _0x123e = function (_0x48e68d, _0x1cff47) {
        _0x48e68d = _0x48e68d - (-0xceb + -0x1069 + 0x1e69);
        let _0x2dcefe = _0x261487[_0x48e68d];
        return _0x2dcefe;
    }, _0x123e(_0x111689, _0x59ae76);
}
function _0x2ada() {
    const _0x49e6d6 = [
        'fault',
        'ZPRO',
        'PRO',
        'nzHyQ',
        'ppNvS',
        '../../mode',
        '59571xBMIQC',
        'iqheT',
        'ge1r_zpro/',
        'xbj_zpro',
        '1861242KCuQiu',
        'ERR_CREATI',
        '6320368sLIMta',
        '4kORJup',
        'chat',
        'VmRBe',
        'contact',
        'include',
        '../../zltz',
        'aRYgH',
        'sequelize',
        'BYfRV',
        'rviceZPRO',
        'TqKVq',
        'quotedMsg',
        'update',
        'ticket',
        'Eyydo',
        '3845026BBbbvD',
        'defineProp',
        'where',
        '_SYSTEM',
        'ls/TicketZ',
        'OOZyx',
        'next',
        '1lBGfle',
        'ate',
        'ls/Message',
        'isGroup',
        '__importDe',
        'getTime',
        'idKzF',
        '910IXhbpc',
        'contactId',
        'VwowP',
        'RSDrp',
        'attributes',
        '8772480CPbKMA',
        'YGkcc',
        'pending',
        'rBmrS',
        'HSMmc',
        '14VCcbLY',
        'mowWi',
        'create',
        'done',
        'type',
        'findByPk',
        'VrqUa',
        'ervices/Sh',
        'apply',
        'body',
        'xZYCA',
        'AhLZj',
        'value',
        'pkWRm',
        '../TicketS',
        'JCzTb',
        'tenantId',
        'FlzNl',
        'whatsappId',
        'hsTRv',
        'gzhjY',
        'open',
        '__esModule',
        'UtLTC',
        'throw',
        'nvxdf',
        'KivKd',
        'whatsapp',
        'ZLDTu',
        'payload',
        'eJoSl',
        'VgKXF',
        'UYLBc',
        '__awaiter',
        '5265705SOerFB',
        'status',
        'mediaType',
        'createdAt',
        'chat:creat',
        'then',
        'erty',
        'NG_MESSAGE',
        'mHuli',
        'ticket:upd',
        'owTicketSe',
        'mediaName',
        'default',
        'model',
        'QulKE',
        'findOne',
        '30931439lSHxjQ'
    ];
    _0x2ada = function () {
        return _0x49e6d6;
    };
    return _0x2ada();
}
const _0x8e5220 = _0x123e;
(function (_0x4b98be, _0x452080) {
    const _0xad04ed = _0x123e, _0x29dafb = _0x4b98be();
    while (!![]) {
        try {
            const _0x2d83fe = -parseInt(_0xad04ed(0x158)) / (0x17d7 + -0x6ed * -0x1 + 0x5 * -0x627) * (-parseInt(_0xad04ed(0x151)) / (-0x623 * 0x2 + 0x1052 + -0xb * 0x5e)) + -parseInt(_0xad04ed(0x124)) / (-0x1fb6 + -0x13 * -0x20a + 0x257 * -0x3) * (-parseInt(_0xad04ed(0x142)) / (0x4e * -0x18 + 0x1a * -0x5 + 0x7d6)) + -parseInt(_0xad04ed(0x164)) / (-0x1132 + 0x5 * 0x3b8 + -0x1 * 0x161) + -parseInt(_0xad04ed(0x13f)) / (-0x21 * 0x8e + 0x146 * 0x9 + 0x24a * 0x3) + -parseInt(_0xad04ed(0x169)) / (-0xa2 * 0xf + 0x14d4 + -0xb4f) * (-parseInt(_0xad04ed(0x141)) / (-0x97 * -0x15 + -0xb * -0x33b + -0x2fe4)) + parseInt(_0xad04ed(0x13b)) / (-0xd8c + 0x2 * -0xeed + -0x2b6f * -0x1) * (parseInt(_0xad04ed(0x15f)) / (0x1600 + -0x130a * 0x2 + 0x101e)) + -parseInt(_0xad04ed(0x134)) / (-0x24a6 * -0x1 + 0xbb * 0x22 + -0x3d71);
            if (_0x2d83fe === _0x452080)
                break;
            else
                _0x29dafb['push'](_0x29dafb['shift']());
        } catch (_0x74dc7) {
            _0x29dafb['push'](_0x29dafb['shift']());
        }
    }
}(_0x2ada, -0x13acc + -0xbcc8d * -0x1 + 0x4701c));
var __awaiter = this && this[_0x8e5220(0x123)] || function (_0x384dc6, _0x46025d, _0x3871c5, _0x38ae3f) {
        const _0x41099c = _0x8e5220, _0x34f038 = {
                'QulKE': function (_0x48c892, _0x3a3c89) {
                    return _0x48c892(_0x3a3c89);
                },
                'VrqUa': function (_0x475306, _0xf71549) {
                    return _0x475306 instanceof _0xf71549;
                },
                'JCzTb': function (_0x27de2f, _0x200a1d) {
                    return _0x27de2f(_0x200a1d);
                },
                'VmRBe': function (_0x475c0f, _0x347d75) {
                    return _0x475c0f(_0x347d75);
                },
                'OOZyx': function (_0x1ec752, _0x2a70ae) {
                    return _0x1ec752(_0x2a70ae);
                },
                'ZLDTu': _0x41099c(0x11a),
                'nzHyQ': function (_0x383a1d, _0x1b5a0d) {
                    return _0x383a1d(_0x1b5a0d);
                }
            };
        function _0x3b19be(_0x1bc7f3) {
            const _0x5706b8 = _0x41099c, _0x2cec3f = {
                    'UtLTC': function (_0x6d65e2, _0x1c7d96) {
                        const _0x2b8583 = _0x123e;
                        return _0x34f038[_0x2b8583(0x132)](_0x6d65e2, _0x1c7d96);
                    }
                };
            return _0x34f038[_0x5706b8(0x16f)](_0x1bc7f3, _0x3871c5) ? _0x1bc7f3 : new _0x3871c5(function (_0x58c20f) {
                const _0x2cc2be = _0x5706b8;
                _0x2cec3f[_0x2cc2be(0x119)](_0x58c20f, _0x1bc7f3);
            });
        }
        return new (_0x3871c5 || (_0x3871c5 = Promise))(function (_0x246bfc, _0x2a8720) {
            const _0x2acf85 = _0x41099c, _0x24d643 = {
                    'xZYCA': function (_0x53fe2f, _0x2dae16) {
                        const _0x56fe9b = _0x123e;
                        return _0x34f038[_0x56fe9b(0x132)](_0x53fe2f, _0x2dae16);
                    },
                    'HSMmc': function (_0x465f71, _0x5e63b3) {
                        const _0x3ae8ce = _0x123e;
                        return _0x34f038[_0x3ae8ce(0x156)](_0x465f71, _0x5e63b3);
                    },
                    'gzhjY': _0x34f038[_0x2acf85(0x11e)],
                    'pkWRm': function (_0x3b91e4, _0x1ebcda) {
                        const _0x13f33 = _0x2acf85;
                        return _0x34f038[_0x13f33(0x178)](_0x3b91e4, _0x1ebcda);
                    }
                };
            function _0x484422(_0x263f11) {
                const _0x106c47 = _0x2acf85;
                try {
                    _0x24d643[_0x106c47(0x173)](_0x4c07ec, _0x38ae3f[_0x106c47(0x157)](_0x263f11));
                } catch (_0xb7aa18) {
                    _0x24d643[_0x106c47(0x168)](_0x2a8720, _0xb7aa18);
                }
            }
            function _0x581d45(_0x15c618) {
                const _0x1fe740 = _0x2acf85;
                try {
                    _0x24d643[_0x1fe740(0x168)](_0x4c07ec, _0x38ae3f[_0x24d643[_0x1fe740(0x116)]](_0x15c618));
                } catch (_0xe9d577) {
                    _0x24d643[_0x1fe740(0x176)](_0x2a8720, _0xe9d577);
                }
            }
            function _0x4c07ec(_0x34f42f) {
                const _0x3f0dbd = _0x2acf85;
                _0x34f42f[_0x3f0dbd(0x16c)] ? _0x34f038[_0x3f0dbd(0x178)](_0x246bfc, _0x34f42f[_0x3f0dbd(0x175)]) : _0x34f038[_0x3f0dbd(0x144)](_0x3b19be, _0x34f42f[_0x3f0dbd(0x175)])[_0x3f0dbd(0x129)](_0x484422, _0x581d45);
            }
            _0x34f038[_0x2acf85(0x138)](_0x4c07ec, (_0x38ae3f = _0x38ae3f[_0x2acf85(0x171)](_0x384dc6, _0x46025d || []))[_0x2acf85(0x157)]());
        });
    }, __importDefault = this && this[_0x8e5220(0x15c) + _0x8e5220(0x135)] || function (_0x1f5012) {
        const _0x112ce4 = _0x8e5220;
        return _0x1f5012 && _0x1f5012[_0x112ce4(0x118)] ? _0x1f5012 : { 'default': _0x1f5012 };
    };
const _0x2bb0a6 = {};
_0x2bb0a6[_0x8e5220(0x175)] = !![], Object[_0x8e5220(0x152) + _0x8e5220(0x12a)](exports, _0x8e5220(0x118), _0x2bb0a6);
const sequelize_1 = require(_0x8e5220(0x149)), xbj_zpro_1 = __importDefault(require(_0x8e5220(0x147) + _0x8e5220(0x13d) + _0x8e5220(0x13e))), MessageZPRO_1 = __importDefault(require(_0x8e5220(0x13a) + _0x8e5220(0x15a) + _0x8e5220(0x136))), TicketZPRO_1 = __importDefault(require(_0x8e5220(0x13a) + _0x8e5220(0x155) + _0x8e5220(0x137))), ShowTicketServiceZPRO_1 = __importDefault(require(_0x8e5220(0x177) + _0x8e5220(0x170) + _0x8e5220(0x12e) + _0x8e5220(0x14b))), CreateForwardMessageService = ({
        userId: _0x54a015,
        tenantId: _0x3fe839,
        message: _0x58911d,
        contact: _0x4ea288,
        ticketIdOrigin: _0x1803b3,
        channel: _0x41c24f
    }) => __awaiter(void (-0xc * 0x30b + 0x100c + -0x28f * -0x8), void (-0x1 * -0x1c6e + 0x26d1 + -0x139 * 0x37), void (0x1924 + -0xa1 + -0x1883), function* () {
        const _0x5cb63e = _0x8e5220, _0x43281f = {
                'rBmrS': _0x5cb63e(0x125),
                'Eyydo': _0x5cb63e(0x160),
                'idKzF': _0x5cb63e(0x17b),
                'iqheT': _0x5cb63e(0x179),
                'hsTRv': _0x5cb63e(0x127),
                'nvxdf': _0x5cb63e(0x117),
                'eJoSl': _0x5cb63e(0x166),
                'RSDrp': function (_0x3001f6, _0x6ccc89) {
                    return _0x3001f6(_0x6ccc89);
                },
                'VgKXF': function (_0x421688, _0x52c510) {
                    return _0x421688(_0x52c510);
                },
                'UYLBc': function (_0x458dfb, _0x192438) {
                    return _0x458dfb === _0x192438;
                },
                'ppNvS': function (_0x472904, _0x4b2732) {
                    return _0x472904 === _0x4b2732;
                },
                'AhLZj': function (_0x51179a, _0x52d74c) {
                    return _0x51179a === _0x52d74c;
                },
                'KivKd': function (_0x146134, _0x16bf07) {
                    return _0x146134 === _0x16bf07;
                },
                'aRYgH': function (_0x46781, _0x24e87e) {
                    return _0x46781 === _0x24e87e;
                },
                'FlzNl': _0x5cb63e(0x143),
                'BYfRV': _0x5cb63e(0x14f),
                'mHuli': _0x5cb63e(0x145),
                'YGkcc': _0x5cb63e(0x14d),
                'VwowP': _0x5cb63e(0x140) + _0x5cb63e(0x12b) + _0x5cb63e(0x154),
                'mowWi': _0x5cb63e(0x12d) + _0x5cb63e(0x159),
                'TqKVq': _0x5cb63e(0x128) + 'e'
            }, _0x3c5f86 = {};
        _0x3c5f86['id'] = _0x1803b3, _0x3c5f86[_0x5cb63e(0x179)] = _0x3fe839;
        const _0x567a44 = yield (0x58e + 0xb2c + -0x10ba, ShowTicketServiceZPRO_1[_0x5cb63e(0x130)])(_0x3c5f86);
        let _0x124a67;
        const _0x1961fe = {};
        _0x1961fe[_0x5cb63e(0x163)] = [
            'id',
            _0x43281f[_0x5cb63e(0x167)],
            _0x43281f[_0x5cb63e(0x150)],
            _0x43281f[_0x5cb63e(0x15e)],
            _0x43281f[_0x5cb63e(0x13c)],
            _0x43281f[_0x5cb63e(0x115)]
        ], _0x1961fe[_0x5cb63e(0x153)] = {}, _0x1961fe[_0x5cb63e(0x153)][_0x5cb63e(0x125)] = {
            [sequelize_1['Op']['or']]: [
                _0x43281f[_0x5cb63e(0x11b)],
                _0x43281f[_0x5cb63e(0x120)]
            ]
        }, _0x1961fe[_0x5cb63e(0x153)][_0x5cb63e(0x179)] = _0x3fe839, _0x1961fe[_0x5cb63e(0x153)][_0x5cb63e(0x160)] = _0x4ea288['id'], _0x1961fe[_0x5cb63e(0x153)][_0x5cb63e(0x17b)] = _0x567a44[_0x5cb63e(0x11d)]['id'], _0x124a67 = yield TicketZPRO_1[_0x5cb63e(0x130)][_0x5cb63e(0x133)](_0x1961fe);
        !_0x124a67 && (_0x124a67 = yield TicketZPRO_1[_0x5cb63e(0x130)][_0x5cb63e(0x16b)]({
            'contactId': _0x4ea288['id'],
            'status': _0x43281f[_0x5cb63e(0x11b)],
            'isGroup': _0x4ea288[_0x5cb63e(0x15b)],
            'userId': _0x43281f[_0x5cb63e(0x162)](Number, _0x54a015),
            'tenantId': _0x43281f[_0x5cb63e(0x121)](Number, _0x3fe839),
            'unreadMessages': 0x0,
            'whatsappId': _0x567a44[_0x5cb63e(0x17b)],
            'lastMessage': _0x58911d[_0x5cb63e(0x172)],
            'lastMessageAt': new Date()[_0x5cb63e(0x15d)](),
            'answered': !![],
            'channel': _0x41c24f
        }));
        const _0x18ba05 = {
                'body': _0x58911d[_0x5cb63e(0x172)],
                'contactId': _0x4ea288['id'],
                'fromMe': !![],
                'read': !![],
                'mediaType': _0x43281f[_0x5cb63e(0x122)](_0x58911d, null) || _0x43281f[_0x5cb63e(0x139)](_0x58911d, void (0x1 * 0x1eee + 0xbef + -0x1 * 0x2add)) ? void (-0x3a6 * 0x1 + 0x1edd * 0x1 + -0x1b37 * 0x1) : _0x58911d[_0x5cb63e(0x126)],
                'mediaUrl': _0x43281f[_0x5cb63e(0x174)](_0x58911d, null) || _0x43281f[_0x5cb63e(0x11c)](_0x58911d, void (-0x223 * 0xa + 0x262b + -0x10cd)) ? void (-0x195b + 0x7 * 0x3c7 + -0x8b * 0x2) : _0x58911d[_0x5cb63e(0x12f)],
                'mediaName': _0x43281f[_0x5cb63e(0x148)](_0x58911d, null) || _0x43281f[_0x5cb63e(0x148)](_0x58911d, void (-0x1d0b + -0xab * 0x16 + 0x2bbd * 0x1)) ? void (-0x255e + -0x1 * -0x158f + -0x13 * -0xd5) : _0x58911d[_0x5cb63e(0x12f)],
                'timestamp': new Date()[_0x5cb63e(0x15d)](),
                'userId': _0x54a015,
                'scheduleDate': null,
                'sendType': _0x43281f[_0x5cb63e(0x17a)],
                'status': _0x43281f[_0x5cb63e(0x120)],
                'ticketId': _0x124a67['id'],
                'tenantId': _0x3fe839
            }, _0x2ce38f = yield MessageZPRO_1[_0x5cb63e(0x130)][_0x5cb63e(0x16b)](_0x18ba05), _0x24d2a = {};
        _0x24d2a[_0x5cb63e(0x179)] = _0x3fe839;
        const _0x1b7375 = {};
        _0x1b7375[_0x5cb63e(0x131)] = TicketZPRO_1[_0x5cb63e(0x130)], _0x1b7375['as'] = _0x43281f[_0x5cb63e(0x14a)], _0x1b7375[_0x5cb63e(0x153)] = _0x24d2a, _0x1b7375[_0x5cb63e(0x146)] = [_0x43281f[_0x5cb63e(0x12c)]];
        const _0x5c3892 = yield MessageZPRO_1[_0x5cb63e(0x130)][_0x5cb63e(0x16e)](_0x2ce38f['id'], {
            'include': [
                _0x1b7375,
                {
                    'model': MessageZPRO_1[_0x5cb63e(0x130)],
                    'as': _0x43281f[_0x5cb63e(0x165)],
                    'include': [_0x43281f[_0x5cb63e(0x12c)]]
                }
            ]
        });
        if (!_0x5c3892)
            throw new Error(_0x43281f[_0x5cb63e(0x161)]);
        yield _0x124a67[_0x5cb63e(0x14e)]({
            'lastMessage': _0x5c3892[_0x5cb63e(0x172)],
            'lastMessageAt': new Date()[_0x5cb63e(0x15d)](),
            'answered': !![]
        });
        const _0x392cd6 = {};
        _0x392cd6[_0x5cb63e(0x179)] = _0x124a67[_0x5cb63e(0x179)], _0x392cd6[_0x5cb63e(0x16d)] = _0x43281f[_0x5cb63e(0x16a)], _0x392cd6[_0x5cb63e(0x11f)] = _0x124a67, (-0xf7 * -0x1d + -0x7c9 * 0x1 + -0x1432, xbj_zpro_1[_0x5cb63e(0x130)])(_0x392cd6);
        const _0x2bd1c5 = {};
        _0x2bd1c5[_0x5cb63e(0x179)] = _0x3fe839, _0x2bd1c5[_0x5cb63e(0x16d)] = _0x43281f[_0x5cb63e(0x14c)], _0x2bd1c5[_0x5cb63e(0x11f)] = _0x5c3892, (0x19dd + 0x2 * -0x109e + 0x3 * 0x275, xbj_zpro_1[_0x5cb63e(0x130)])(_0x2bd1c5);
    });
exports[_0x8e5220(0x130)] = CreateForwardMessageService;