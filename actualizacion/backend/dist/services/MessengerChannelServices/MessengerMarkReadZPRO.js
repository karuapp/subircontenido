'use strict';
const _0x1fe242 = _0x25cc;
(function (_0x235e51, _0x120ea4) {
    const _0x593296 = _0x25cc, _0x1d3fc0 = _0x235e51();
    while (!![]) {
        try {
            const _0x2976e9 = -parseInt(_0x593296(0xbd)) / (0x26e6 + -0x1 * 0x1c87 + -0xa5e) * (parseInt(_0x593296(0x96)) / (0x1 * 0x775 + 0x127 + -0x89a)) + parseInt(_0x593296(0x9f)) / (-0x1b47 + 0xb1d + 0x102d) + -parseInt(_0x593296(0xa8)) / (0x1ef2 + -0x2 * -0x504 + 0x31 * -0xd6) + parseInt(_0x593296(0xc4)) / (-0x1 * -0xd8d + -0x583 + -0x805) * (parseInt(_0x593296(0xb9)) / (-0xf * 0x19a + 0x8 * -0x417 + -0x1c62 * -0x2)) + parseInt(_0x593296(0xb7)) / (-0x1e45 + -0x6cc + 0x2518) * (-parseInt(_0x593296(0x9c)) / (0x1b * 0x104 + 0x1d9f + -0x15 * 0x2b7)) + parseInt(_0x593296(0xa5)) / (0x148b + -0x615 * -0x4 + 0x2 * -0x166b) + -parseInt(_0x593296(0xa0)) / (-0x1 * -0x178 + -0x1bb7 + 0x1a49) * (-parseInt(_0x593296(0xcd)) / (0x9d9 * 0x2 + 0x92b + 0x22 * -0xd9));
            if (_0x2976e9 === _0x120ea4)
                break;
            else
                _0x1d3fc0['push'](_0x1d3fc0['shift']());
        } catch (_0x4e6b86) {
            _0x1d3fc0['push'](_0x1d3fc0['shift']());
        }
    }
}(_0x297d, -0x39 * 0x421c + -0x16a23 * -0xd + 0xa9f00));
var __awaiter = this && this[_0x1fe242(0xad)] || function (_0x488ab9, _0x1c81b2, _0x20eafc, _0x5a4dba) {
        const _0x483df1 = _0x1fe242, _0x5b461e = {
                'uwWWS': function (_0x5f5188, _0x1284d0) {
                    return _0x5f5188(_0x1284d0);
                },
                'LoBrQ': function (_0x1a12b5, _0x4e2082) {
                    return _0x1a12b5 instanceof _0x4e2082;
                },
                'cpPGH': function (_0x501a3b, _0x3743b9) {
                    return _0x501a3b(_0x3743b9);
                },
                'qjfSl': _0x483df1(0xa2),
                'cqsis': function (_0x53d802, _0x226053) {
                    return _0x53d802(_0x226053);
                },
                'UjkXg': function (_0x2a68c8, _0x11ed0f) {
                    return _0x2a68c8(_0x11ed0f);
                }
            };
        function _0x5b2da8(_0x187c57) {
            const _0x2f18cf = _0x483df1, _0x43e76a = {
                    'HZHJz': function (_0x17241c, _0x10d427) {
                        const _0x5cd48b = _0x25cc;
                        return _0x5b461e[_0x5cd48b(0xb4)](_0x17241c, _0x10d427);
                    }
                };
            return _0x5b461e[_0x2f18cf(0xb5)](_0x187c57, _0x20eafc) ? _0x187c57 : new _0x20eafc(function (_0x3aa432) {
                const _0xa58d39 = _0x2f18cf;
                _0x43e76a[_0xa58d39(0x93)](_0x3aa432, _0x187c57);
            });
        }
        return new (_0x20eafc || (_0x20eafc = Promise))(function (_0x4b5a26, _0x143d55) {
            const _0x2c2d23 = _0x483df1, _0x50ea75 = {
                    'Utngn': function (_0x46c702, _0x39fdb0) {
                        const _0x121fd9 = _0x25cc;
                        return _0x5b461e[_0x121fd9(0xb4)](_0x46c702, _0x39fdb0);
                    }
                };
            function _0x42aa81(_0x3d737e) {
                const _0x64f0c3 = _0x25cc;
                try {
                    _0x50ea75[_0x64f0c3(0xc9)](_0x427eb6, _0x5a4dba[_0x64f0c3(0xc3)](_0x3d737e));
                } catch (_0x541297) {
                    _0x50ea75[_0x64f0c3(0xc9)](_0x143d55, _0x541297);
                }
            }
            function _0x387576(_0x1091be) {
                const _0x634858 = _0x25cc;
                try {
                    _0x5b461e[_0x634858(0xc1)](_0x427eb6, _0x5a4dba[_0x5b461e[_0x634858(0x95)]](_0x1091be));
                } catch (_0x10185d) {
                    _0x5b461e[_0x634858(0x98)](_0x143d55, _0x10185d);
                }
            }
            function _0x427eb6(_0x4c7551) {
                const _0x2660d0 = _0x25cc;
                _0x4c7551[_0x2660d0(0x97)] ? _0x5b461e[_0x2660d0(0xc5)](_0x4b5a26, _0x4c7551[_0x2660d0(0xc0)]) : _0x5b461e[_0x2660d0(0xb4)](_0x5b2da8, _0x4c7551[_0x2660d0(0xc0)])[_0x2660d0(0xca)](_0x42aa81, _0x387576);
            }
            _0x5b461e[_0x2c2d23(0xc1)](_0x427eb6, (_0x5a4dba = _0x5a4dba[_0x2c2d23(0xb1)](_0x488ab9, _0x1c81b2 || []))[_0x2c2d23(0xc3)]());
        });
    }, __importDefault = this && this[_0x1fe242(0xb0) + _0x1fe242(0xc6)] || function (_0x3d0e1b) {
        const _0x55bae7 = _0x1fe242;
        return _0x3d0e1b && _0x3d0e1b[_0x55bae7(0xcc)] ? _0x3d0e1b : { 'default': _0x3d0e1b };
    };
function _0x297d() {
    const _0x14fe71 = [
        'fsPqf',
        'erty',
        'value',
        'cpPGH',
        'jXcGf',
        'next',
        '4379465woSyRj',
        'UjkXg',
        'fault',
        'update',
        'watermark',
        'Utngn',
        'then',
        'dataValues',
        '__esModule',
        '11uiErUv',
        'lte',
        'HZHJz',
        'ack',
        'qjfSl',
        '4CYKzxg',
        'done',
        'cqsis',
        'sended',
        '../../mode',
        'sequelize',
        '1123608IigPsf',
        'ZPRO',
        'ge1r_zpro/',
        '962700xWcDpi',
        '10324310qJzWVy',
        'messageId',
        'throw',
        'ls/Message',
        'assign',
        '14046615GeHzGJ',
        'chat:ack',
        '../../zltz',
        '1706272uWlzCc',
        'PRO',
        'xbj_zpro',
        'mediaUrl',
        'ls/TicketZ',
        '__awaiter',
        'map',
        'read',
        '__importDe',
        'apply',
        'ls/Contact',
        'default',
        'uwWWS',
        'LoBrQ',
        'all',
        '42FaSYbB',
        'sender',
        '6gcbsZn',
        'defineProp',
        'findAll',
        'timestamp',
        '792049aCinTO'
    ];
    _0x297d = function () {
        return _0x14fe71;
    };
    return _0x297d();
}
const _0x25583f = {};
_0x25583f[_0x1fe242(0xc0)] = !![], Object[_0x1fe242(0xba) + _0x1fe242(0xbf)](exports, _0x1fe242(0xcc), _0x25583f);
function _0x25cc(_0x2083a2, _0x570a69) {
    const _0x194bc5 = _0x297d();
    return _0x25cc = function (_0x25a2ae, _0xe0d6) {
        _0x25a2ae = _0x25a2ae - (-0x20bd + -0x2046 + 0x4195);
        let _0x2ef376 = _0x194bc5[_0x25a2ae];
        return _0x2ef376;
    }, _0x25cc(_0x2083a2, _0x570a69);
}
const sequelize_1 = require(_0x1fe242(0x9b)), xbj_zpro_1 = __importDefault(require(_0x1fe242(0xa7) + _0x1fe242(0x9e) + _0x1fe242(0xaa))), ContactZPRO_1 = __importDefault(require(_0x1fe242(0x9a) + _0x1fe242(0xb2) + _0x1fe242(0x9d))), MessageZPRO_1 = __importDefault(require(_0x1fe242(0x9a) + _0x1fe242(0xa3) + _0x1fe242(0x9d))), TicketZPRO_1 = __importDefault(require(_0x1fe242(0x9a) + _0x1fe242(0xac) + _0x1fe242(0xa9))), MessengerMarkRead = (_0x34b4f4, _0x517a15) => __awaiter(void (-0x62 * -0x35 + -0x26a * 0xd + 0xb18), void (0x2075 + -0x21d4 + 0x1 * 0x15f), void (-0x1792 + 0x1e43 + -0x1 * 0x6b1), function* () {
        const _0x21f9ad = _0x1fe242, _0x17a890 = {};
        _0x17a890[_0x21f9ad(0xbe)] = _0x21f9ad(0xa6), _0x17a890[_0x21f9ad(0xc2)] = _0x21f9ad(0x99);
        const _0x392dad = _0x17a890, _0x9d9921 = yield MessageZPRO_1[_0x21f9ad(0xb3)][_0x21f9ad(0xbb)]({
                'where': {
                    'tenantId': _0x517a15,
                    'createdAt': { [sequelize_1['Op'][_0x21f9ad(0x92)]]: new Date(_0x34b4f4[_0x21f9ad(0xaf)][_0x21f9ad(0xc8)]) },
                    'fromMe': !![],
                    'ack': {
                        [sequelize_1['Op']['in']]: [
                            -0x1e8 * 0x2 + -0x5a3 * 0x4 + -0x11 * -0x18d,
                            0x86 * -0x24 + -0x1b03 * 0x1 + -0x3b * -0xc7
                        ]
                    }
                },
                'include': [{
                        'model': TicketZPRO_1[_0x21f9ad(0xb3)],
                        'where': { 'tenantId': _0x517a15 },
                        'include': [{
                                'model': ContactZPRO_1[_0x21f9ad(0xb3)],
                                'where': {
                                    'tenantId': _0x517a15,
                                    'messengerId': _0x34b4f4[_0x21f9ad(0xb8)]['id']
                                }
                            }]
                    }]
            });
        yield Promise[_0x21f9ad(0xb6)](_0x9d9921[_0x21f9ad(0xae)](_0x1d65b9 => __awaiter(void (0x2dd * -0xb + -0x85 * 0x3b + 0xd7 * 0x4a), void (0x2639 + -0x1b20 + -0xb19), void (0x924 + 0x13b * -0x2 + -0x6ae), function* () {
            const _0x183ed2 = _0x21f9ad, _0x29eae2 = {};
            _0x29eae2[_0x183ed2(0x94)] = 0x3, yield _0x1d65b9[_0x183ed2(0xc7)](_0x29eae2), (0x8 * -0x75 + 0x2 * 0x60 + 0x2e8, xbj_zpro_1[_0x183ed2(0xb3)])({
                'tenantId': _0x517a15,
                'type': _0x392dad[_0x183ed2(0xbe)],
                'payload': Object[_0x183ed2(0xa4)](Object[_0x183ed2(0xa4)]({}, _0x1d65b9[_0x183ed2(0xcb)]), {
                    'mediaUrl': _0x1d65b9[_0x183ed2(0xab)],
                    'id': _0x1d65b9['id'],
                    'timestamp': _0x1d65b9[_0x183ed2(0xbc)],
                    'messageId': _0x1d65b9[_0x183ed2(0xa1)],
                    'status': _0x392dad[_0x183ed2(0xc2)],
                    'ack': 0x3
                })
            });
        })));
    });
exports[_0x1fe242(0xb3)] = MessengerMarkRead;