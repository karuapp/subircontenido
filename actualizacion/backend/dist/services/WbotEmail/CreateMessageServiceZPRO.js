'use strict';
function _0x33d9() {
    const _0x62a920 = [
        'BaDiS',
        '\x20webmail\x20m',
        'subject',
        'ERR_CREATI',
        'JXGzq',
        'hSZqu',
        'iui_zpro',
        'ls/Message',
        '../../mode',
        'hq_zpro/fx',
        'update',
        'essage\x20exi',
        'huikh',
        '88OUJKZX',
        'KMdkh',
        'idFront',
        'quotedMsg',
        'fzSrY',
        'tenantId',
        'channel',
        '8DobXzs',
        'euxYC',
        'erty',
        'mIIdT',
        '46771lYqPqK',
        'contactId',
        'error',
        'photo',
        'apply',
        'throw',
        'messageId',
        'timestamp',
        'getTime',
        'ls/Contact',
        'payload',
        'next',
        '510936KfTHrO',
        'userId',
        'RqvBO',
        'nqDNI',
        '../../zltz',
        'spYPa',
        'sts',
        'body',
        'length',
        'xbj_zpro',
        'type',
        'toString',
        'findOne',
        '28965lGMMBl',
        'name',
        'user',
        'ticketId',
        'cIigh',
        'where',
        '418556cAFyDi',
        'qTpHg',
        'default',
        'uuid',
        'Nxcpo',
        'dECAz',
        'PRO',
        'fromMe',
        'xDCxD',
        '__esModule',
        'warn',
        'log',
        'ack',
        'value',
        'sended',
        'scheduleDa',
        'mediaType',
        'MRYYu',
        'XXtkj',
        'read',
        'info',
        'contact',
        'mediaUrl',
        'then',
        'fault',
        ':::\x20WHATITAN\x20',
        'ls/UserZPR',
        '__importDe',
        'ZPRO',
        'chat:creat',
        'defineProp',
        '18fOVAbA',
        'logger',
        ':\x20Creating',
        'RaNVO',
        'ZDOLX',
        'rIdxa',
        '_SYSTEM\x202',
        'Lacxg',
        'aJWQH',
        'status',
        'UBdfk',
        '293916sBSjad',
        'NG_MESSAGE',
        '4ZhYenM',
        'done',
        'ge1r_zpro/',
        ':::\x20WHATITAN\x20::',
        '862778dDpfKe',
        '24TPLsWs',
        'ticket',
        '1545540qoBsnd',
        'emailId',
        'jnCOE',
        'ls/TicketZ',
        'model',
        'dqYsI',
        'eQjaH',
        'findByPk',
        '../../qozl',
        'essage\x20',
        '__awaiter',
        'TUiRX',
        'include',
        ':\x20e8',
        'image',
        'hFaWK',
        'create'
    ];
    _0x33d9 = function () {
        return _0x62a920;
    };
    return _0x33d9();
}
const _0x50cccf = _0x1448;
function _0x1448(_0x53c6e2, _0xf4fd26) {
    const _0x34bf04 = _0x33d9();
    return _0x1448 = function (_0x3f913e, _0xa27d08) {
        _0x3f913e = _0x3f913e - (-0x4d5 * -0x5 + -0x1a86 * 0x1 + -0x4 * -0xbc);
        let _0x4548dc = _0x34bf04[_0x3f913e];
        return _0x4548dc;
    }, _0x1448(_0x53c6e2, _0xf4fd26);
}
(function (_0x511ae4, _0x5b5848) {
    const _0x36f90b = _0x1448, _0x1ed096 = _0x511ae4();
    while (!![]) {
        try {
            const _0x36756d = -parseInt(_0x36f90b(0xe3)) / (-0x20 * -0xfb + -0x1ba * 0x2 + -0x1beb) * (-parseInt(_0x36f90b(0xb3)) / (-0x14b * -0x1b + -0x1 * -0x2162 + -0x4449 * 0x1)) + -parseInt(_0x36f90b(0xef)) / (0xc43 * -0x1 + -0x9 * -0x5f + 0x8ef) + -parseInt(_0x36f90b(0x102)) / (-0x1 * -0x23df + 0x3 * 0xc5e + 0x13 * -0x3d7) + parseInt(_0x36f90b(0xfc)) / (0x5b * 0x3a + 0x2035 + -0x34ce) * (-parseInt(_0x36f90b(0xb8)) / (0x1d88 + 0xc7d + 0x33b * -0xd)) + parseInt(_0x36f90b(0xb7)) / (-0x14e9 * 0x1 + 0x4cb * -0x2 + 0x1e86) * (-parseInt(_0x36f90b(0xdf)) / (-0x1d * 0xed + -0x175f + 0x3240)) + parseInt(_0x36f90b(0xa6)) / (0x109 * -0x19 + -0x1 * 0x692 + -0x2c * -0xbd) * (parseInt(_0x36f90b(0xba)) / (0x49 * -0x77 + -0x61a + 0x1 * 0x2813)) + parseInt(_0x36f90b(0xd8)) / (-0x22bb + 0x66 + 0x2260) * (parseInt(_0x36f90b(0xb1)) / (0x1 * 0x139 + 0x1c1d + 0xea5 * -0x2));
            if (_0x36756d === _0x5b5848)
                break;
            else
                _0x1ed096['push'](_0x1ed096['shift']());
        } catch (_0x179cb8) {
            _0x1ed096['push'](_0x1ed096['shift']());
        }
    }
}(_0x33d9, -0x49884 + -0x2a69a + 0x9f35f));
var __awaiter = this && this[_0x50cccf(0xc4)] || function (_0x244cfb, _0x2296c3, _0x2c0dd5, _0x41e7ba) {
        const _0x100a65 = _0x50cccf, _0x5d468a = {
                'aJWQH': function (_0x19b986, _0x1c5468) {
                    return _0x19b986(_0x1c5468);
                },
                'spYPa': function (_0x314548, _0x47ac1e) {
                    return _0x314548 instanceof _0x47ac1e;
                },
                'xDCxD': function (_0x349a1d, _0x3e6309) {
                    return _0x349a1d(_0x3e6309);
                },
                'JXGzq': _0x100a65(0xe8),
                'UBdfk': function (_0x464bbe, _0x144036) {
                    return _0x464bbe(_0x144036);
                },
                'mIIdT': function (_0x38275c, _0x1ec8df) {
                    return _0x38275c(_0x1ec8df);
                },
                'rIdxa': function (_0x2b2569, _0x3922ed) {
                    return _0x2b2569(_0x3922ed);
                }
            };
        function _0x36c36a(_0x2e5dff) {
            const _0x401228 = _0x100a65;
            return _0x5d468a[_0x401228(0xf4)](_0x2e5dff, _0x2c0dd5) ? _0x2e5dff : new _0x2c0dd5(function (_0x5c489f) {
                const _0xb9c2eb = _0x401228;
                _0x5d468a[_0xb9c2eb(0xae)](_0x5c489f, _0x2e5dff);
            });
        }
        return new (_0x2c0dd5 || (_0x2c0dd5 = Promise))(function (_0x2ad0c8, _0x35a7da) {
            const _0x53f767 = _0x100a65, _0x1d0ea0 = {
                    'RqvBO': function (_0xd64feb, _0x54a084) {
                        const _0x52edd4 = _0x1448;
                        return _0x5d468a[_0x52edd4(0xe2)](_0xd64feb, _0x54a084);
                    }
                };
            function _0x3a1568(_0x3b2da6) {
                const _0x459041 = _0x1448;
                try {
                    _0x1d0ea0[_0x459041(0xf1)](_0xd5ee52, _0x41e7ba[_0x459041(0xee)](_0x3b2da6));
                } catch (_0x516a8c) {
                    _0x1d0ea0[_0x459041(0xf1)](_0x35a7da, _0x516a8c);
                }
            }
            function _0x1f3143(_0x3ebf0e) {
                const _0x2a21b2 = _0x1448;
                try {
                    _0x5d468a[_0x2a21b2(0x10a)](_0xd5ee52, _0x41e7ba[_0x5d468a[_0x2a21b2(0xcf)]](_0x3ebf0e));
                } catch (_0x1f23f3) {
                    _0x5d468a[_0x2a21b2(0xb0)](_0x35a7da, _0x1f23f3);
                }
            }
            function _0xd5ee52(_0x3ebe6d) {
                const _0x1e246a = _0x1448;
                _0x3ebe6d[_0x1e246a(0xb4)] ? _0x1d0ea0[_0x1e246a(0xf1)](_0x2ad0c8, _0x3ebe6d[_0x1e246a(0x94)]) : _0x1d0ea0[_0x1e246a(0xf1)](_0x36c36a, _0x3ebe6d[_0x1e246a(0x94)])[_0x1e246a(0x9e)](_0x3a1568, _0x1f3143);
            }
            _0x5d468a[_0x53f767(0xab)](_0xd5ee52, (_0x41e7ba = _0x41e7ba[_0x53f767(0xe7)](_0x244cfb, _0x2296c3 || []))[_0x53f767(0xee)]());
        });
    }, __importDefault = this && this[_0x50cccf(0xa2) + _0x50cccf(0x9f)] || function (_0x217bb7) {
        const _0x52711d = _0x50cccf;
        return _0x217bb7 && _0x217bb7[_0x52711d(0x10b)] ? _0x217bb7 : { 'default': _0x217bb7 };
    };
const _0x26af13 = {};
_0x26af13[_0x50cccf(0x94)] = !![], Object[_0x50cccf(0xa5) + _0x50cccf(0xe1)](exports, _0x50cccf(0x10b), _0x26af13);
const MessageZPRO_1 = __importDefault(require(_0x50cccf(0xd3) + _0x50cccf(0xd2) + _0x50cccf(0xa3))), fxiui_zpro_1 = require(_0x50cccf(0xc2) + _0x50cccf(0xd4) + _0x50cccf(0xd1)), xbj_zpro_1 = __importDefault(require(_0x50cccf(0xf3) + _0x50cccf(0xb5) + _0x50cccf(0xf8))), uuid_1 = require(_0x50cccf(0x105)), TicketZPRO_1 = __importDefault(require(_0x50cccf(0xd3) + _0x50cccf(0xbd) + _0x50cccf(0x108))), UserZPRO_1 = __importDefault(require(_0x50cccf(0xd3) + _0x50cccf(0xa1) + 'O')), ContactZPRO_1 = __importDefault(require(_0x50cccf(0xd3) + _0x50cccf(0xec) + _0x50cccf(0xa3))), CreateMessageService = _0x464c39 => __awaiter(void (0x1 * -0x104b + 0x58 * -0x6 + 0x125b), void (0x1 * -0x1369 + 0x5 * 0x398 + 0x7b * 0x3), void (-0x940 * -0x2 + 0x1b5c + -0x24b * 0x14), function* () {
        const _0x5b31f8 = _0x50cccf, _0x418448 = {};
        _0x418448[_0x5b31f8(0xdc)] = _0x5b31f8(0xa0) + _0x5b31f8(0xb6) + _0x5b31f8(0xa8) + _0x5b31f8(0xcc) + _0x5b31f8(0xc3), _0x418448[_0x5b31f8(0xf2)] = _0x5b31f8(0xa0) + _0x5b31f8(0xb6) + _0x5b31f8(0xa8) + _0x5b31f8(0xcc) + _0x5b31f8(0xd6) + _0x5b31f8(0xf5), _0x418448[_0x5b31f8(0xbf)] = function (_0x2a356b, _0x4a99b6) {
            return _0x2a356b === _0x4a99b6;
        }, _0x418448[_0x5b31f8(0xd7)] = function (_0xb39184, _0x2acbb5) {
            return _0xb39184 === _0x2acbb5;
        }, _0x418448[_0x5b31f8(0x103)] = _0x5b31f8(0x95), _0x418448[_0x5b31f8(0x107)] = function (_0x5d2bf8, _0x13d282) {
            return _0x5d2bf8 === _0x13d282;
        }, _0x418448[_0x5b31f8(0xd0)] = _0x5b31f8(0xe6), _0x418448[_0x5b31f8(0x98)] = _0x5b31f8(0xc8), _0x418448[_0x5b31f8(0x106)] = _0x5b31f8(0xb9), _0x418448[_0x5b31f8(0xa9)] = _0x5b31f8(0x9c), _0x418448[_0x5b31f8(0xcb)] = _0x5b31f8(0xdb), _0x418448[_0x5b31f8(0xaa)] = _0x5b31f8(0xfe), _0x418448[_0x5b31f8(0xad)] = _0x5b31f8(0xfd), _0x418448[_0x5b31f8(0xe0)] = function (_0xcb500d, _0x40d289) {
            return _0xcb500d >= _0x40d289;
        }, _0x418448[_0x5b31f8(0xd9)] = function (_0x47c051, _0x6bf51c) {
            return _0x47c051 === _0x6bf51c;
        }, _0x418448[_0x5b31f8(0x99)] = _0x5b31f8(0xe5), _0x418448[_0x5b31f8(0xc9)] = _0x5b31f8(0xce) + _0x5b31f8(0xb2) + _0x5b31f8(0xac), _0x418448[_0x5b31f8(0xc5)] = function (_0x4d1ddc, _0x38952b) {
            return _0x4d1ddc === _0x38952b;
        }, _0x418448[_0x5b31f8(0x100)] = _0x5b31f8(0xa4) + 'e', _0x418448[_0x5b31f8(0xbc)] = function (_0x8af20d, _0x46a110) {
            return _0x8af20d + _0x46a110;
        }, _0x418448[_0x5b31f8(0xc0)] = _0x5b31f8(0xa0) + _0x5b31f8(0xb6) + _0x5b31f8(0xc7);
        const _0x24c1b4 = _0x418448;
        var _0x48d389, _0x4dc76b;
        fxiui_zpro_1[_0x5b31f8(0xa7)][_0x5b31f8(0x9b)](_0x24c1b4[_0x5b31f8(0xdc)]);
        const _0x5b0ca6 = {};
        _0x5b0ca6[_0x5b31f8(0xe9)] = _0x464c39['id'], _0x5b0ca6[_0x5b31f8(0xdd)] = _0x464c39[_0x5b31f8(0xdd)];
        const _0x304b49 = {};
        _0x304b49[_0x5b31f8(0x101)] = _0x5b0ca6;
        const _0x27fdd8 = yield MessageZPRO_1[_0x5b31f8(0x104)][_0x5b31f8(0xfb)](_0x304b49);
        if (_0x27fdd8) {
            fxiui_zpro_1[_0x5b31f8(0xa7)][_0x5b31f8(0x9b)](_0x24c1b4[_0x5b31f8(0xf2)]);
            return;
        }
        const {
            id: _0x427034,
            contactId: _0x488a42,
            body: _0x3bf7da,
            ticketId: _0x2ff3e0,
            fromMe: _0x450574,
            tenantId: _0x47c9c0,
            fileName: _0x3c0928,
            mediaType: _0x21c164,
            originalName: _0x366553,
            scheduleDate: _0x4b7d39,
            ack: _0x501de9,
            userId: _0x1412a0
        } = _0x464c39;
        if ((!_0x3bf7da || _0x24c1b4[_0x5b31f8(0xbf)](_0x3bf7da, '')) && (!_0x3c0928 || _0x24c1b4[_0x5b31f8(0xd7)](_0x3c0928, '')))
            return;
        const _0x1047c4 = (0x3e5 * -0x4 + 0x1c * -0x86 + 0x1e3c, uuid_1['v4'])(), _0x4c4b0b = {};
        _0x4c4b0b[_0x5b31f8(0xe4)] = _0x488a42, _0x4c4b0b[_0x5b31f8(0xf6)] = _0x3bf7da, _0x4c4b0b[_0x5b31f8(0xff)] = _0x2ff3e0, _0x4c4b0b[_0x5b31f8(0x109)] = _0x450574, _0x4c4b0b[_0x5b31f8(0xdd)] = _0x47c9c0, _0x4c4b0b[_0x5b31f8(0xe9)] = _0x427034, _0x4c4b0b[_0x5b31f8(0x93)] = 0x2, _0x4c4b0b[_0x5b31f8(0xaf)] = _0x24c1b4[_0x5b31f8(0x103)], _0x4c4b0b[_0x5b31f8(0xda)] = _0x1047c4, _0x4c4b0b[_0x5b31f8(0x9a)] = ![], _0x4c4b0b[_0x5b31f8(0x96) + 'te'] = _0x4b7d39, _0x4c4b0b[_0x5b31f8(0xf0)] = _0x1412a0;
        const _0x3ff47c = _0x4c4b0b;
        _0x464c39[_0x5b31f8(0xcd)] && (_0x3ff47c[_0x5b31f8(0xcd)] = _0x464c39[_0x5b31f8(0xcd)]);
        _0x464c39[_0x5b31f8(0xbb)] && (_0x3ff47c[_0x5b31f8(0xbb)] = _0x464c39[_0x5b31f8(0xbb)]);
        _0x464c39[_0x5b31f8(0xde)] && (_0x3ff47c[_0x5b31f8(0xde)] = _0x464c39[_0x5b31f8(0xde)]);
        _0x3c0928 && (_0x3ff47c[_0x5b31f8(0x9d)] = _0x3c0928, _0x3ff47c[_0x5b31f8(0x97)] = _0x24c1b4[_0x5b31f8(0x107)](_0x21c164, _0x24c1b4[_0x5b31f8(0xd0)]) ? _0x24c1b4[_0x5b31f8(0x98)] : _0x21c164);
        try {
            const _0x418a2a = yield MessageZPRO_1[_0x5b31f8(0x104)][_0x5b31f8(0xca)](_0x3ff47c), _0x39116f = {};
            _0x39116f[_0x5b31f8(0xdd)] = _0x47c9c0;
            const _0x26e39c = {};
            _0x26e39c[_0x5b31f8(0xbe)] = TicketZPRO_1[_0x5b31f8(0x104)], _0x26e39c['as'] = _0x24c1b4[_0x5b31f8(0x106)], _0x26e39c[_0x5b31f8(0x101)] = _0x39116f, _0x26e39c[_0x5b31f8(0xc6)] = [_0x24c1b4[_0x5b31f8(0xa9)]];
            const _0x2fb957 = yield MessageZPRO_1[_0x5b31f8(0x104)][_0x5b31f8(0xc1)](_0x418a2a['id'], {
                'include': [
                    _0x26e39c,
                    {
                        'model': MessageZPRO_1[_0x5b31f8(0x104)],
                        'as': _0x24c1b4[_0x5b31f8(0xcb)],
                        'include': [_0x24c1b4[_0x5b31f8(0xa9)]]
                    },
                    {
                        'model': UserZPRO_1[_0x5b31f8(0x104)],
                        'as': _0x24c1b4[_0x5b31f8(0xaa)],
                        'attributes': [
                            'id',
                            _0x24c1b4[_0x5b31f8(0xad)]
                        ]
                    },
                    {
                        'model': ContactZPRO_1[_0x5b31f8(0x104)],
                        'as': _0x24c1b4[_0x5b31f8(0xa9)],
                        'attributes': [
                            'id',
                            _0x24c1b4[_0x5b31f8(0xad)]
                        ]
                    }
                ]
            });
            if (_0x2fb957)
                try {
                    yield _0x2fb957[_0x5b31f8(0xb9)][_0x5b31f8(0xd5)]({
                        'lastMessageAt': _0x24c1b4[_0x5b31f8(0xe0)](_0x24c1b4[_0x5b31f8(0xd9)](_0x48d389 = _0x2fb957[_0x5b31f8(0xea)], null) || _0x24c1b4[_0x5b31f8(0xd9)](_0x48d389, void (0x1958 + 0x26ad + 0x1557 * -0x3)) ? void (0x7d9 + 0x3d * 0x8e + -0x29af) : _0x48d389[_0x5b31f8(0xfa)]()[_0x5b31f8(0xf7)], -0x1542 + -0x1d * 0xef + 0x3062) ? _0x2fb957[_0x5b31f8(0xea)] : new Date()[_0x5b31f8(0xeb)](),
                        'lastMessageReceived': _0x2fb957[_0x5b31f8(0x109)] ? null : new Date()[_0x5b31f8(0xeb)]()
                    });
                } catch (_0xa22fcf) {
                    console[_0x5b31f8(0x10d)](_0x24c1b4[_0x5b31f8(0x99)], _0xa22fcf);
                }
            if (!_0x2fb957)
                throw new Error(_0x24c1b4[_0x5b31f8(0xc9)]);
            _0x2fb957[_0x5b31f8(0x109)] && (yield TicketZPRO_1[_0x5b31f8(0x104)][_0x5b31f8(0xd5)]({ 'lastMessageReceived': _0x24c1b4[_0x5b31f8(0xe0)](_0x24c1b4[_0x5b31f8(0xc5)](_0x4dc76b = _0x2fb957[_0x5b31f8(0xea)], null) || _0x24c1b4[_0x5b31f8(0xd9)](_0x4dc76b, void (0x198c + 0x1 * -0x242a + 0xa9e)) ? void (-0x267 + 0x2e * -0x4e + 0x106b) : _0x4dc76b[_0x5b31f8(0xfa)]()[_0x5b31f8(0xf7)], 0x3ef + 0x1099 + 0x6b * -0x31) ? _0x2fb957[_0x5b31f8(0xea)] : new Date()[_0x5b31f8(0xeb)]() }, { 'where': { 'id': _0x2fb957[_0x5b31f8(0xff)] } }));
            const _0x88a2b9 = {};
            return _0x88a2b9[_0x5b31f8(0xdd)] = _0x47c9c0, _0x88a2b9[_0x5b31f8(0xf9)] = _0x24c1b4[_0x5b31f8(0x100)], _0x88a2b9[_0x5b31f8(0xed)] = _0x2fb957, (-0xa2f + 0x155b + 0x2cb * -0x4, xbj_zpro_1[_0x5b31f8(0x104)])(_0x88a2b9), _0x418a2a;
        } catch (_0x38df23) {
            fxiui_zpro_1[_0x5b31f8(0xa7)][_0x5b31f8(0x10c)](_0x24c1b4[_0x5b31f8(0xbc)](_0x24c1b4[_0x5b31f8(0xc0)], _0x38df23));
        }
    });
exports[_0x50cccf(0x104)] = CreateMessageService;